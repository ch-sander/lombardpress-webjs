(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{173:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(43),o=n.n(s),r=n(10),l=n(29),c=n(13),u=n.n(c),p=n(73),h=n.n(p),d=n(18),f=n.n(d),m="https://sparql-docker.scta.info/ds/query",v="http://scta.info/resource/scta";var y=function(e){return i.a.createElement("div",{className:"Home"},i.a.createElement(u.a,{id:"lbp-home",fluid:!0},i.a.createElement(u.a,null,i.a.createElement(h.a,{id:"lbp-jumbo"},i.a.createElement("h1",null,"The SCTA Reading Room"),i.a.createElement("p",null,"A site for reading, viewing, and studying the scholastic tradition"),i.a.createElement(f.a,null,i.a.createElement(r.b,{className:"nav-link",to:"/text?resourceid="+v,style:{color:"black"}},"Enter"))))))},b=n(2),x=n(3),g=n(5),T=n(4),E=n(1),w=n(6),O=n(17),C=n.n(O),k=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).retrieveExpressionResults=n.retrieveExpressionResults.bind(Object(E.a)(n)),n.retrieveAuthorResults=n.retrieveAuthorResults.bind(Object(E.a)(n)),n.state={searchResults:[],count:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"retrieveExpressionResults",value:function(e,t){var n=this;C.a.get("http://exist.scta.info/exist/apps/scta-app/jsonsearch/json-search-text-by-expressionid.xq?query="+e+"&expressionid="+t).then(function(e){n.setState({searchResults:e.data.results,count:e.data.count})})}},{key:"retrieveAuthorResults",value:function(e,t){var n=this,a=t.split("/resource/")[1];C.a.get("http://exist.scta.info/exist/apps/scta-app/jsonsearch/json-search-text-by-authorid.xq?query="+e+"&authorid="+a).then(function(e){n.setState({searchResults:e.data.results,count:e.data.count})})}},{key:"componentDidMount",value:function(){var e=this.props.query,t=this.props.eid,n=this.props.authorFocusId;t?this.retrieveExpressionResults(e,t):n&&this.retrieveAuthorResults(e,n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query,n=e.eid,a=e.authorFocusId;n?this.retrieveExpressionResults(t,n):a&&this.retrieveAuthorResults(t,a)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,e.state.searchResults?e.state.searchResults.length>1?e.state.searchResults.map(function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("p",null,i.a.createElement(r.b,{to:"/text?resourceid=http://scta.info/resource/"+e.pid},e.pid)),i.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.text}}))}):e.state.searchResults?i.a.createElement("div",{key:e.state.searchResults.pid},i.a.createElement("p",null,i.a.createElement(r.b,{to:"/text?resourceid=http://scta.info/resource/"+e.state.searchResults.pid},e.state.searchResults.pid)),i.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.state.searchResults.text}})):i.a.createElement("div",null,i.a.createElement("p",null,"No results")):i.a.createElement("div",null,i.a.createElement("p",null,"No results found")))}}]),t}(i.a.Component),S=n(20),I=n.n(S),L=n(14),j=n.n(L);function F(e){return new Promise(function(t){var n=new XMLHttpRequest;if(n.open("GET",e),"undefined"===typeof XSLTProcessor)try{n.responseType="msxml-document"}catch(a){console.log("error",a)}n.onload=function(){t(this.responseXML)},n.send()})}function M(e){return C.a.get(m,{params:{query:e,output:"json"}})}function A(e,t){var n=j()("#"+e);t&&(n.addClass("highlightNone"),j()(".paragraphnumber").removeClass("highlight2"),j()(".plaoulparagraph").removeClass("highlightNone"),j()(".plaoulparagraph").removeClass("highlight"),n.children(".paragraphnumber").addClass("highlight2"),n.addClass("highlight"),setTimeout(function(){n.addClass("highlightNone")},2e3)),n.length>0&&j()("html, body").stop().animate({scrollTop:n.offset().top-100},1e3)}function N(e){return["SELECT DISTINCT ?title ?structureType ?cmanifestation ?cmanifestationTitle ?manifestation ?manifestationTitle ?ctranscription ?manifestationCTranscription ?cdoc ?cxml ?expressionShortId ?longTitle ?topLevelExpression ?next ?previous ?inbox ?author ?authorTitle ","WHERE { ","<"+e+"> <http://purl.org/dc/elements/1.1/title> ?title .","<"+e+"> <http://scta.info/property/structureType> ?structureType .","<"+e+"> <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation .","?cmanifestation <http://purl.org/dc/elements/1.1/title> ?cmanifestationTitle .","<"+e+"> <http://scta.info/property/hasManifestation> ?manifestation .","?manifestation <http://purl.org/dc/elements/1.1/title> ?manifestationTitle .","?manifestation <http://scta.info/property/hasCanonicalTranscription> ?manifestationCTranscription .","?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription .","?ctranscription <http://scta.info/property/hasDocument> ?cdoc . ","?ctranscription <http://scta.info/property/hasXML> ?cxml . ","<"+e+"> <http://scta.info/property/shortId> ?expressionShortId .","<"+e+"> <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .","OPTIONAL {","<"+e+"> <http://scta.info/property/longTitle> ?longTitle .","}","OPTIONAL {","?topLevelExpression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","OPTIONAL {","<"+e+"> <http://scta.info/property/next> ?next .","}","OPTIONAL {","<"+e+"> <http://scta.info/property/previous> ?previous .","}","<"+e+"> <http://www.w3.org/ns/ldp#inbox> ?inbox . ","}","ORDER BY ?title"].join("")}function R(e){return["SELECT DISTINCT ?part ?partTitle ?partQuestionTitle ?partType ?partLevel ","WHERE { ","<"+e+"> <http://purl.org/dc/terms/hasPart> ?part .","?part <http://purl.org/dc/elements/1.1/title> ?partTitle .","?part <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?partType . ","OPTIONAL {","?part <http://scta.info/property/questionTitle> ?partQuestionTitle .","}","OPTIONAL {","?part <http://scta.info/property/level> ?partLevel .","}","OPTIONAL {","?part <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","}","}","ORDER BY ?totalOrderNumber"].join("")}function D(e){return["SELECT DISTINCT ?surfaceTitle ?isurface ?isurfaceTitle ?icodexTitle ?canvas ?imageurl ?next_surface ?previous_surface ","{","<"+e+"> <http://purl.org/dc/elements/1.1/title> ?surfaceTitle .","<"+e+"> <http://scta.info/property/hasISurface> ?isurface .","OPTIONAL {","<"+e+"> <http://scta.info/property/next> ?next_surface .","}","OPTIONAL {","<"+e+"> <http://scta.info/property/previous> ?previous_surface .","}","OPTIONAL {","?isurface <http://purl.org/dc/elements/1.1/title> ?isurfaceTitle .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?icodex <http://purl.org/dc/elements/1.1/title> ?icodexTitle .","}","?isurface <http://scta.info/property/hasCanvas> ?canvas .","OPTIONAL{","?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?blank .","}","OPTIONAL{","?canvas <http://www.w3.org/2003/12/exif/ns#height> ?c_height .","}","?blank <http://www.w3.org/1999/02/22-rdf-syntax-ns#first> ?o .","?o <http://www.w3.org/ns/oa#hasBody> ?o2 .","OPTIONAL{","?o2 <http://rdfs.org/sioc/services#has_service> ?imageurl .","}","OPTIONAL{","?o2 <http://www.shared-canvas.org/ns/hasRelatedService> ?imageurl .","}","}"].join("")}var _=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleQueryUpdate=n.handleQueryUpdate.bind(Object(E.a)(n)),n.handleEidUpdate=n.handleEidUpdate.bind(Object(E.a)(n)),n.handleRunSearch=n.handleRunSearch.bind(Object(E.a)(n)),n.getAvailableExpressions=n.getAvailableExpressions.bind(Object(E.a)(n)),n.handleAuthorUpdate=n.handleAuthorUpdate.bind(Object(E.a)(n)),n.handleToggleFilterOptions=n.handleToggleFilterOptions.bind(Object(E.a)(n)),n.state={query:"",eid:"",eidFull:"",authorFocusId:"",availableExpressions:[],availableAuthors:[],showFilterOptions:!1},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleQueryUpdate",value:function(e){e.preventDefault(),this.setState({query:e.target.value})}},{key:"getAvailableExpressions",value:function(e){var t=this;M(function(e){var t="";return e.authorId&&(t="BIND(<"+e.authorId+"> as ?author) . "),["SELECT DISTINCT ?expressionid ?expressionTitle ?author ?authorTitle ","{",t,"?author a <http://scta.info/resource/person> .","?expressionid <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?expressionid a <http://scta.info/resource/expression> .","?expressionid <http://scta.info/property/level> '1' .","?expressionid <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","ORDER BY ?authorTitle"].join("")}(e)).then(function(e){var n=e.data.results.bindings.map(function(e){return{expression:e.expressionid.value,expressionTitle:e.expressionTitle.value,author:e.author.value,authorTitle:e.authorTitle.value}});t.setState(function(){return{availableExpressions:n}})})}},{key:"getAvailableAuthors",value:function(){var e=this;M(["SELECT DISTINCT ?author ?authorTitle ","{","?author a <http://scta.info/resource/person> .","?expressionid <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","ORDER BY ?authorTitle"].join("")).then(function(t){var n=t.data.results.bindings.map(function(e){return{author:e.author.value,authorTitle:e.authorTitle.value}});e.setState(function(){return{availableAuthors:n}})})}},{key:"handleEidUpdate",value:function(e){e.preventDefault(),this.setState({eid:e.target.value.split("/resource/")[1],eidFull:e.target.value})}},{key:"handleAuthorUpdate",value:function(e){e.preventDefault(),this.setState({authorFocusId:e.target.value,eid:"",eidFull:""})}},{key:"handleToggleFilterOptions",value:function(){this.setState(function(e){return{showFilterOptions:!e.showFilterOptions}})}},{key:"handleRunSearch",value:function(e){e.preventDefault(),this.props.handleRunSearch(this.state.query,this.state.eid,this.state.authorFocusId)}},{key:"componentDidUpdate",value:function(e,t){t.authorFocusId!==this.state.authorFocusId&&this.getAvailableExpressions({authorId:this.state.authorFocusId})}},{key:"componentDidMount",value:function(){this.getAvailableExpressions({}),this.getAvailableAuthors(),this.props.eid&&this.setState({eid:this.props.eid,eidFull:"http://scta.info/resource/"+this.props.eid,authorFocusId:this.props.authorId})}},{key:"componentWillReceiveProps",value:function(e){e.eid&&this.setState({eid:e.eid})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(I.a,{onSubmit:this.handleRunSearch},i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Enter Search Text"),i.a.createElement(I.a.Control,{type:"text",id:"query",placeholder:"query",className:"mr-sm-2",onChange:this.handleQueryUpdate})),this.state.showFilterOptions&&i.a.createElement("div",null,i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Filter by Author"),i.a.createElement(I.a.Control,{as:"select",onChange:this.handleAuthorUpdate,value:this.state.authorFocusId},i.a.createElement("option",{key:"all-authors",value:""},"All"),e.state.availableAuthors.length>0?e.state.availableAuthors.map(function(e,t){return i.a.createElement("option",{key:e.author+"-"+t,value:e.author},e.authorTitle)}):null)),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Filter by Title"),i.a.createElement(I.a.Control,{as:"select",onChange:this.handleEidUpdate,value:this.state.eidFull},i.a.createElement("option",{key:"all-expressions",value:""},"All"),e.state.availableExpressions.length>0?e.state.availableExpressions.map(function(e,t){return i.a.createElement("option",{key:e.expression+"-"+t,value:e.expression},e.authorTitle,": ",e.expressionTitle)}):null))),i.a.createElement(f.a,{onClick:this.handleToggleFilterOptions},this.state.showFilterOptions?"Hide":"Show"," Filter Options"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(f.a,{type:"submit",variant:"outline-success"},"Search")))}}]),t}(i.a.Component),P=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleRunSearch=n.handleRunSearch.bind(Object(E.a)(n)),n.state={query:"",eid:"",authorFocusId:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleRunSearch",value:function(e,t,n){this.setState({query:e,eid:t,authorFocusId:n})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){return i.a.createElement(u.a,{className:this.props.hidden?"hidden":"showing"},i.a.createElement("h1",null,"Search"),i.a.createElement(_,{handleRunSearch:this.handleRunSearch,eid:this.props.topLevel?this.props.topLevel.split("/resource/")[1]:null,authorId:this.props.authorId}),this.state.query&&i.a.createElement(k,{query:this.state.query,eid:this.state.eid,authorFocusId:this.state.authorFocusId}))}}]),t}(i.a.Component),W=n(45),U=n.n(W);var q=function(e){var t="";if(e.coords){var n=e.coords.split(",");t=parseInt(n[0])-20+","+n[1]+","+(parseInt(n[2])+40)+","+n[3]}var a=e.imageUrl+"/"+t+"/"+e.displayWidth+",/0/default.jpg";return i.a.createElement("img",{alt:"manuscript",src:a})};var H=function(e){return i.a.createElement("div",{className:"text",style:{whiteSpace:"nowrap"}},i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}))},z=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).state={searchText:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:this.props.targetLabel===this.props.label?"ImageTextWrapper target":"ImageTextWrapper"},i.a.createElement("div",{className:"labelImageWrapper"},i.a.createElement(q,{imageUrl:this.props.imageUrl,canvas:this.props.canvas,coords:this.props.coords,canvasShort:this.props.canvasShort,displayWidth:this.props.displayWidth})),i.a.createElement(H,{text:this.props.text}))}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).mount=!1,n.handleNext=n.handleNext.bind(Object(E.a)(n)),n.handlePrevious=n.handlePrevious.bind(Object(E.a)(n)),n.handleToggleTextLines=n.handleToggleTextLines.bind(Object(E.a)(n)),n.handleToggleAllLines=n.handleToggleAllLines.bind(Object(E.a)(n)),n.state={currentSurfaceId:"",manifest:"",canvas:"",region:"full",width:"1000",next:"",previous:"",imageurl:"",annotationsDisplay:!0,showAllLines:!1},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleNext",value:function(){this.props.handleSurfaceFocusChange(this.state.next)}},{key:"handlePrevious",value:function(){this.props.handleSurfaceFocusChange(this.state.previous)}},{key:"handleToggleTextLines",value:function(){this.setState(function(e){return{annotationsDisplay:!e.annotationsDisplay}})}},{key:"handleToggleAllLines",value:function(){this.setState(function(e){return{showAllLines:!e.showAllLines}})}},{key:"retrieveSurfaceInfo",value:function(e){var t=this;M(D(e)).then(function(n){var a=n.data.results.bindings[0];if(a){var i="https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid="+e.split("/resource/")[1];C.a.get(i).then(function(n){t.mount&&t.setState({currentSurfaceId:e,surfaceTitle:a.surfaceTitle.value,manifest:"",canvas:a.canvas.value,imageurl:a.imageurl.value,next:a.next_surface?a.next_surface.value:"",previous:a.previous_surface?a.previous_surface.value:"",annotations:n.data?n.data.resources:""})}).catch(function(n){console.log("failed retrieving annotationlist: ",n),t.mount&&t.setState({currentSurfaceId:e,surfaceTitle:a.surfaceTitle.value,manifest:"",canvas:a.canvas.value,imageurl:a.imageurl.value,next:a.next_surface?a.next_surface.value:"",previous:a.previous_surface?a.previous_surface.value:"",annotations:""})})}})}},{key:"componentDidMount",value:function(){this.mount=!0,this.props.surfaceid&&this.retrieveSurfaceInfo(this.props.surfaceid),this.setState({annotationsDisplay:this.props.annotationsDisplay})}},{key:"componentWillReceiveProps",value:function(e){e.surfaceid&&this.retrieveSurfaceInfo(e.surfaceid)}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=this;return i.a.createElement(u.a,{className:this.props.hidden?"hidden":"showing"},this.state.currentSurfaceId?i.a.createElement("div",null,i.a.createElement("div",{className:"surface-navigation"},i.a.createElement("p",null,this.state.surfaceTitle),this.props.handleSurfaceFocusChange&&i.a.createElement("div",null,this.state.previous&&i.a.createElement(f.a,{size:"sm",onClick:this.handlePrevious},"Previous"),this.state.next&&i.a.createElement(f.a,{size:"sm",onClick:this.handleNext},"Next")),i.a.createElement("div",null,this.props.lineFocusId&&i.a.createElement(f.a,{size:"sm",onClick:this.handleToggleAllLines},"Show All Lines"),this.state.annotations&&i.a.createElement(f.a,{size:"sm",onClick:this.handleToggleTextLines},"Toggle Text Lines"))),function(){if(e.state.annotations&&e.state.annotationsDisplay)return e.state.annotations.map(function(t,n){var a=t.resource.chars,s=t.on.split("#xywh=")[0],o=s.split("/")[s.split("/").length-1],r=t.on.split("#xywh=")[1],l=t.imageUrl,c=t.label;return e.state.showAllLines||parseInt(e.props.lineFocusId.split("/")[e.props.lineFocusId.split("/").length-1])===n+1||!e.props.lineFocusId?i.a.createElement(z,{key:n,imageUrl:l,canvas:s,coords:r,canvasShort:o,text:a,label:c,targetLabel:e.props.targetLabel,surfaceButton:!1,displayWidth:e.props.width?e.props.width:e.state.width}):null});var t=e.props.width?e.props.width:e.state.width;return i.a.createElement("img",{alt:"manuscript",src:e.state.imageurl+"/"+e.state.region+"/"+t+",/0/default.jpg"})}()):i.a.createElement("p",null,"No surface selected"))}}]),t}(i.a.Component);B.defaultProps={annotationsDisplay:!0};var V=B,Y=n(23),Q=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).mounted="",n.handleNext=n.handleNext.bind(Object(E.a)(n)),n.handlePrevious=n.handlePrevious.bind(Object(E.a)(n)),n.state={region:"full",surfaces:[]},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleNext",value:function(){this.props.handleSurfaceFocusChange(this.state.next)}},{key:"handlePrevious",value:function(){this.props.handleSurfaceFocusChange(this.state.previous)}},{key:"retrieveSurfaceInfo",value:function(e){var t=this;M(["SELECT ?first ?last ?order ?surface","{","<"+e+"> <http://scta.info/property/isOnZone> ?zone . ","?zone <http://scta.info/property/isOnZone> ?zone2 .","?zone2 <http://scta.info/property/firstLine> ?first .","?zone2 <http://scta.info/property/lastLine> ?last .","?zone2 <http://scta.info/property/isPartOfSurface> ?surface .","?zone <http://scta.info/property/isOnZoneOrder> ?order .","}"].join("")).then(function(e){e.data.results.bindings.forEach(function(e){var n=e.surface.value,a=e.first.value,i=e.last.value,s=e.order.value;M(D(n)).then(function(e){var o=e.data.results.bindings[0];if(console.log("data",e),o){var r="https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid="+n.split("/resource/")[1];C.a.get(r).then(function(e){t.mounted&&t.setState(function(t){var r={currentSurfaceId:n,surfaceTitle:o.surfaceTitle?o.surfaceTitle.value:"",canvas:o.canvas.value,imageurl:o.imageurl.value,next:o.next_surface?o.next_surface.value:"",previous:o.previous_surface?o.previous_surface.value:"",annotations:e.data?e.data.resources:"",surfaceid:n,firstLine:a,lastLine:i,order:s};return{surfaces:[].concat(Object(Y.a)(t.surfaces),[r])}})}).catch(function(e){console.log("failed retrieving annotationlist: ",e),t.mounted&&t.setState(function(e){var t={currentSurfaceId:n,surfaceTitle:o.surfaceTitle.value,canvas:o.canvas.value,imageurl:o.imageurl.value,next:o.next_surface?o.next_surface.value:"",previous:o.previous_surface?o.previous_surface.value:"",annotations:"",surfaceid:n,firstLine:a,lastLine:i,order:s};return{surfaces:[].concat(Object(Y.a)(e.surfaces),[t])}})})}})})})}},{key:"componentDidMount",value:function(){this.mounted=!0,this.props.manifestationid&&this.setState(function(e){return{surfaces:[]}},this.retrieveSurfaceInfo(this.props.manifestationid))}},{key:"componentWillReceiveProps",value:function(e){e.manifestationid!==this.props.manifestationid&&this.setState(function(e){return{surfaces:[]}},this.retrieveSurfaceInfo(e.manifestationid))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=function(t){if(t.annotations&&"lines"===e.props.annotationsDisplay)return t.annotations.map(function(n,a){if(a+1>=t.firstLine&&a<t.lastLine){var s=n.resource.chars,o=n.on.split("#xywh=")[0],r=o.split("/")[o.split("/").length-1],l=n.on.split("#xywh=")[1],c=n.imageUrl,u=n.label;return i.a.createElement(z,{key:a,imageUrl:c,canvas:o,coords:l,canvasShort:r,text:s,label:u,targetLabel:e.props.targetLabel,surfaceButton:!1,displayWidth:e.props.width})}return null});if(t.annotations&&"paragraph"===e.props.annotationsDisplay){var n=t.annotations[t.firstLine-1],a=t.annotations[t.firstLine-1],s=a?a.on.split("#xywh=")[0]:"",o=s.split("/")[s.split("/").length-1],r=a?a.on.split("#xywh=")[1]:"",l=r.split(",")[1],c=t.annotations[t.lastLine-1],u=c?c.on.split("#xywh=")[1]:"",p=u.split(",")[1],h=u.split(",")[3],d=parseInt(p)+parseInt(h)-parseInt(l),f=parseInt(r.split(",")[0]-10)+","+parseInt(l)+","+(parseInt(r.split(",")[2])+10)+","+(parseInt(d)+50),m=n?n.imageUrl:"";return m?i.a.createElement(z,{key:t.currentSurfaceId+"-"+t.order,imageUrl:m,canvas:s,coords:f,canvasShort:o,text:"",label:"",targetLabel:"",surfaceButton:!1,displayWidth:e.props.width}):i.a.createElement("p",{key:t.currentSurfaceId+"-"+t.order},"Sorry, this image is not yet ready")}return i.a.createElement("img",{key:t.currentSurfaceId+"-"+t.order,alt:"manuscript",src:t.imageurl+"/full/"+e.props.width+",/0/default.jpg"})};return i.a.createElement(u.a,{className:this.props.hidden?"hidden":"showing"},e.state.surfaces.sort(function(e,t){return e.order>t.order?1:t.order>e.order?-1:0}).map(function(e){return t(e)}))}}]),t}(i.a.Component);Q.defaultProps={width:"500"};var X=Q,G=n(8),J=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleChangeManifestation=n.handleChangeManifestation.bind(Object(E.a)(n)),n.handleToggleTextLinesView=n.handleToggleTextLinesView.bind(Object(E.a)(n)),n.state={focusedManifestation:"",annotationsDisplay:"lines"},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleTextLinesView",value:function(e){this.props.handleToggleTextLinesView?this.props.handleToggleTextLinesView(e):this.setState(function(t){return{annotationsDisplay:e}})}},{key:"handleChangeManifestation",value:function(e){e.preventDefault(),this.props.handleChangeManifestation?this.props.handleChangeManifestation(e.target.value):this.setState({focusedManifestation:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;this.props.manifestations&&this.setState(function(t){return{focusedManifestation:e.props.focusedManifestation,annotationsDisplay:e.props.annotationsDisplay}})}},{key:"componentWillReceiveProps",value:function(e){e.focusedManifestation!==this.props.focusedManifestation&&this.setState(function(t){return{focusedManifestation:e.focusedManifestation}}),e.annotationsDisplay!==this.props.annotationsDisplay&&this.setState(function(t){return{annotationsDisplay:e.annotationsDisplay}})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement("div",{className:"manifestationsList"},i.a.createElement(I.a.Control,{as:"select",onChange:this.handleChangeManifestation,value:this.state.focusedManifestation},e.props.manifestations.map(function(e){return i.a.createElement("option",{key:"title-"+e.manifestation,value:e.manifestation},e.manifestationTitle)}))),i.a.createElement("div",{className:"surfaceWrapper"},this.state.focusedManifestation&&i.a.createElement("div",{className:"image-display-choice"},i.a.createElement("p",null,i.a.createElement("span",{title:"Text Line View",onClick:function(){e.handleToggleTextLinesView("lines")}},i.a.createElement(G.p,null))),i.a.createElement("p",null,i.a.createElement("span",{title:"Paragraph View",onClick:function(){e.handleToggleTextLinesView("paragraph")}},i.a.createElement(G.q,null))),i.a.createElement("p",null,i.a.createElement("span",{title:"Full Surface View",onClick:function(){e.handleToggleTextLinesView("surface")}},i.a.createElement(G.m,null)))),i.a.createElement("div",{className:"imagesDisplay"},e.props.manifestations.map(function(t){return t.manifestation===e.state.focusedManifestation?i.a.createElement(X,{key:"surface-"+t.manifestation,manifestationid:t.manifestation,annotationsDisplay:e.state.annotationsDisplay,width:e.props.width}):null}))))}}]),t}(i.a.Component);J.defaultProps={manifestations:[],hidden:!1,focusedManifestation:"",annotationsDisplay:"paragraph",width:"500"};var Z=J,$=n(178),K=n(177),ee=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).mount=!1,n.retrieveXML=n.retrieveXML.bind(Object(E.a)(n)),n.state={xmlstring:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"retrieveXML",value:function(e){var t=this,n="http://exist.scta.info/exist/apps/scta-app/document/"+e.split("/resource/")[1];C.a.get(n).then(function(e){t.mount&&t.setState({xmlstring:e.data})})}},{key:"componentDidMount",value:function(){this.mount=!0,this.retrieveXML(this.props.tresourceid)}},{key:"componentWillReceiveProps",value:function(e){e.tresourceid!==this.props.tresourceid&&this.retrieveXML(e.tresourceid)}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement($.a,{language:"xml",style:K.a,showLineNumbers:!0},this.state.xmlstring))}}]),t}(i.a.Component),te=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).copyToClipboard=n.copyToClipboard.bind(Object(E.a)(n)),n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"copyToClipboard",value:function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement("h1",null,"Info"),function(){if(e.props.info){var t=e.props.info.resourceid.includes("http")?e.props.info.resourceid:"http://scta.info/resource/"+e.props.info.resourceid;return i.a.createElement("div",null,i.a.createElement("p",{key:"id"},"Resourceid: ",t,"  ",i.a.createElement("span",{title:"Copy resource id",onClick:function(n){n.preventDefault(),e.copyToClipboard(t)}},i.a.createElement(G.f,null))),i.a.createElement("p",{key:"inbox"},"LDN Inbox: ",e.props.info.inbox))}}(),i.a.createElement("div",null,i.a.createElement("p",null,"Manifestations"),function(){if(e.props.info)return e.props.info.manifestations.map(function(e){return i.a.createElement("p",{key:e.manifestation},e.manifestationTitle," : ",i.a.createElement(r.b,{to:"/text?resourceid="+e.manifestation},e.manifestation))})}()),i.a.createElement("div",null,i.a.createElement("p",null,"Related Expression"),function(){if(e.props.info&&e.props.info.relatedExpressions)return e.props.info.relatedExpressions.map(function(e){return i.a.createElement("p",{key:e.resourceid},e.relationLabel," ",i.a.createElement(r.b,{to:"/text?resourceid="+e.resourceid},e.resourceid))})}()))}}]),t}(i.a.Component),ne=n(9),ae=n.n(ne);var ie=function(e){return i.a.createElement(ae.a,{variant:"tabs"},e.focusSet&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Basic Resource Information",onClick:function(){e.handleTabChange("info",e.windowId)}},i.a.createElement(G.o,null))),e.focusSet&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Images",onClick:function(){e.handleTabChange("surface3",e.windowId)}},i.a.createElement(G.s,null))),i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Text XML Source",onClick:function(){e.handleTabChange("xml",e.windowId)}},i.a.createElement(G.h,null))),e.focusSet&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Text Comparisons",onClick:function(){e.handleTabChange("textCompare",e.windowId)}},i.a.createElement(G.n,null))),e.focusSet&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Comments",onClick:function(){e.handleTabChange("comments",e.windowId)}},i.a.createElement(G.i,null))),e.focusSet&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Text Citation",onClick:function(){e.handleTabChange("citation",e.windowId)}},i.a.createElement(G.r,null))),i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Text Outline",onClick:function(){e.handleTabChange("textOutlineWrapper",e.windowId)}},i.a.createElement(G.a,null))),i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Text Search",onClick:function(){e.handleTabChange("search",e.windowId)}},i.a.createElement(G.x,null))),"minimum"!==e.openWidthHeight&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Minimize Window",onClick:function(){e.handleMinimize(e.windowId)}},i.a.createElement(G.v,null))),"middle"!==e.openWidthHeight&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Half Size Window",onClick:function(){e.handleMiddlize(e.windowId)}},i.a.createElement(G.w,null))),"maximum"!==e.openWidthHeight&&i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Maximize Window",onClick:function(){e.handleMaximize(e.windowId)}},i.a.createElement(G.u,null))),i.a.createElement(ae.a.Item,null,i.a.createElement(ae.a.Link,{title:"Close Window",onClick:function(){e.handleClose(e.windowId)}},i.a.createElement(G.t,null))),i.a.createElement(ae.a.Item,null,!e.altWindowState&&i.a.createElement(ae.a.Link,{title:"Clone Window",onClick:function(){e.handleDuplicateWindow(e.windowId,e.windowType)}},i.a.createElement(G.g,null))))};var se=function(e){return e.info?i.a.createElement(ae.a,{variant:"tabs"},i.a.createElement(ae.a.Link,{onClick:function(){e.handleBlockFocusChange(e.info.resourceid)}},e.info.title),i.a.createElement(ae.a.Item,null,e.info.previous&&"http://scta.info/resource/"!==e.info.previous&&i.a.createElement(ae.a.Link,{onClick:function(){e.handleBlockFocusChange(e.info.previous)}},i.a.createElement(G.b,null))),i.a.createElement(ae.a.Item,null,e.info.next&&"http://scta.info/resource/"!==e.info.next&&i.a.createElement(ae.a.Link,{onClick:function(){e.handleBlockFocusChange(e.info.next)}},i.a.createElement(G.c,null)))):null},oe=n(80),re=n(77),le=n.n(re),ce=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleToggleShow=n.handleToggleShow.bind(Object(E.a)(n)),n.mounted="",n.state={compareText:"",rawText:"",show:!0},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleShow",value:function(){this.setState(function(e){return{show:!e.show}})}},{key:"createCompare",value:function(e,t){var n=this;C.a.get("http://exist.scta.info/exist/apps/scta-app/csv-pct.xq?resourceid="+t).then(function(t){var a=new le.a.diff_match_patch,i=a.diff_main(e,t.data);a.diff_cleanupSemantic(i);var s=a.diff_prettyHtml(i);!0===n.mounted&&e&&n.setState({compareText:s,rawText:t.data})})}},{key:"componentDidMount",value:function(){this.mounted=!0,this.setState({rawText:"",compareText:""}),this.createCompare(this.props.base,this.props.compareTranscription)}},{key:"componentWillReceiveProps",value:function(e){e.base===this.props.base&&e.compareTranscription===this.props.compareTranscription||(this.setState({rawText:"",compareText:""}),this.createCompare(e.base,e.compareTranscription))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return e.props.base&&e.state.compareText?i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement(r.b,{to:"/text?resourceid="+e.props.compareTranscription},e.props.compareTranscription)),i.a.createElement("span",{onClick:function(){return e.handleToggleShow()}},e.state.show?i.a.createElement(G.l,null):i.a.createElement(G.k,null)),i.a.createElement("span",{onClick:function(){return e.props.handleChangeBase(e.state.rawText)}},i.a.createElement(G.y,null)),i.a.createElement("div",{className:e.state.show?"unhidden":"hidden"},i.a.createElement("div",{ref:"text",dangerouslySetInnerHTML:{__html:e.state.compareText}}))):i.a.createElement("p",null,"Loading")}}]),t}(i.a.Component),ue=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleToggleShowAll=n.handleToggleShowAll.bind(Object(E.a)(n)),n.mounted="",n.state={info:"",show:!1,baseText:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleShowAll",value:function(){this.setState(function(e){return{show:!e.show}})}},{key:"arrangeTextInfo",value:function(e,t){var n=this;e.then(function(e){var a=e.data.results.bindings[0],i=e.data.results.bindings.map(function(e){return{manifestation:e.manifestation.value,manifestationTitle:e.manifestationTitle.value,transcription:e.manifestationCTranscription.value}});!0===n.mounted&&a&&n.setState({info:{resourceid:t,title:a.title.value,structureType:a.structureType.value,inbox:a.inbox.value,next:a.next?a.next.value:"",previous:a.previous?a.previous.value:"",cdoc:a.cdoc.value,cxml:a.cxml.value,topLevel:a.topLevelExpression.value,cmanifestation:a.cmanifestation.value,ctranscription:a.ctranscription.value,manifestations:i}})})}},{key:"getTextInfo",value:function(e){var t=M(N(e));this.arrangeTextInfo(t,e)}},{key:"componentDidMount",value:function(){this.mounted=!0,this.setState({show:this.props.show,baseText:this.props.baseText}),this.props.isMainText?this.setState({info:this.props.info}):this.getTextInfo(this.props.expressionid)}},{key:"componentWillReceiveProps",value:function(e){this.props.info.resourceid!==e.info.resourceid&&(this.setState({baseText:e.baseText}),e.isMainText?this.setState({info:e.info}):this.getTextInfo(e.expressionid))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("span",null,this.props.relationLabel)," ",i.a.createElement(r.b,{to:"/text?resourceid="+this.state.info.resourceid},this.state.info.resourceid),i.a.createElement("span",{onClick:function(){return e.handleToggleShowAll()}},this.state.show?i.a.createElement(G.l,null):i.a.createElement(G.k,null))),i.a.createElement("div",{className:this.state.show?"unhidden":"hidden"},function(){if(e.state.info.manifestations)return e.state.info.manifestations.map(function(t){return i.a.createElement(ce,{key:t.transcription,base:e.props.baseText,compareTranscription:t.transcription,handleChangeBase:e.props.handleChangeBase,show:e.state.show})})}()))}}]),t}(i.a.Component),pe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleCompare=n.handleToggleCompare.bind(Object(E.a)(n)),n.handleChangeBase=n.handleChangeBase.bind(Object(E.a)(n)),n.getText=n.getText.bind(Object(E.a)(n)),n.mounted="",n.state={expressions:{},baseText:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleChangeBase",value:function(e){this.setState({baseText:e})}},{key:"handleToggleCompare",value:function(e){this.setState(function(t){var n=Object(oe.a)({},t.expressions);return n[e].show=!n[e].show,{expressions:n}})}},{key:"getText",value:function(e){var t=this;C.a.get("http://exist.scta.info/exist/apps/scta-app/csv-pct.xq?resourceid="+e).then(function(e){t.setState({baseText:e.data})})}},{key:"componentDidMount",value:function(){if(this.props.info&&this.props.info.relatedExpressions){this.getText(this.props.info.ctranscription);var e={};e[this.props.info.resourceid]={id:this.props.info.resourceid,show:!0},this.props.info.relatedExpressions.forEach(function(t){e[t.resourceid]={id:t.resourceid,relationLabel:t.relationLabel,show:!1}}),this.setState({expressions:e})}}},{key:"componentWillReceiveProps",value:function(e){if(this.props.info.resourceid!==e.info.resourceid&&this.props.info.relatedExpressions){this.props.info.ctranscription!==e.info.ctranscription&&this.getText(e.info.ctranscription);var t={};t[e.info.resourceid]={id:e.info.resourceid,show:!0},e.info.relatedExpressions.forEach(function(e){t[e.resourceid]={id:e.resourceid,relationLabel:e.relationLabel,show:!1}}),this.setState({expressions:t})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},function(){var t=e.state.expressions;return Object.keys(t).map(function(n){var a=e.props.info.resourceid===t[n].id;return i.a.createElement("div",{key:e.state.expressions[n].id},i.a.createElement(ue,{info:e.props.info,expressionid:t[n].id,relationLabel:t[n].relationLabel,isMainText:a,handleChangeBase:e.handleChangeBase,baseText:e.state.baseText,show:t[n].show}))})}())}}]),t}(i.a.Component),he=n(78),de=n.n(he);var fe=function(e){return i.a.createElement("div",{className:"comment"},i.a.createElement("p",null,e.n&&e.n.body.value))},me=n(33),ve=n.n(me),ye=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleCommentUpdate=n.handleCommentUpdate.bind(Object(E.a)(n)),n.handleSubmitComment=n.handleSubmitComment.bind(Object(E.a)(n)),n.state={comment:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleCommentUpdate",value:function(e){e.preventDefault(),this.setState({comment:e.target.value})}},{key:"handleSubmitComment",value:function(e){e.preventDefault(),this.props.handleSumbitComment(this.state.comment)}},{key:"render",value:function(){return i.a.createElement("div",{className:"comment"},i.a.createElement(I.a,{onSubmit:this.handleSubmitComment},i.a.createElement(ve.a,{type:"text",id:"comment",placeholder:"comment",className:"mr-sm-2",onChange:this.handleCommentUpdate}),i.a.createElement(f.a,{type:"submit",variant:"outline-success"},"Search")))}}]),t}(i.a.Component),be=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleSumbitComment=n.handleSumbitComment.bind(Object(E.a)(n)),n.state={notifications:[],inbox:"",resourceid:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleSumbitComment",value:function(e){var t=this,n={"@context":"http://www.w3.org/ns/anno.jsonld",id:"http://inbox.scta.info/notifications/"+de()(),type:"Annotation",motivation:"commenting",body:{type:"TextualBody",value:e},target:this.state.resourceid};C()({method:"post",url:this.state.inbox,data:n,config:{headers:{"Content-Type":"application/json+ld"}}}).then(function(e){t.setState(function(e){return{notifications:[n].concat(Object(Y.a)(e.notifications))}})}).catch(function(e){console.log(e)})}},{key:"retrieveComments",value:function(e){this.setState({notifications:[]},function(){var t=this;C.a.get(e).then(function(e){e.data["ldp:contains"].forEach(function(e){C.a.get(e["@id"]).then(function(e){t.setState(function(t){return{notifications:[].concat(Object(Y.a)(t.notifications),[e.data])}})})})}).catch(function(e){console.log(e)})})}},{key:"componentDidMount",value:function(){this.props.resourceid&&(this.setState({inbox:this.props.inbox,resourceid:this.props.resourceid}),this.retrieveComments(this.props.inbox))}},{key:"componentWillReceiveProps",value:function(e){e.resourceid!==this.props.resourceid&&(this.setState({inbox:e.inbox,resourceid:e.resourceid}),this.retrieveComments(e.inbox))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement("h1",null,"Comments"),i.a.createElement(ye,{handleSumbitComment:this.handleSumbitComment}),e.state.notifications.map(function(e,t){return i.a.createElement(fe,{key:t,n:e})}))}}]),t}(i.a.Component),xe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).toggleAlternativeManifestations=n.toggleAlternativeManifestations.bind(Object(E.a)(n)),n.toggleCitationExplanation=n.toggleCitationExplanation.bind(Object(E.a)(n)),n.state={eurl:"",etitle:"",murl:"",mtitle:"",turl:"",showAlternativeManifestations:!1,showCitationExplanation:!1},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"toggleAlternativeManifestations",value:function(){this.setState(function(e){return{showAlternativeManifestations:!e.showAlternativeManifestations}})}},{key:"toggleCitationExplanation",value:function(){this.setState(function(e){return{showCitationExplanation:!e.showCitationExplanation}})}},{key:"retrieveCitation",value:function(e){var t,n=this;e&&M(["SELECT DISTINCT ?manifestation ?manifestationTitle ?manifestationSurface ?surfaceTitle ?codexTitle ?datasource ?eLongTitle ?author ?authorTitle ?expression ","{","<"+(t=e)+"> <http://scta.info/property/isTranscriptionOf> ?manifestation .","<"+t+"> <http://scta.info/property/hasDocument> ?datasource . ","?manifestation <http://purl.org/dc/elements/1.1/title> ?manifestationTitle .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .","OPTIONAL {","?expression <http://scta.info/property/longTitle> ?eLongTitle","}","OPTIONAL {","?topLevelExpression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","OPTIONAL","{","?manifestation <http://scta.info/property/isOnSurface> ?manifestationSurface .","?manifestationSurface <http://purl.org/dc/elements/1.1/title> ?surfaceTitle .","?surface <http://scta.info/property/order> ?surface_order .","?codex <http://scta.info/property/hasSurface> ?manifestationSurface .","?codex <http://purl.org/dc/elements/1.1/title> ?codexTitle .","}","}","ORDER BY ?surface_order"].join("")).then(function(t){var a=t.data.results.bindings;if(a.length>0){var i=a[0],s=i.expression?i.expression.value:"",o=i.manifestation?i.manifestation.value:"",r=i.eLongTitle?i.eLongTitle.value:"",l=i.authorTitle?i.authorTitle.value:"",c=i.authorTitle?i.author.value:"",u=i.datasource?i.datasource.value:"",p=i.codexTitle?i.codexTitle.value:"",h=i.surfaceTitle?i.surfaceTitle.value:"",d=a[a.length-1].surfaceTitle?a[a.length-1].surfaceTitle.value:"";n.setState({author:c,authorTitle:l,eurl:s,etitle:r,murl:o,mtitle:h!==d?p+", "+h+"-"+d:p+", "+h,turl:e,datasource:u})}})}},{key:"componentDidMount",value:function(){this.retrieveCitation(this.props.tresourceid)}},{key:"componentWillReceiveProps",value:function(e){e.tresourceid!==this.props.tresourceid&&this.retrieveCitation(e.tresourceid)}},{key:"render",value:function(){var e=this,t=this.state.authorTitle+", "+this.state.etitle+"("+this.state.mtitle+") Data source: "+this.state.datasource+".";return i.a.createElement(u.a,{className:this.props.hidden?"hidden":"showing"},i.a.createElement("h4",null,"Citation"),i.a.createElement("p",null,i.a.createElement("span",{className:"etitle"},this.state.authorTitle,", ",this.state.etitle," (",i.a.createElement("a",{href:this.state.eurl,target:"_blank",rel:"noopener noreferrer"},this.state.eurl),")"),i.a.createElement("br",null),i.a.createElement("span",{className:"mtitle"},"(",this.state.mtitle," (",i.a.createElement("a",{href:this.state.murl,target:"_blank",rel:"noopener noreferrer"},this.state.murl),"))"),i.a.createElement("br",null),i.a.createElement("span",{className:"ttitle"},"(Transcription Resource: ",i.a.createElement("a",{href:this.state.turl,target:"_blank",rel:"noopener noreferrer"},this.state.turl),"; (Data source:",i.a.createElement("a",{href:this.state.datasource,target:"_blank",rel:"noopener noreferrer"}," ",this.state.datasource),")"),i.a.createElement("span",{title:"Copy Citation to Clipboard",onClick:function(e){e.preventDefault(),function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}(t)}},i.a.createElement(G.f,null))),i.a.createElement("div",{className:"citation-manifestation-options"},i.a.createElement("h4",{onClick:this.toggleAlternativeManifestations},this.state.showAlternativeManifestations?"Hide ":"View "," the same text in an alternative manifestation"),this.state.showAlternativeManifestations&&function(){if(e.props.manifestations)return e.props.manifestations.map(function(t){return i.a.createElement("p",{key:t.manifestation},t.manifestationTitle," : ",i.a.createElement("span",{onClick:function(){e.props.handleFocusChange(t.manifestation)}},t.manifestation))})}()),i.a.createElement("div",null,i.a.createElement("h4",{onClick:this.toggleCitationExplanation},this.state.showCitationExplanation?"Hide ":"View "," explanation of citation practices"),this.state.showCitationExplanation&&i.a.createElement("div",null,i.a.createElement("p",null,"The citation of a text that has survived through a historical succession of manifestations is a complicated endeavor. Today, when transcriptions of these manifestations can be published as data, separate from any presentation, and thereby can be presented in a variety of ways, a full citation inevitably becomes even more complex. In order to identify the content hierarchy of the text, the specifical material or born digital manifestation of that text, and the data sources used to represent and display that manifestation, specificity and precision are needed."),i.a.createElement("p",null,"Full citations therefore identify three aspects of the text currently being viewed."),i.a.createElement("p",{className:"etitle"},"First (blue) it identifies the idea of the paragraph in question situated within the conceptual hierarchy of the text."),i.a.createElement("p",{className:"mtitle"},"Second (red) it identifies the manifestation of the text in a historical or born digital edition."),i.a.createElement("p",{className:"ttitle"},"Third (purple) it identifies the transcription and transcription data source used to power the current text presentation."))))}}]),t}(i.a.Component),ge=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleToggleChildren=n.handleToggleChildren.bind(Object(E.a)(n)),n.state={parts:[],showChildren:!1},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleChildren",value:function(e){e.preventDefault(),this.setState(function(e){return{showChildren:!e.showChildren}})}},{key:"retrieveParts",value:function(e){var t=this;M(function(e){return["SELECT ?part ?title ?level ?order ?structureType ?questionTitle ","{","<"+e+"> <http://purl.org/dc/terms/hasPart> ?part . ","?part <http://purl.org/dc/elements/1.1/title> ?title .","?part <http://scta.info/property/level> ?level .","?part <http://scta.info/property/structureType> ?structureType .","OPTIONAL","{","?part <http://scta.info/property/sectionOrderNumber> ?order .","}","OPTIONAL","{","?part <http://scta.info/property/questionTitle> ?questionTitle .","}","}","ORDER BY ?order"].join("")}(e)).then(function(e){console.log("async test; fired");var n=e.data.results.bindings.map(function(e){return{part:e.part.value,title:e.title.value,level:e.level.value,structureType:e.structureType.value,questionTitle:e.questionTitle?e.questionTitle.value:""}});t.setState({parts:n})})}},{key:"componentDidMount",value:function(){this.retrieveParts(this.props.resourceid),this.props.membersOf&&this.props.membersOf.includes(this.props.resourceid)&&this.setState({showChildren:!0})}},{key:"componentWillReceiveProps",value:function(e){e.resourceid!==this.props.resourceid&&this.retrieveParts(this.props.resourceid),e.resourceid===this.props.resourceid&&e.membersOf===this.props.membersOf||e.membersOf&&e.membersOf.includes(e.resourceid)&&this.setState({showChildren:!0})}},{key:"render",value:function(){var e=this,n=5*this.props.level;return i.a.createElement("div",{id:"outline",style:{paddingLeft:n+"px"}},i.a.createElement("p",{className:this.props.bold},this.props.title,this.props.questionTitle&&i.a.createElement("span",null,": ",this.props.questionTitle),this.state.parts.length>0&&!this.state.showChildren&&i.a.createElement("span",{className:"outlineArrow",onClick:this.handleToggleChildren},i.a.createElement(G.d,null)),this.state.parts.length>0&&this.state.showChildren&&i.a.createElement("span",{className:"outlineArrow",onClick:this.handleToggleChildren},i.a.createElement(G.e,null)),this.props.collectionLink&&i.a.createElement(r.b,{to:"/text?resourceid="+this.props.resourceid+this.props.mtFocus},i.a.createElement(G.j,null))),this.state.showChildren&&e.state.parts.map(function(n){var a="";return e.props.membersOf&&(e.props.membersOf.includes(n.part)||n.part===e.props.focusResourceid)&&(a="bold"),i.a.createElement(t,{bold:a,key:n.part,focusResourceid:e.props.focusResourceid,showChildren:e.state.showChildren,resourceid:n.part,title:n.title,level:n.level,structureType:n.structureType,membersOf:e.props.membersOf,questionTitle:n.questionTitle,mtFocus:e.props.mtFocus,collectionLink:"http://scta.info/resource/structureCollection"!==e.props.structureType||e.props.collectionLink})}))}}]),t}(i.a.Component),Te=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).state={membersOf:[]},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"retrieveMembersOf",value:function(e){var t=this;M(function(e){return["SELECT ?memberOf","{","<"+e+"> <http://scta.info/property/isMemberOf> ?memberOf . ","}"].join("")}(e)).then(function(e){var n=e.data.results.bindings.map(function(e){return e.memberOf.value});t.setState({membersOf:n})})}},{key:"componentDidMount",value:function(){this.retrieveMembersOf(this.props.focusResourceid)}},{key:"componentWillReceiveProps",value:function(e){e.focusResourceid!==this.props.focusResourceid&&this.retrieveMembersOf(e.focusResourceid)}},{key:"render",value:function(){return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement(ge,{key:this.props.resourceid,showChildren:!0,focusResourceid:this.props.focusResourceid,resourceid:this.props.resourceid,title:this.props.title,level:"1",structureType:"http://scta.info/resource/structureCollection",membersOf:this.state.membersOf,mtFocus:this.props.mtFocus,collectionLink:this.props.collectionLink}))}}]),t}(i.a.Component),Ee=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleToggleTextLinesView=n.handleToggleTextLinesView.bind(Object(E.a)(n)),n.handleChangeManifestation=n.handleChangeManifestation.bind(Object(E.a)(n)),n.state={windowLoad:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleTextLinesView",value:function(e){this.props.handleToggleTextLinesView(this.props.windowId,e)}},{key:"handleChangeManifestation",value:function(e){var t=e.split("/resource/")[1].split("/")[1];this.props.handleChangeManifestation(this.props.windowId,t)}},{key:"componentDidMount",value:function(){this.setState({windowLoad:this.props.windowLoad})}},{key:"componentWillReceiveProps",value:function(e){this.setState({windowLoad:e.windowLoad})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.windowType+" "+this.props.windowType+this.props.openWidthHeight},i.a.createElement(ie,{handleTabChange:this.props.handleTabChange,handleClose:this.props.handleClose,handleMinimize:this.props.handleMinimize,handleMaximize:this.props.handleMaximize,handleMiddlize:this.props.handleMiddlize,windowType:this.props.windowType,openWidthHeight:this.props.openWidthHeight,windowId:this.props.windowId,focus:this.props.resourceid,handleSwitchWindow:this.props.handleSwitchWindow,handleDuplicateWindow:this.props.handleDuplicateWindow,altWindowState:this.props.altWindowState,focusSet:!!this.props.info}),i.a.createElement(se,{info:this.props.info,handleBlockFocusChange:this.props.handleBlockFocusChange}),i.a.createElement("div",null,e.props.info&&i.a.createElement("div",null,"textCompare"===e.state.windowLoad&&i.a.createElement(pe,{info:e.props.info,relatedExpressions:e.props.relatedExpressions,hidden:"textCompare"!==e.state.windowLoad}),"info"===e.state.windowLoad&&i.a.createElement(te,{info:e.props.info,relatedExpressions:e.props.relatedExpressions,topLevel:e.props.topLevel,hidden:"info"!==e.state.windowLoad}),"citation"===e.state.windowLoad&&i.a.createElement(xe,{tresourceid:e.props.info.resourceid+e.props.mtFocus,manifestations:e.props.info.manifestations,handleFocusChange:e.props.handleFocusChange,hidden:"citation"!==e.state.windowLoad}),"surface2"===e.state.windowLoad&&i.a.createElement(V,{surfaceid:e.props.surfaceid,lineFocusId:e.props.lineFocusId,topLevel:e.props.topLevel,handleSurfaceFocusChange:e.props.handleSurfaceFocusChange,hidden:"surface2"!==e.state.windowLoad}),"surface3"===e.state.windowLoad&&i.a.createElement(Z,{manifestations:e.props.info.manifestations,focusedManifestation:e.props.defaultManifestationSlug?e.props.resourceid+"/"+e.props.defaultManifestationSlug:e.props.resourceid+"/"+e.props.mtFocus.split("/")[1],annotationsDisplay:e.props.annotationsDisplay,handleToggleTextLinesView:e.handleToggleTextLinesView,handleChangeManifestation:e.handleChangeManifestation,width:"bottomWindow"===e.props.windowType?"1000":"500",hidden:"surface3"!==e.state.windowLoad}),"comments"===e.state.windowLoad&&i.a.createElement(be,{resourceid:e.props.info.resourceid,inbox:e.props.info.inbox,hidden:"comments"!==e.state.windowLoad})),"xml"===e.state.windowLoad&&i.a.createElement(ee,{tresourceid:e.props.info?e.props.info.resourceid+e.props.mtFocus:e.props.itemFocus.expression+e.props.mtFocus,hidden:"xml"!==e.state.windowLoad}),i.a.createElement(Te,{focusResourceid:e.props.info?e.props.info.resourceid:e.props.itemFocus.expression,resourceid:e.props.topLevel,title:e.props.topLevel,hidden:"textOutlineWrapper"!==e.state.windowLoad,mtFocus:e.props.mtFocus}),i.a.createElement(P,{hidden:"search"!==e.state.windowLoad,topLevel:e.props.topLevel,authorId:e.props.info.author})))}}]),t}(i.a.Component),we=n(28),Oe=n.n(we),Ce=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).state={next:"",previous:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({next:e.next,previous:e.previous})}},{key:"render",value:function(){return i.a.createElement(Oe.a,{bg:"light",variant:"light",expand:"lg",fixed:"bottom"},i.a.createElement(Oe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Oe.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(ae.a,null,this.props.previous&&i.a.createElement(r.c,{className:"nav-link",to:"/text?resourceid="+this.props.previous},"Previous"),this.props.next&&i.a.createElement(r.c,{className:"nav-link",to:"/text?resourceid="+this.props.next},"Next"),this.props.next&&i.a.createElement(r.c,{className:"nav-link",to:"/text?resourceid="+this.props.topLevel},"Text Home"))))}}]),t}(i.a.Component),ke=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).retrieveText=n.retrieveText.bind(Object(E.a)(n)),n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"retrieveText",value:function(e,t,n){var a=this;if(e){var i=this.props.doc,s=this.props.topLevel,o=i.split("/master/")[1],r=s.split("/resource/")[1];(function(e,t){return new Promise(function(n,a){Promise.all([F(e),F(t)]).then(function(e){var t=new XSLTProcessor;if(t.importStylesheet(e[1]),e[0]){var i=t.transformToFragment(e[0],document);n(i)}else{var s=new Error("xml document could not be retrieved");a(s)}})})})(i.includes("ipfs")?i:"http://exist.scta.info/exist/apps/scta-app/text/"+r+"/"+o,"/xslt/main_view.xsl").then(function(e){document.getElementById("text").innerHTML="",document.getElementById("text").appendChild(e),j()(".paragraphnumber").click(function(e){e.preventDefault();var t=j()(this).parent("p").attr("id");a.props.setFocus(t),a.props.openWindow("window1")}),n&&A(n,!0),j()(".js-show-folio-image").click(function(e){e.preventDefault();var t=j()(this).attr("data-surfaceid"),n=j()(this).closest(".plaoulparagraph").attr("id");a.props.setFocus(n),a.props.handleSurfaceFocusChange("http://scta.info/resource/"+t),a.props.openWindow("window2","surface2")}),j()(".lbp-line-number").click(function(e){e.preventDefault();var t=j()(this).attr("data-surfaceid"),n=j()(this).attr("data-ln"),i=j()(this).closest(".plaoulparagraph").attr("id");a.props.setFocus(i),a.props.handleSurfaceFocusChange("http://scta.info/resource/"+t),a.props.handleLineFocusChange("http://scta.info/resource/"+t+"/"+n),a.props.openWindow("window2","surface2")}),j()(".appnote, .footnote").click(function(e){e.preventDefault()}),j()(".appnote, .footnote").parent().mouseover(function(e){e.preventDefault();var t=j()(this).children(".appnote, .footnote"),n=j()(t).attr("href"),a=j()(n).html(),i=j()(t).next(".note-display");j()(i).removeClass("hidden"),j()(i).html(a)}),j()(".appnote, .footnote").parent().mouseout(function(e){e.preventDefault(),j()(".note-display").addClass("hidden")}),j()(document).on("click",".js-show-reference-paragraph",function(e){var t=j()(this).attr("data-url");window.location="#/text?resourceid="+t})}).catch(function(e){console.log("something went wrong",e),document.getElementById("text").innerHTML="",document.getElementById("text").innerHTML="<p>Apologies, the document is not able to be loaded at this time</p>"})}}},{key:"componentDidUpdate",value:function(e,t){e.doc!==this.props.doc?this.retrieveText(this.props.doc,this.props.topLevel,this.props.scrollTo):this.props.scrollTo&&A(this.props.scrollTo,!0)}},{key:"componentDidMount",value:function(){this.retrieveText(this.props.doc,this.props.topLevel,this.props.scrollTo)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"text"}))}}]),t}(i.a.Component),Se=n(47),Ie=n.n(Se),Le=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).getVersionHistory=n.getVersionHistory.bind(Object(E.a)(n)),n.handleToggleShowVersions=n.handleToggleShowVersions.bind(Object(E.a)(n)),n.state={versions:[],currentVersion:"",showVersions:!1},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleShowVersions",value:function(){this.setState(function(e){return{showVersions:!e.showVersions}})}},{key:"getVersionHistory",value:function(e){var t,n=this;M(["SELECT ?version ?version_shortId ?order_number ?version_label ?review ?doc","{","{","BIND(<"+(t=e)+"> as ?version) . ","?version <http://scta.info/property/shortId> ?version_shortId .","?version <http://scta.info/property/hasDocument> ?doc . ","?version <http://scta.info/property/versionOrderNumber> ?order_number .","?version <http://scta.info/property/versionLabel> ?version_label .","OPTIONAL {","?version <http://scta.info/property/hasReview> ?review .","}","}","UNION","{","<"+t+"> <http://scta.info/property/hasAncestor> ?version .","?version <http://scta.info/property/shortId> ?version_shortId .","?version <http://scta.info/property/hasDocument> ?doc . ","?version <http://scta.info/property/versionOrderNumber> ?order_number .","?version <http://scta.info/property/versionLabel> ?version_label .","OPTIONAL {","?version <http://scta.info/property/hasReview> ?review .","}","}","UNION","{","<"+t+"> <http://scta.info/property/hasDescendant> ?version .","?version <http://scta.info/property/shortId> ?version_shortId .","?version <http://scta.info/property/hasDocument> ?doc . ","?version <http://scta.info/property/versionOrderNumber> ?order_number .","?version <http://scta.info/property/versionLabel> ?version_label .","OPTIONAL {","?version <http://scta.info/property/hasReview> ?review .","}","}","}","ORDER BY DESC(?order_number)"].join("")).then(function(t){t.data.results.bindings.forEach(function(t,a){var i="https://dll-review-registry.scta.info/api/v1/reviews/?url="+t.doc.value+"?society=MAA";C()(i).then(function(a){var i=a.data,s={};i.length>0&&(s={img_url:i[0]["badge-url"],reviewid:i[0].id,ipfsHash:i[0]["ipfs-hash"],html_link:"https://dll-review-registry.scta.info/reviews/"+i[0].id+".html",rubric_link:i[0]["badge-rubric"],summary:i[0]["review-summary"]}),n.setState(function(n){var a={versionTranscription:t.version?t.version.value:"",versionLabel:t.version_label?t.version_label.value:"",versionOrderNumber:t.order_number?t.order_number.value:"",versionReview:t.review?t.review.value:"",versionDoc:t.doc?t.doc.value:"",versionReviewInfo:s};return{versions:[].concat(Object(Y.a)(n.versions),[a]),currentVersion:e}})})})})}},{key:"componentDidMount",value:function(){this.props.transcriptionid&&this.getVersionHistory(this.props.transcriptionid)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.transcriptionid!==this.props.transcriptionid&&this.setState({versions:[]},function(){t.getVersionHistory(e.transcriptionid)})}},{key:"render",value:function(){var e=this;return function(){if(e.state.versions){if(e.state.versions.length>1)return i.a.createElement(Ie.a,{variant:"info"},i.a.createElement("p",{onClick:e.handleToggleShowVersions},"This Text Has Multiple Indexed Versions"),e.state.showVersions&&e.state.versions.map(function(t){var n=t.versionTranscription===e.state.currentVersion?"currentlyViewing":"";return i.a.createElement("p",{key:t.versionTranscription,className:n},n?i.a.createElement("span",null,t.versionLabel," (Currently Viewing)"):i.a.createElement("span",{className:"lbp-span-link",onClick:function(){e.props.handleFocusChange(t.versionTranscription)}},t.versionLabel),t.versionReviewInfo.html_link&&i.a.createElement("span",null," Peer Reviewed: ",i.a.createElement("a",{href:t.versionReviewInfo.html_link},i.a.createElement("img",{alt:"review",src:t.versionReviewInfo.img_url}))," "),i.a.createElement("span",{className:"small"}," Data Source: ",i.a.createElement("a",{href:t.versionDoc},t.versionDoc)," "))}));if(1===e.state.versions.length){var t=e.state.versions[0];return i.a.createElement(Ie.a,{variant:"info"},i.a.createElement("span",null,"Version: ",t.versionLabel," | Data Source: ",i.a.createElement("a",{href:t.versionDoc},t.versionDoc)," "))}return null}return null}()}}]),t}(i.a.Component),je=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).mount=!1,n.openWindow=n.openWindow.bind(Object(E.a)(n)),n.setFocus=n.setFocus.bind(Object(E.a)(n)),n.setFocus2=n.setFocus2.bind(Object(E.a)(n)),n.handleTabChange=n.handleTabChange.bind(Object(E.a)(n)),n.handleClose=n.handleClose.bind(Object(E.a)(n)),n.handleMinimize=n.handleMinimize.bind(Object(E.a)(n)),n.handleMaximize=n.handleMaximize.bind(Object(E.a)(n)),n.handleMiddlize=n.handleMiddlize.bind(Object(E.a)(n)),n.handleSwitchWindow=n.handleSwitchWindow.bind(Object(E.a)(n)),n.handleDuplicateWindow=n.handleDuplicateWindow.bind(Object(E.a)(n)),n.handleSurfaceFocusChange=n.handleSurfaceFocusChange.bind(Object(E.a)(n)),n.handleLineFocusChange=n.handleLineFocusChange.bind(Object(E.a)(n)),n.handleToggleTextLinesView=n.handleToggleTextLinesView.bind(Object(E.a)(n)),n.handleChangeManifestation=n.handleChangeManifestation.bind(Object(E.a)(n)),n.state={doc:"",focus:"",mtFocus:"",itemFocus:"",surfaceid:"",lineFocusId:"",windows:{window1:{windowId:"window1",open:!1,windowLoad:"info",position:"sideWindow",openWidthHeight:"middle",annotationsDisplay:"paragraph",defaultManifestationSlug:""},window2:{windowId:"window2",open:!1,windowLoad:"info",position:"bottomWindow",openWidthHeight:"middle",annotationsDisplay:"paragraph",defaultManifestationSlug:""}}},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleTextLinesView",value:function(e,t){this.setState(function(n){var a=n.windows;return a[e].annotationsDisplay=t,{windows:a}})}},{key:"handleChangeManifestation",value:function(e,t){this.setState(function(n){var a=n.windows;return a[e].defaultManifestationSlug=t,{windows:a}})}},{key:"openWindow",value:function(e,t){this.state.windows[e].open&&this.state.windows[e].windowLoad===t||this.setState(function(n){var a=n.windows;return a[e].open=!0,t&&(a[e].windowLoad=t),{windows:a}})}},{key:"handleClose",value:function(e){this.setState(function(t){var n=t.windows;return n[e].open=!1,{windows:n}}),A(this.state.blockFocus,!0)}},{key:"handleMinimize",value:function(e){this.setState(function(t){var n=t.windows;return n[e].openWidthHeight="minimum",{windows:n}})}},{key:"handleMaximize",value:function(e){this.setState(function(t){var n=t.windows;return n[e].openWidthHeight="maximum",{windows:n}})}},{key:"handleMiddlize",value:function(e){this.setState(function(t){var n=t.windows;return n[e].openWidthHeight="middle",{windows:n}})}},{key:"handleSwitchWindow",value:function(e,t){this.setState(function(t){var n=t.windows;return"sideWindow"===n[e].position?n[e].position="bottomWindow":"bottomWindow"===n[e].position&&(n[e].position="sideWindow"),{windows:n}})}},{key:"handleDuplicateWindow",value:function(e,t){this.setState(function(t){var n=t.windows,a="window1"===e?"window2":"window1";return"sideWindow"===n[e].position?(n[a].position="bottomWindow",n[a].open=!0):"bottomWindow"===n[e].position&&(n[a].position="sideWindow",n[a].open=!0),{windows:n}})}},{key:"handleTabChange",value:function(e,t){this.setState(function(n){var a=n.windows;return a[t].windowLoad=e,{windows:a}})}},{key:"handleSurfaceFocusChange",value:function(e){this.setState({surfaceid:e})}},{key:"handleLineFocusChange",value:function(e){this.setState({lineFocusId:e})}},{key:"setFocus",value:function(e){var t=e.includes("http")?e+this.state.mtFocus:"http://scta.info/resource/"+e+this.state.mtFocus;this.props.handleUpdateUrlResource(t)}},{key:"setFocus2",value:function(e){this.props.handleUpdateUrlResource(e)}},{key:"retrieveFocusInfo",value:function(e){var t=e.includes("http")?e:"http://scta.info/resource/"+e,n=M(N(t));this.arrangeFocusInfo(n,t)}},{key:"arrangeFocusInfo",value:function(e,t){var n=this;e.then(function(e){var a,i=e.data.results.bindings[0],s=e.data.results.bindings.map(function(e){return{manifestation:e.manifestation.value,manifestationTitle:e.manifestationTitle.value,transcription:e.manifestationCTranscription.value}});M(["SELECT DISTINCT ?isRelatedTo ?label ","WHERE { ","{","<"+(a=t)+"> ?o ?isRelatedTo .","?o a <http://scta.info/resource/textRelation> .","?o <http://www.w3.org/1999/02/22-rdf-syntax-ns#label> ?label . ","?isRelatedTo a <http://scta.info/resource/expression> .","}","UNION","{","<"+a+"> ?o ?p .","?o a <http://scta.info/resource/textRelation> .","?o <http://www.w3.org/1999/02/22-rdf-syntax-ns#label> ?label . ","?p a <http://scta.info/resource/quotation> .","?p <http://scta.info/property/source> ?isRelatedTo .","}","}"].join("")).then(function(e){var a=e.data.results.bindings.map(function(e){return{resourceid:e.isRelatedTo.value,relationLabel:e.label.value}});n.mount&&n.setState({focus:{resourceid:t,title:i.title.value,longTitle:i.longTitle?i.longTitle.value:"",author:i.author?i.author.value:"",authorTitle:i.authorTitle?i.authorTitle.value:"",structureType:i.structureType.value,inbox:i.inbox.value,next:i.next?i.next.value:"",previous:i.previous?i.previous.value:"",cdoc:i.cdoc.value,cxml:i.cxml.value,topLevel:i.topLevelExpression.value,cmanifestation:i.cmanifestation.value,ctranscription:i.ctranscription.value,manifestations:s,relatedExpressions:a}})})})}},{key:"setItemFocus",value:function(e){var t=e.includes("http")?e:"http://scta.info/resource/"+e,n=M(["SELECT DISTINCT ?title ?manifestation ?doc ?xml ?expression ?expressionShortId ?longTitle ?topLevelExpression ?next ?previous ?inbox ?t ","WHERE { ","BIND(<"+t+"> as ?t) . ","?t <http://purl.org/dc/elements/1.1/title> ?title .","?t <http://scta.info/property/isTranscriptionOf> ?manifestation .","?t <http://scta.info/property/hasDocument> ?doc . ","?t <http://scta.info/property/hasXML> ?xml . ","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://scta.info/property/longTitle> ?longTitle .","?expression <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .","OPTIONAL {","?expression <http://scta.info/property/next> ?next .","}","OPTIONAL {","?expression <http://scta.info/property/previous> ?previous .","}","?expression <http://www.w3.org/ns/ldp#inbox> ?inbox . ","}","ORDER BY ?expressionTitle"].join(""));this.arrangeItemFocusInfo(n)}},{key:"arrangeItemFocusInfo",value:function(e){var t=this;e.then(function(e){var n=e.data.results.bindings[0];t.mount&&t.setState({itemFocus:{title:n.title.value,manifestation:n.manifestation.value,expression:n.expression.value,doc:n.doc.value,xml:n.xml.value,next:n.next?n.next.value:"",previous:n.previous?n.previous.value:"",inbox:n.inbox.value,topLevel:n.topLevelExpression.value,transcriptionid:n.t.value}})})}},{key:"componentDidMount",value:function(){this.mount=!0,this.setItemFocus(this.props.transcriptionid);var e=this.props.transcriptionid.split("/resource/")[1].split("/")[1],t=this.props.transcriptionid.split("/resource/")[1].split("/")[2];this.setState({mtFocus:"/"+e+"/"+t}),this.props.blockDivFocus&&this.retrieveFocusInfo(this.props.blockDivFocus)}},{key:"componentWillReceiveProps",value:function(e){if(e.transcriptionid!==this.props.transcriptionid){this.setItemFocus(e.transcriptionid);var t=e.transcriptionid.split("/resource/")[1].split("/")[1],n=e.transcriptionid.split("/resource/")[1].split("/")[2];this.setState(function(e){var a=e.windows;return a.window1.defaultManifestationSlug="",a.window2.defaultManifestationSlug="",{mtFocus:"/"+t+"/"+n,windows:a}})}e.blockDivFocus?e.blockDivFocus!==this.props.blockDivFocus&&this.retrieveFocusInfo(e.blockDivFocus):this.setState({focus:""})}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.itemFocus&&i.a.createElement(Le,{transcriptionid:this.state.itemFocus.transcriptionid,handleFocusChange:this.setFocus2}),i.a.createElement(u.a,{className:function(){var t=!1;return e.state.windows.window1.open&&"sideWindow"===e.state.windows.window1.position&&"middle"===e.state.windows.window1.openWidthHeight?t=!0:e.state.windows.window2.open&&"sideWindow"===e.state.windows.window2.position&&(t=!0),t}()?"lbp-text skinnyText":"lbp-text fullText"},this.state.itemFocus&&i.a.createElement(ke,{doc:this.state.itemFocus.doc,topLevel:this.state.itemFocus.topLevel,setFocus:this.setFocus,handleSurfaceFocusChange:this.handleSurfaceFocusChange,handleLineFocusChange:this.handleLineFocusChange,openWindow:this.openWindow,scrollTo:this.state.focus?this.state.focus.resourceid.split("/resource/")[1]:this.state.itemFocus.expression.split("/resource/")[1]})),i.a.createElement(Ce,{next:this.state.itemFocus&&this.state.itemFocus.next,previous:this.state.itemFocus&&this.state.itemFocus.previous,topLevel:this.state.itemFocus&&this.state.itemFocus.topLevel,handleClose:this.handleClose}),i.a.createElement("div",null,Object.keys(e.state.windows).map(function(t){return e.state.windows[t].open?i.a.createElement(Ee,{key:t,handleClose:e.handleClose,handleMinimize:e.handleMinimize,handleMaximize:e.handleMaximize,handleMiddlize:e.handleMiddlize,handleTabChange:e.handleTabChange,handleBlockFocusChange:e.setFocus,handleFocusChange:e.setFocus2,handleSurfaceFocusChange:e.handleSurfaceFocusChange,handleSwitchWindow:e.handleSwitchWindow,handleDuplicateWindow:e.handleDuplicateWindow,resourceid:e.state.focus?e.state.focus.resourceid:e.props.resourceid,windowType:e.state.windows[t].position,windowId:e.state.windows[t].windowId,windowLoad:e.state.windows[t].windowLoad,openWidthHeight:e.state.windows[t].openWidthHeight,surfaceid:e.state.surfaceid,lineFocusId:e.state.lineFocusId,info:e.state.focus,itemFocus:e.state.itemFocus,topLevel:e.state.itemFocus.topLevel,altWindowState:"window1"===e.state.windows[t].windowId?e.state.windows.window2.open:e.state.windows.window1.open,mtFocus:e.state.mtFocus,handleToggleTextLinesView:e.handleToggleTextLinesView,annotationsDisplay:e.state.windows[t].annotationsDisplay,handleChangeManifestation:e.handleChangeManifestation,defaultManifestationSlug:e.state.windows[t].defaultManifestationSlug}):null})))}}]),t}(i.a.Component),Fe=n(30),Me=n.n(Fe);var Ae=function(e){return e.item?i.a.createElement("tr",null,e.item.author&&i.a.createElement("td",null,i.a.createElement(r.b,{to:"/text?resourceid="+e.item.author},e.item.authorTitle)),i.a.createElement("td",null,i.a.createElement(r.b,{to:"/text?resourceid="+e.item.id},e.item.title)),e.item.questionTitle?i.a.createElement("td",null,i.a.createElement(r.b,{to:"/text?resourceid="+e.item.id},e.item.questionTitle)):i.a.createElement("td",null)):null},Ne=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).retrieveCollectionInfo=n.retrieveCollectionInfo.bind(Object(E.a)(n)),n.makeRequests=n.makeRequests.bind(Object(E.a)(n)),n.handleFilter=n.handleFilter.bind(Object(E.a)(n)),n.filter=i.a.createRef(),n.mount=!1,n.state={items:{},parts:{},filter:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleFilter",value:function(e){var t=e.target.value;this.setState({filter:t})}},{key:"arrangeParts",value:function(e){var t=this,n=this;e.then(function(e){var a=e.data.results.bindings,i={};a.forEach(function(e){var t=e.part.value;i[t]={id:e.part.value,title:e.partTitle.value,type:e.partType.value,questionTitle:e.partQuestionTitle?e.partQuestionTitle.value:null,level:e.partLevel?e.partLevel.value:"unknown"}}),t.mount&&n.setState({parts:i})})}},{key:"arrangeItems",value:function(e){var t=this,n=this;e.then(function(e){var a=e.data.results.bindings,i={};a.forEach(function(e){var t=e.item.value;i[t]={title:e.itemTitle.value,id:e.item.value,type:e.itemType.value,questionTitle:e.itemQuestionTitle?e.itemQuestionTitle.value:null,author:e.itemAuthor?e.itemAuthor.value:null,authorTitle:e.itemAuthorTitle?e.itemAuthorTitle.value:null,next:e.next?e.next.value:null,previous:e.previous?e.previous.value:null,cm:e.cm?e.cm.value:null,cmTitle:e.cmTitle?e.cmTitle.value:null,ct:e.ct?e.ct.value:null,topLevel:e.topLevel?e.topLevel.value:null,doc:e.doc?e.doc.value:null}}),t.mount&&n.setState({items:i})}).catch(function(e){console.log(e)})}},{key:"retrieveWorkGroupInfo",value:function(e){var t=M(["SELECT DISTINCT ?item ?itemTitle ?itemAuthor ?itemAuthorTitle ?itemType ","WHERE { ","<"+e+"> <http://scta.info/property/hasExpression> ?item .","?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?itemType . ","?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .","?item <http://www.loc.gov/loc.terms/relators/AUT> ?itemAuthor .","?itemAuthor <http://purl.org/dc/elements/1.1/title> ?itemAuthorTitle .","}","ORDER BY ?itemAuthorTitle"].join("")),n=M(R(e));this.arrangeParts(n),this.arrangeItems(t)}},{key:"retrieveCollectionInfo",value:function(e,t,n){var a=M(["SELECT DISTINCT ?item ?itemTitle ?topLevel ?itemQuestionTitle ?cm ?cmTitle ?ct ?next ?previous ?itemType ?doc ","WHERE { ","<"+n+"> <http://scta.info/property/hasStructureItem> ?item .","?item <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel .","?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .","?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?itemType . ","OPTIONAL {","?item <http://scta.info/property/questionTitle> ?itemQuestionTitle .","}","OPTIONAL","{","?item <http://scta.info/property/next> ?next .","}","OPTIONAL","{","?item <http://scta.info/property/previous> ?previous .","}","?item <http://scta.info/property/hasCanonicalManifestation> ?cm .","?item <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","?cm <http://purl.org/dc/elements/1.1/title> ?cmTitle .","?cm <http://scta.info/property/hasCanonicalTranscription> ?ct .","?ct <http://scta.info/property/hasDocument> ?doc .","}","ORDER BY ?totalOrderNumber"].join("")),i=M(R(e));this.arrangeParts(i),this.arrangeItems(a)}},{key:"makeRequests",value:function(e,t,n,a){"http://scta.info/resource/workGroup"===a?this.retrieveWorkGroupInfo(e,t,n):"http://scta.info/resource/structureCollection"===t&&this.retrieveCollectionInfo(e,t,n)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){this.mount=!0,this.setState({resourceid:this.props.resourceid}),this.makeRequests(this.props.resourceid,this.props.structureType,this.props.topLevel,this.props.type)}},{key:"componentWillReceiveProps",value:function(e){e.resourceid!==this.props.resourceid&&(this.setState({resourceid:e.resourceid,filter:""}),this.filter&&(this.filter.current.value=""),this.makeRequests(e.resourceid,e.structureType,e.topLevel,e.type))}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=this;return i.a.createElement(u.a,{className:"collectionBody"},i.a.createElement(u.a,{className:"collectionFilter"},i.a.createElement(ve.a,{ref:this.filter,id:"filter",placeholder:"type to filter",onChange:this.handleFilter})),function(){var t=[];Object.keys(e.state.parts).forEach(function(n){e.state.parts[n].title.toLowerCase().includes(e.state.filter.toLowerCase())&&t.push(i.a.createElement(Ae,{key:n,item:e.state.parts[n]}))});var n=e.state.parts[Object.keys(e.state.parts)[0]];if(n&&("http://scta.info/resource/expression"!==n.type||"1"!==n.level))return i.a.createElement(u.a,null,i.a.createElement("h1",null,"Parts"),i.a.createElement("br",null),i.a.createElement(Me.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,t)))}(),function(){var t=[];return Object.keys(e.state.items).forEach(function(n){(e.state.items[n].title+" "+e.state.items[n].authorTitle+" "+e.state.items[n].questionTitle).toLowerCase().includes(e.state.filter.toLowerCase())&&t.push(i.a.createElement(Ae,{key:n,item:e.state.items[n]}))}),i.a.createElement(u.a,null,i.a.createElement("h1",null,"Items"),i.a.createElement("br",null),i.a.createElement(Me.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,t)))}())}}]),t}(i.a.Component),Re=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).retrieveAuthorCollectionInfo=n.retrieveAuthorCollectionInfo.bind(Object(E.a)(n)),n.handleItemFilter=n.handleItemFilter.bind(Object(E.a)(n)),n.itemFilter=i.a.createRef(),n.mount=!1,n.state={authorTitle:"",authorArticles:[],textArticles:[],expressions:[],itemFilter:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleItemFilter",value:function(e){var t=e.target.value;this.setState({itemFilter:t})}},{key:"arrangeItems",value:function(e,t){var n=this;e.then(function(e){var a=e.data["@graph"].filter(function(e){return e["@id"]===t})[0],i=a["http://purl.org/dc/elements/1.1/title"],s=null;Array.isArray(a.authorArticle)?s=a.authorArticle.map(function(t){return{id:t,title:e.data["@graph"].filter(function(e){return e["@id"]===t})[0]["http://purl.org/dc/elements/1.1/title"]}}):a.authorArticle&&(s=[{id:a.authorArticle,title:e.data["@graph"].filter(function(e){return e["@id"]===a.authorArticle})[0]["http://purl.org/dc/elements/1.1/title"]}]);var o=null;Array.isArray(a.textArticle)?o=a.textArticle.map(function(t){return{id:t,title:e.data["@graph"].filter(function(e){return e["@id"]===t})[0]["http://purl.org/dc/elements/1.1/title"]}}):a.textArticle&&(o=[{id:a.textArticle,title:e.data["@graph"].filter(function(e){return e["@id"]===a.textArticle})[0]["http://purl.org/dc/elements/1.1/title"]}]);var r=null;Array.isArray(a.hasTopLevelExpression)?r=a.hasTopLevelExpression.map(function(t){return{id:t,title:e.data["@graph"].filter(function(e){return e["@id"]===t})[0]["http://purl.org/dc/elements/1.1/title"]}}):a.hasTopLevelExpression&&(r=[{id:a.hasTopLevelExpression,title:e.data["@graph"].filter(function(e){return e["@id"]===a.hasTopLevelExpression})[0]["http://purl.org/dc/elements/1.1/title"]}]),n.setState({authorArticles:s,textArticles:o,expressions:r,authorTitle:i})}).catch(function(e){console.log(e)})}},{key:"retrieveAuthorCollectionInfo",value:function(e){var t=M(["CONSTRUCT","{","?author  <http://purl.org/dc/elements/1.1/title> ?authorTitle ;","<http://scta.info/resource/hasTopLevelExpression> ?expression ;","<http://scta.info/property/authorArticle> ?authorArticle;","<http://scta.info/property/textArticle> ?textArticle .","?authorArticle <http://purl.org/dc/elements/1.1/title> ?authorArticleTitle . ","?textArticle <http://purl.org/dc/elements/1.1/title> ?textArticleTitle . ","?expression <http://purl.org/dc/elements/1.1/title> ?topLevelExpressionTitle .","}","WHERE ","{","BIND(<"+e+"> as ?author) . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","OPTIONAL","{","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?expression a <http://scta.info/resource/expression> .","?expression <http://scta.info/property/level> '1' .","?expression <http://purl.org/dc/elements/1.1/title> ?topLevelExpressionTitle .","}","OPTIONAL","{","?expression2 <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?textArticle <http://scta.info/property/isArticleOf> ?expression2 .","?textArticle <http://purl.org/dc/elements/1.1/title> ?textArticleTitle .","}","OPTIONAL","{","?authorArticle <http://scta.info/property/isArticleOf> ?author .","?authorArticle <http://purl.org/dc/elements/1.1/title> ?authorArticleTitle","}","}"].join(""));this.arrangeItems(t,e)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){this.mount=!0,this.retrieveAuthorCollectionInfo(this.props.resourceid)}},{key:"componentWillReceiveProps",value:function(e){this.refs.itemFilter?this.refs.itemFilter.value="":this.retrieveAuthorCollectionInfo(e.resourceid)}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=function(e){return e.map(function(e){return i.a.createElement(Ae,{key:e.id,item:e})})};return i.a.createElement("div",{className:"collectionBody"},i.a.createElement("h1",null,this.state.authorTitle),i.a.createElement("br",null),this.state.expressions&&i.a.createElement(u.a,null,i.a.createElement("h1",null,"Expressions"),i.a.createElement("br",null),i.a.createElement(Me.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,e(this.state.expressions)))),this.state.authorArticles&&i.a.createElement(u.a,null,i.a.createElement("h1",null,"Author Related Articles"),i.a.createElement("br",null),i.a.createElement(Me.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,e(this.state.authorArticles)))),this.state.textArticles&&i.a.createElement(u.a,null,i.a.createElement("h1",null,"Text Related Articles"),i.a.createElement("br",null),i.a.createElement(Me.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,e(this.state.textArticles)))))}}]),t}(i.a.Component);var De=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleToggleRelatedDiscussion=n.handleToggleRelatedDiscussion.bind(Object(E.a)(n)),n.handleSurface3Manifestations=n.handleSurface3Manifestations.bind(Object(E.a)(n)),n.state={expressions:[],surfaceMap:{},showTextRegion:!1},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleSurface3Manifestations",value:function(e,t){var n="";"object"===typeof e?n=e.map(function(e){return{manifestation:e,manifestationTitle:e.split("/resource/")[1],transcription:""}}):e&&(n=[{manifestation:e,manifestationTitle:e.split("/resource/")[1],transcription:""}]),this.setState(function(e){return{showTextRegion:t}}),this.props.handleSurface3Manifestations(n)}},{key:"handleToggleRelatedDiscussion",value:function(e){this.setState(function(t){var n=t.expressions.find(function(t){return t["@id"]===e});return n.showComments=!n.showComments,{expressions:Object(Y.a)(t.expressions)}})}},{key:"handleToggleRelatedSurfaces",value:function(e){this.setState(function(t){var n=t.expressions.find(function(t){return t["@id"]===e});return n.showRelatedSurfaces=!n.showRelatedSurfaces,{expressions:Object(Y.a)(t.expressions)}})}},{key:"retrieveSurfaceInfo",value:function(e){var t=this;M(function(e){return["CONSTRUCT","{","?expression <http://scta.info/property/hasManifestation> ?manifestation2 .","?manifestation2 <http://scta.info/property/isOnSurface> ?surface2 .","}","WHERE","{","?manifestation <http://scta.info/property/isOnSurface> <"+e+"> .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureBlock> .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://scta.info/property/hasManifestation> ?manifestation2 .","?manifestation2 <http://scta.info/property/isOnSurface> ?surface2 .","?codex <http://scta.info/property/hasSurface> ?surface2 .","}"].join("")}(e)).then(function(e){if(e.data["@graph"]){var n=e.data["@graph"],a=n.filter(function(e){return e.hasManifestation?{expressionid:e["@id"],manifestations:e.hasManifestation,showComments:!1,showRelatedSurfaces:!1}:null}),i={};n.forEach(function(e){e.isOnSurface&&(i[e["@id"]]=e.isOnSurface)}),t.setState({expressions:a,surfaceMap:i})}})}},{key:"componentDidMount",value:function(){this.retrieveSurfaceInfo(this.props.surfaceid)}},{key:"componentWillReceiveProps",value:function(e){e.surfaceid!==this.props.surfaceid&&this.retrieveSurfaceInfo(e.surfaceid)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"SurfaceInfo"},i.a.createElement("h1",null,"Surface Info"),i.a.createElement("div",{style:{fontSize:"16px"}},i.a.createElement("h4",null,"Text objects appearing on this page"),e.state.expressions.length>0?e.state.expressions.map(function(t){var n="";return n="object"===typeof t.hasManifestation?t.hasManifestation.map(function(t){return i.a.createElement("div",{key:t},i.a.createElement("span",null,t," ",i.a.createElement(r.b,{to:"/text?resourceid="+t},i.a.createElement(G.j,null))),i.a.createElement("br",null),i.a.createElement("span",{style:{textIndent:"10px"}},"...Appearing on Surface ",e.state.surfaceMap[t]," ",i.a.createElement(r.b,{to:"/text?resourceid="+e.state.surfaceMap[t]},i.a.createElement(G.j,null))),i.a.createElement("br",null),i.a.createElement("br",null))}):t.hasManifestation?i.a.createElement("div",{key:t.hasManifestation},i.a.createElement("span",null,t.hasManifestation," ",i.a.createElement(r.b,{to:"/text?resourceid="+t.hasManifestation},i.a.createElement(G.j,null))),i.a.createElement("br",null),i.a.createElement("span",{style:{textIndent:"10px"}},"...Appearing on Surface ",e.state.surfaceMap[t.hasManifestation]," ",i.a.createElement(r.b,{to:"/text?resourceid="+e.state.surfaceMap[t.hasManifestation]},i.a.createElement(G.j,null))),i.a.createElement("br",null),i.a.createElement("br",null)):[],i.a.createElement("div",{key:t["@id"]},i.a.createElement("hr",null),i.a.createElement("p",null,t["@id"]," ",i.a.createElement(r.b,{to:"/text?resourceid="+t["@id"]},i.a.createElement(G.j,null))),t.showRelatedSurfaces?i.a.createElement("div",null,i.a.createElement(f.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedSurfaces(t["@id"])}},"Hide Related Codices"),i.a.createElement("br",null),e.state.showTextRegion!==t["@id"]?i.a.createElement(f.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){return e.handleSurface3Manifestations(t.hasManifestation,t["@id"])}},"View Focused Text Region"):i.a.createElement(f.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){return e.handleSurface3Manifestations("","")}},"Hide Focused Text Region"),i.a.createElement("br",null),n):i.a.createElement("div",null,i.a.createElement(f.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedSurfaces(t["@id"])}},"Show Related Codices"),i.a.createElement("br",null)),t.showComments?i.a.createElement("div",null,i.a.createElement(f.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedDiscussion(t["@id"])}},"Hide Related Discussions"),i.a.createElement("br",null),i.a.createElement(be,{resourceid:t["@id"],inbox:"http://inbox.scta.info/notifications?resourceid="+t["@id"]})):i.a.createElement("div",null,i.a.createElement(f.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedDiscussion(t["@id"])}},"Show Related Discussions"),i.a.createElement("br",null)))}):null))}}]),t}(i.a.Component),_e=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).retrieveCodexInfo=n.retrieveCodexInfo.bind(Object(E.a)(n)),n.handleSurfaceFocusChange=n.handleSurfaceFocusChange.bind(Object(E.a)(n)),n.handleToggleShowContents=n.handleToggleShowContents.bind(Object(E.a)(n)),n.handleSurface3Manifestations=n.handleSurface3Manifestations.bind(Object(E.a)(n)),n.state={items:{},title:"",focusedSurface:"",relatedCodices:[],showContents:!0,surface3Manifestations:[],surface3FocusedManifestation:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleToggleShowContents",value:function(){this.setState(function(e){return{showContents:!e.showContents}})}},{key:"handleSurface3Manifestations",value:function(e){var t=this.state.focusedSurface.split("/resource/")[1].split("/")[0],n=e?e.filter(function(e){return e.manifestation.includes(t)})[0].manifestation:"";this.setState({surface3Manifestations:e,surface3FocusedManifestation:n})}},{key:"handleSurfaceFocusChange",value:function(e){this.setState({focusedSurface:e})}},{key:"retrieveCodexInfo",value:function(e,t){var n=this;M("surface"===t?["SELECT DISTINCT ?codex ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","?codex <http://scta.info/property/hasSurface> <"+e+"> .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join(""):"canvas"===t?["SELECT DISTINCT ?codex ?surfaceFocus ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","?isurfaceFocus <http://scta.info/property/hasCanvas> <"+e+"> .","?surfaceFocus <http://scta.info/property/hasISurface> ?isurfaceFocus .","?codex <http://scta.info/property/hasSurface> ?surfaceFocus .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join(""):"manifest"===t?["SELECT DISTINCT ?codex ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","?icodex <http://scta.info/property/hasOfficialManifest> <"+e+"> .","?codex <http://scta.info/property/hasCodexItem> ?icodex .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join(""):["SELECT DISTINCT ?codex ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","BIND(<"+e+"> as ?codex) . ","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join("")).then(function(a){var i=a.data.results.bindings;if(i.length>0&&i[0].surface){var s=i.map(function(e){return e.expression?e.expression.value:""}).filter(function(e,t,n){return n.indexOf(e)===t}),o={};s.forEach(function(e){o[e]=[]}),i.forEach(function(e){var t={expression:e.expression.value,expressionTitle:e.item_expression_title.value,manifestation:e.manifestation.value,surface:e.surface.value,surfaceTitle:e.surface_title.value,questionTitle:e.item_expression_question_title?e.item_expression_question_title.value:""};o[e.expression.value].push(t)});var r="";r="surface"===t?e:"canvas"===t?i[0].surfaceFocus.value:i[0].surface.value,n.setState({items:o,focusedSurface:r})}})}},{key:"componentDidMount",value:function(){this.props.surfaceid?this.retrieveCodexInfo(this.props.surfaceid,"surface"):this.props.canvasid?this.retrieveCodexInfo(this.props.canvasid,"canvas"):this.props.manifestid?this.retrieveCodexInfo(this.props.manifestid,"manifest"):this.retrieveCodexInfo(this.props.codexid,"codex")}},{key:"componentWillReceiveProps",value:function(e){e.surfaceid&&e.surfaceid!==this.props.surfaceid?this.retrieveCodexInfo(e.surfaceid,"surface"):e.canvasid&&e.canvasid!==this.props.canvasid?this.retrieveCodexInfo(e.canvasid,"canvas"):e.manifestid&&e.manifestid!==this.props.manifestid?this.retrieveCodexInfo(e.manifest,"manifest"):e.codexid!==this.props.codexid&&this.retrieveCodexInfo(e.codexid,"codex")}},{key:"render",value:function(){var e=this;return i.a.createElement(u.a,{fluid:!0,className:"Codex"},i.a.createElement("h1",null,this.props.codexid),i.a.createElement("div",{className:"codexWrapper"},i.a.createElement("div",{className:"codexContentsWrapper"},i.a.createElement("div",{className:"codexContents"},i.a.createElement("h2",{onClick:this.handleToggleShowContents},this.state.showContents?"Hide Contents":"View Contents"),this.state.showContents&&this.state.items&&Object.keys(e.state.items).map(function(t){return i.a.createElement("p",{key:e.state.items[t][0].expression},i.a.createElement("span",null,i.a.createElement("span",{className:"codexLink",onClick:function(){e.handleSurfaceFocusChange(e.state.items[t][0].surface)}},e.state.items[t][0].surfaceTitle)," - ",i.a.createElement("span",{className:"codexLink",onClick:function(){e.handleSurfaceFocusChange(e.state.items[t][e.state.items[t].length-1].surface)}},e.state.items[t][e.state.items[t].length-1].surfaceTitle)),": ",i.a.createElement(r.b,{to:"/text?resourceid="+e.state.items[t][0].manifestation},e.state.items[t][0].expressionTitle),": ",e.state.items[t][0].questionTitle&&e.state.items[t][0].questionTitle)}))),i.a.createElement("div",{className:"codexImage"},e.state.surface3Manifestations.length>0?i.a.createElement(Z,{manifestations:e.state.surface3Manifestations,focusedManifestation:e.state.surface3FocusedManifestation,annotationsDisplay:"paragraph",width:"500",hidden:!1}):e.state.focusedSurface?i.a.createElement(V,{surfaceid:e.state.focusedSurface,lineFocusId:"",topLevel:e.props.topLevel,handleSurfaceFocusChange:e.handleSurfaceFocusChange,width:"500",annotationsDisplay:!1,hidden:!1}):null),i.a.createElement("div",{className:"surfaceInfo"},this.state.focusedSurface&&i.a.createElement(De,{surfaceid:this.state.focusedSurface,handleSurface3Manifestations:this.handleSurface3Manifestations}))))}}]),t}(i.a.Component),Pe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).handleUpdateUrlResource=n.handleUpdateUrlResource.bind(Object(E.a)(n)),n.state={displayType:"",resourceid:"",itemTranscriptionId:"",blockDivFocus:"",resourceTitle:"",author:""},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleUpdateUrlResource",value:function(e){this.props.history.push({search:"?resourceid="+e})}},{key:"getInfo",value:function(e){var t,n=this;M(["SELECT DISTINCT ?type ?structureType ?level ?topLevel ?itemParent ?resourceTitle ?author ","WHERE { ","<"+(t=e)+"> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?type . ","OPTIONAL {","<"+t+"> <http://www.loc.gov/loc.terms/relators/AUT> ?author .","}","OPTIONAL {","<"+t+"> <http://purl.org/dc/elements/1.1/title> ?resourceTitle .","}","OPTIONAL {","<"+t+"> <http://scta.info/property/structureType> ?structureType . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/level> ?level . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfTopLevelManifestation> ?topLevel . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfTopLevelTransription> ?topLevel . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfStructureItem> ?itemParent . ","}","}"].join("")).then(function(t){var a,i=t.data.results.bindings.length>0?t.data.results.bindings[0]:"",s=i.type?i.type.value:null,o=i.structureType?i.structureType.value:null,r=i.topLevel?i.topLevel.value:e,l=i.itemParent?i.itemParent.value:null,c=i.resourceTitle?i.resourceTitle.value:"",u=i.author?i.author.value:"";if("http://scta.info/resource/person"===s)n.setState({displayType:"person",resourceid:e,structureType:"",topLevel:"",type:s,resourceTitle:c});else if("http://scta.info/resource/codex"===s)n.setState({displayType:"codex",resourceid:e,structureType:"",topLevel:"",type:s,resourceTitle:c});else if("http://scta.info/resource/surface"===s)n.setState({displayType:"surface",resourceid:e,structureType:"",topLevel:"",type:s,resourceTitle:c});else if("http://iiif.io/api/presentation/2#Manifest"===s)n.setState({displayType:"manifest",resourceid:e,structureType:"",topLevel:"",type:s,resourceTitle:c});else if("http://iiif.io/api/presentation/2#Canvas"===s)n.setState({displayType:"canvas",resourceid:e,structureType:"",topLevel:"",type:s,resourceTitle:c});else if("http://scta.info/resource/workGroup"===s)n.setState({displayType:"workGroup",resourceid:e,structureType:o,topLevel:r,type:s,resourceTitle:c});else if("http://scta.info/resource/structureCollection"===o)n.setState({displayType:"collection",resourceid:e,structureType:o,topLevel:r,type:s,resourceTitle:c,author:u});else if("http://scta.info/resource/structureItem"===o){if("http://scta.info/resource/transcription"===s)n.setState({itemTranscriptionId:e,displayType:"item",blockDivFocus:"",resourceTitle:c});else M(["SELECT DISTINCT ?ctranscription ","WHERE { ","{","<"+(a=e)+"> <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation . ","?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","UNION","{","<"+a+"> <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","}"].join("")).then(function(e){n.setState({itemTranscriptionId:e.data.results.bindings[0].ctranscription.value,displayType:"item",blockDivFocus:"",resourceTitle:c})})}else if("http://scta.info/resource/structureBlock"===o||"http://scta.info/resource/structureDivision"===o){M(function(e){return["SELECT DISTINCT ?ctranscription ?blockDivExpression ","WHERE { ","OPTIONAL","{","<"+e+"> <http://scta.info/property/isPartOfStructureItem> ?itemParent . ","{","{","?itemParent <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation . ","?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","UNION","{","?itemParent <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","}","}","OPTIONAL","{","{","{","<"+e+"> <http://scta.info/property/isManifestationOf> ?blockDivExpression . ","}","UNION","{","<"+e+"> <http://scta.info/property/isTranscriptionOf> ?blockDivManifestation . ","?blockDivManifestation <http://scta.info/property/isManifestationOf> ?blockDivExpression . ","}","}","}","}"].join("")}(e)).then(function(t){"http://scta.info/resource/transcription"===s?n.setState({itemTranscriptionId:l,blockDivFocus:t.data.results.bindings[0].blockDivExpression.value,displayType:"item",resourceTitle:c}):"http://scta.info/resource/expression"===s?n.setState({itemTranscriptionId:t.data.results.bindings[0].ctranscription.value,blockDivFocus:e,displayType:"item",resourceTitle:c}):n.setState({itemTranscriptionId:t.data.results.bindings[0].ctranscription.value,blockDivFocus:t.data.results.bindings[0].blockDivExpression.value,displayType:"item",resourceTitle:c})})}else n.setState({displayType:"notFound"})})}},{key:"componentDidMount",value:function(){var e=U.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).resourceid;this.getInfo(e)}},{key:"componentWillReceiveProps",value:function(e){var t=U.a.parse(e.location.search,{ignoreQueryPrefix:!0}).resourceid;this.getInfo(t)}},{key:"render",value:function(){var e=this;return"person"===e.state.displayType?i.a.createElement(Re,{resourceid:e.state.resourceid}):"workGroup"===e.state.displayType?i.a.createElement(Ne,{resourceid:e.state.resourceid,structureType:e.state.structureType,topLevel:e.state.topLevel,type:e.state.type}):"collection"===e.state.displayType?(console.log("this.state.author",e.state.author),i.a.createElement(u.a,{className:"textOutlineContainer"},i.a.createElement(Te,{focusResourceid:e.state.resourceid,resourceid:e.state.resourceid,title:e.state.resourceTitle,hidden:!1,mtFocus:"",collectionLink:!0}))):"item"===e.state.displayType?i.a.createElement(je,{itemid:e.state.resourceid,transcriptionid:e.state.itemTranscriptionId,blockDivFocus:e.state.blockDivFocus,handleUpdateUrlResource:e.handleUpdateUrlResource}):"codex"===e.state.displayType?i.a.createElement(_e,{codexid:e.state.resourceid}):"surface"===e.state.displayType?i.a.createElement(_e,{surfaceid:e.state.resourceid}):"canvas"===e.state.displayType?i.a.createElement(_e,{canvasid:e.state.resourceid}):"manifest"===e.state.displayType?i.a.createElement(_e,{manifestid:e.state.resourceid}):"notFound"===e.state.displayType?i.a.createElement("p",null,"Apologies, this resource could not be found"):null}}]),t}(i.a.Component);var We=function(){return i.a.createElement("div",{className:"About"},i.a.createElement("h1",null,"About"))};var Ue=function(e){return i.a.createElement("p",null,i.a.createElement(r.b,{to:"/text?resourceid="+e.codexid},e.title))},qe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(g.a)(this,Object(T.a)(t).call(this,e))).state={codices:[]},n}return Object(w.a)(t,e),Object(x.a)(t,[{key:"retrieveCodices",value:function(){var e=this;M(["SELECT ?codex ?codex_title","{","?codex a <http://scta.info/resource/codex> .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title","}","ORDER BY ?codex_title"].join("")).then(function(t){var n=e.arrangeCodexInfo(t.data.results.bindings);e.setState({codices:n})})}},{key:"arrangeCodexInfo",value:function(e){return e.map(function(e){return{codexid:e.codex?e.codex.value:"",title:e.codex_title?e.codex_title.value:""}})}},{key:"componentDidMount",value:function(){this.retrieveCodices()}},{key:"render",value:function(){var e=this;return i.a.createElement(u.a,{className:"Codices"},i.a.createElement("h1",null,"Codices"),e.state.codices.map(function(e){return i.a.createElement(Ue,{key:e.id,codexid:e.codexid,title:e.title})}))}}]),t}(i.a.Component);var He=function(){return i.a.createElement(Oe.a,{bg:"dark",variant:"light",expand:"lg",fixed:"top"},i.a.createElement(ae.a,null,i.a.createElement(r.c,{className:"nav-link",to:"/"},"SCTA Reading Room")),i.a.createElement(Oe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Oe.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(ae.a,null,i.a.createElement(r.c,{className:"nav-link",to:"/text?resourceid="+v},"Text"),i.a.createElement(r.c,{className:"nav-link",to:"/search"},"Search")),i.a.createElement(ae.a,null,i.a.createElement(r.c,{className:"nav-link",to:"/about"},"About"),i.a.createElement(r.c,{className:"nav-link",to:"/donate"},"Donate"))))},ze=n(79),Be=n.n(ze),Ve=n(34),Ye=n.n(Ve);var Qe=function(){return i.a.createElement(u.a,{className:"lbp-footer",fluid:!0},i.a.createElement(Be.a,null,i.a.createElement(Ye.a,null,i.a.createElement("p",null,"Designed by ",i.a.createElement("a",{href:"http://jeffreycwitt.com"},"Jeffrey C. Witt"))),i.a.createElement(Ye.a,null,i.a.createElement("p",null,"A ",i.a.createElement("a",{href:"http://lombardpress.org"},"LombardPress")," Publication")),i.a.createElement(Ye.a,null,i.a.createElement("p",null,"Powered by ",i.a.createElement("a",{href:"http://scta.info"},"SCTA")," Data"))))},Xe=(n(172),n(173),function(){return i.a.createElement(r.a,{forceRefresh:!1},i.a.createElement("div",null,i.a.createElement(He,null),i.a.createElement(l.c,null,i.a.createElement(l.a,{path:"/",exact:!0,component:y}),i.a.createElement(l.a,{path:"/text",exact:!0,component:Pe}),i.a.createElement(l.a,{path:"/about",exact:!0,component:We}),i.a.createElement(l.a,{path:"/codices",exact:!0,component:qe}),i.a.createElement(l.a,{path:"/search",exact:!0,render:function(e){return i.a.createElement(P,Object.assign({},e,{hidden:!1}))}})),i.a.createElement(Qe,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(Xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,n){e.exports=n(174)}},[[81,1,2]]]);
//# sourceMappingURL=main.e4c5c63d.chunk.js.map