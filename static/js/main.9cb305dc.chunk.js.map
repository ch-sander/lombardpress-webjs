{"version":3,"sources":["components/config.js","components/Home.js","components/Search.js","components/SearchQuery.js","components/SearchWrapper.js","components/Image.js","components/LineText.js","components/ImageTextWrapper.js","components/utils.js","components/Queries.js","components/Surface2.js","components/Surface3.js","components/Surface3Wrapper.js","components/XmlView.js","components/Info.js","components/WindowNavBar.js","components/NextPrevBar.js","components/TextCompareItem.js","components/TextCompare.js","components/TextCompareWrapper.js","components/CommentItem.js","components/CommentCreate.js","components/Comments.js","components/Citation.js","components/TextOutline.js","components/TextOutlineWrapper.js","components/Window.js","components/TextNavBar.js","components/Text.js","components/VersionChain.js","components/TextWrapper.js","components/Item.js","components/Collection.js","components/AuthorCollection.js","components/TextSwitch.js","components/About.js","components/NavBar.js","components/Footer.js","components/AppRouter.js","serviceWorker.js","index.js"],"names":["sparqlEndpoint","resourceEndpoint","Home","props","react_default","a","createElement","className","Container_default","id","fluid","Jumbotron_default","Button_default","react_router_dom","to","style","color","Search","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","retrieveResults","bind","assertThisInitialized","state","searchResults","count","query","expressionid","Axios","get","then","d","setState","data","results","eid","nextProps","_this2","length","map","r","i","key","pid","dangerouslySetInnerHTML","__html","text","React","Component","SearchQuery","handleQueryUpdate","handleEidUpdate","handleRunSearch","e","preventDefault","target","value","Form_default","onSubmit","FormControl_default","type","placeholder","onChange","variant","SearchWrapper","hidden","components_SearchQuery","topLevel","split","components_Search","Image","newCoords","coords","coordsSplitArray","parseInt","console","log","imageLink","imageUrl","displayWidth","alt","src","LineText","whiteSpace","ImageTextWrapper","searchText","targetLabel","label","components_Image","canvas","canvasShort","components_LineText","loadXMLDoc","filename","xhttp","XMLHttpRequest","open","responseType","err","send","responseXML","runQuery","params","output","scrollToParagraph","hash","highlight","element","$","addClass","removeClass","children","setTimeout","stop","animate","scrollTop","offset","top","basicInfoQuery","itemExpressionUri","join","partsInfoQuery","resourceurl","getSurfaceInfo","surfaceid","Surface2","handleNext","handlePrevious","handleToggleTextLines","currentSurfaceId","manifest","region","width","next","previous","imageurl","annotationsDisplay","handleSurfaceFocusChange","prevState","b","bindings","alUrl","d2","surfaceTitle","next_surface","previous_surface","annotations","resources","catch","error","retrieveSurfaceInfo","_this3","onClick","h","resource","chars","on","components_ImageTextWrapper","surfaceButton","Surface3","surfaces","manifestationid","d1","forEach","z","surface","firstLine","first","lastLine","last","order","newSurface","concat","toConsumableArray","displayImages","fl","flcanvas","flcanvasShort","flcoords","y","ll","llcoords","lly","llh","llbottom","sort","Surface3Wrapper","handleChangeManifestation","handleToggleTextLinesView","manifestations","focusedManifestation","focusedManifestationSlug","view","slug","info","m","manifestation","manifestationTitle","includes","components_Surface3","title","index_esm","XmlView","mount","retrieveXML","xmlstring","xmlurl","cxml","light","language","docco","showLineNumbers","Info","copyToClipboard","string","dummy","document","body","appendChild","select","execCommand","removeChild","newProps","resourceid","inbox","displayInfo","displayManifestations","relatedExpressions","relationLabel","displayRelatedExpressions","WindowNavBar","Nav_default","focusSet","Item","Link","handleTabChange","windowId","openWidthHeight","handleMinimize","handleMiddlize","handleMaximize","handleClose","altWindowState","handleDuplicateWindow","windowType","NextPrevBar","handleBlockFocusChange","TextCompareItem","handleToggleShow","mounted","compareText","rawText","show","base","transcription","dmp","Diff","diff_match_patch","diff","diff_main","diff_cleanupSemantic","ds","diff_prettyHtml","createCompare","compareTranscription","handleChangeBase","ref","TextCompare","handleToggleShowAll","baseText","manifestationCTranscription","structureType","cdoc","topLevelExpression","cmanifestation","ctranscription","arrangeTextInfo","isMainText","getTextInfo","components_TextCompareItem","displayComparisons","TextCompareWrapper","handleCompare","handleToggleCompare","getText","expressions","newExpressions","objectSpread","exObject","keys","components_TextCompare","displayExpressions","CommentItem","n","CommentCreate","handleCommentUpdate","handleSubmitComment","comment","handleSumbitComment","Comments","notifications","annotat","@context","uuidv4","motivation","method","url","config","headers","Content-Type","response","retrieveComments","components_CommentCreate","components_CommentItem","Citation","TextOutline","handleToggleChildren","parts","showChildren","getChildParts","newData","part","level","questionTitle","retrieveParts","membersOf","indent","paddingLeft","bold","mtFocus","p","focusResourceid","TextOutlineWrapper","getMembersOf","memberOf","retrieveMembersOf","components_TextOutline","Window","windowLoad","components_WindowNavBar","focus","handleSwitchWindow","components_NextPrevBar","components_TextCompareWrapper","components_XmlView","components_Info","components_Citation","components_Surface2","components_Surface3Wrapper","components_Comments","components_TextOutlineWrapper","itemFocus","expression","components_SearchWrapper","TextNavBar","Navbar_default","bg","expand","fixed","Toggle","aria-controls","Collapse","Text","retrieveText","doc","scrollTo","docFragment","topLevelFragment","resultDocument","xslurl","xml","xsl","xsltProcessor","XSLTProcessor","importStylesheet","transformToFragment","convertXMLDoc","getElementById","innerHTML","click","parent","attr","setFocus","openWindow","paragraphid","closest","mouseover","link","html","noteDisplay","mouseout","window","location","prevProps","VersionChain","getVersionHistory","handleToggleShowVersions","versions","currentVersion","showVersions","itemInfo","transcriptionUri","transcriptionid","reviewUrl","reviewObject","img_url","reviewid","ipfsHash","html_link","rubric_link","summary","newVersion","versionTranscription","version","versionLabel","version_label","versionOrderNumber","order_number","versionReview","review","versionDoc","versionReviewInfo","_this4","Alert_default","v","currentlyViewing","href","class","displayAlert","TextWrapper","windows","window1","position","window2","blockFocus","altWindowId","fullid","handleUpdateUrlResource","arrangeFocusInfo","isRelatedTo","arrangeItemFocusInfo","itemFocusInfo","t","setItemFocus","mFocus","tFocus","blockDivFocus","retrieveFocusInfo","components_VersionChain","aSideWindowOpen","textClass","components_Text","components_TextNavBar","components_Window","item","author","authorTitle","Collection","retrieveCollectionInfo","makeRequests","handleFilter","filter","createRef","items","partsPromise","partsObject","pId","partTitle","partType","partQuestionTitle","partLevel","itemsPromise","itemsObject","itemId","itemTitle","itemType","itemQuestionTitle","itemAuthor","itemAuthorTitle","cm","cmTitle","ct","expressionsInfo","partsInfo","arrangeParts","arrangeItems","collectionInfo","newResourceId","retrieveWorkGroupInfo","current","questions","toLowerCase","push","components_Item","testPart","Table_default","striped","bordered","hover","size","displayParts","displayQuestions","AuthorCollection","retrieveAuthorCollectionInfo","handleItemFilter","itemFilter","authorArticles","textArticles","Array","isArray","authorArticle","autherArticle","textArticle","hasTopLevelExpression","authorid","authorCollectionInfo","refs","displayItems","list","TextSwitch","displayType","itemTranscriptionId","history","search","itemParent","getItemTranscriptionFromBlockDiv","blockDivExpression","Qs","parse","ignoreQueryPrefix","getInfo","components_AuthorCollection","components_Collection","components_TextWrapper","itemid","About","NavBar","Footer","Row_default","Col_default","AppRouter","forceRefresh","components_NavBar","react_router","path","exact","component","render","assign","components_Footer","Boolean","hostname","match","ReactDOM","components_AppRouter","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9cb305dc.chunk.js","sourcesContent":["export const sparqlEndpoint = \"http://localhost:3030/ds/query\"\n//export const sparqlEndpoint = \"https://sparql-docker.scta.info/ds/query\"\n\nexport const resourceEndpoint = \"http://scta.info/resource/scta\"\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Button from 'react-bootstrap/Button';\nimport {Link} from 'react-router-dom';\nimport {resourceEndpoint} from './config';\n\n\n\nfunction Home(props) {\n  //const resourceid = props.location ? Qs.parse(props.location.search, { ignoreQueryPrefix: true }).resourceid : null;\n  const displayBody = () => {\n    // if (resourceid){\n    //   return <Text resourceid={props.location.search.resourceid}/>\n    // }\n    // else\n    return (\n      <div className=\"Home\">\n        <Container id=\"lbp-home\" fluid>\n            <Container>\n              <Jumbotron id=\"lbp-jumbo\">\n              \t<h1>The SCTA Reading Room</h1>\n              \t<p>A site for reading, viewing, and studying the scholastic tradition</p>\n                <Button><Link className=\"nav-link\" to={\"/text?resourceid=\" + resourceEndpoint} style={{color: \"black\"}}>Enter</Link></Button>\n              </Jumbotron>\n            </Container>\n          </Container>\n          </div>\n    )\n  }\n  return (\n    displayBody()\n  )\n}\n\nexport default Home;\n","import React from 'react';\nimport Axios from 'axios'\nimport {Link} from 'react-router-dom';\n\nclass Search extends React.Component {\n  constructor(props){\n    super(props)\n    this.retrieveResults = this.retrieveResults.bind(this)\n    this.state = {\n      searchResults: [],\n      count: \"\"\n    }\n  }\n  retrieveResults(query, expressionid){\n    const _this = this\n    Axios.get(\"http://exist.scta.info/exist/apps/scta-app/jsonsearch/json-search-text-by-expressionid.xq?query=\" + query + \"&expressionid=\" + expressionid)\n      .then((d) => {\n            _this.setState({searchResults: d.data.results, count: d.data.count})\n          })\n  }\n  componentDidMount(){\n    // const query = Qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).query\n    // const eid = Qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).eid\n    const query = this.props.query\n    const eid =  this.props.eid\n\n    this.retrieveResults(query, eid)\n  }\n  componentWillReceiveProps(nextProps){\n    const query = nextProps.query\n    const eid =  nextProps.eid\n    this.retrieveResults(query, eid)\n  }\n  render(){\n    const displayResults = () => {\n      if (!this.state.searchResults){\n        return (<div>\n          <p>No results found</p>\n        </div>)\n      }\n      else if (this.state.searchResults.length > 1){\n        const results = this.state.searchResults.map((r, i) => {\n          return (\n            <div key={i}>\n            <p><Link to={\"/text?resourceid=http://scta.info/resource/\" + r.pid}>{r.pid}</Link></p>\n            <p dangerouslySetInnerHTML={{ __html: r.text}}/>\n            </div>\n          )\n\n        })\n      return results\n    }\n    else if (this.state.searchResults){\n      return (\n        <div key={this.state.searchResults.pid}>\n        <p><Link to={\"/text?resourceid=http://scta.info/resource/\" + this.state.searchResults.pid}>{this.state.searchResults.pid}</Link></p>\n        <p dangerouslySetInnerHTML={{ __html: this.state.searchResults.text}}/>\n        </div>\n      )\n    }\n    else{\n      return (\n        <div><p>No results</p></div>\n      )\n    }\n  }\n  return (\n    <div>\n    {displayResults()}\n    </div>\n\n\n  );\n  }\n}\n\nexport default Search;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\n\nclass SearchQuery extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleQueryUpdate = this.handleQueryUpdate.bind(this)\n    this.handleEidUpdate = this.handleEidUpdate.bind(this)\n    this.handleRunSearch = this.handleRunSearch.bind(this)\n    this.state = {\n      query: \"\",\n      eid: \"\",\n    }\n  }\n  handleQueryUpdate(e){\n    e.preventDefault()\n\n    this.setState({query: e.target.value})\n\n  }\n  handleEidUpdate(e){\n    e.preventDefault()\n    this.setState({eid: e.target.value})\n\n  }\n  handleRunSearch(e){\n    e.preventDefault()\n    this.props.handleRunSearch(this.state.query, this.state.eid)\n  }\n  componentDidMount(){\n    this.props.eid && this.setState({eid: this.props.eid})\n  }\n  componentWillReceiveProps(nextProps){\n    nextProps.eid && this.setState({eid: nextProps.eid})\n  }\n  render(){\n    return (\n      <div>\n       <Form onSubmit={this.handleRunSearch}>\n        <FormControl type=\"text\" id=\"query\" placeholder=\"query\" className=\"mr-sm-2\" onChange={this.handleQueryUpdate} />\n        {!this.props.eid &&<FormControl type=\"text\" id=\"eid\" placeholder=\"eid\" className=\"mr-sm-2\" onChange={this.handleEidUpdate} />}\n        <Button type=\"submit\" variant=\"outline-success\">Search</Button>\n      </Form>\n\n      </div>\n    )\n  }\n}\n\nexport default SearchQuery;\n","import React from 'react';\nimport Search from \"./Search\"\nimport SearchQuery from \"./SearchQuery\"\n\nclass SearchWrapper extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleRunSearch = this.handleRunSearch.bind(this)\n    this.state = {\n      query: \"\",\n      eid: \"\",\n    }\n  }\n  handleRunSearch(query, eid){\n    this.setState({query: query, eid: eid})\n  }\n  componentDidMount(){\n\n  }\n  componentWillReceiveProps(){\n\n  }\n  render(){\n    return (\n      <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n        <h1>Search</h1>\n        <SearchQuery handleRunSearch={this.handleRunSearch} eid={this.props.topLevel.split(\"/resource/\")[1]}/>\n        {this.state.query && <Search query={this.state.query} eid={this.state.eid}/>}\n      </div>\n    )\n  }\n}\n\nexport default SearchWrapper;\n","import React from 'react';\n\nfunction Image(props) {\n  let newCoords = \"\"\n  if (props.coords){\n    const coordsSplitArray = props.coords.split(\",\")\n    const x = parseInt(coordsSplitArray[0]) - 20\n    const y = coordsSplitArray[1]\n    const w = parseInt(coordsSplitArray[2]) + 40\n    const h = coordsSplitArray[3]\n    newCoords = x + \",\" + y + \",\" + w + \",\" + h\n    console.log(newCoords)\n  }\n\n  const imageLink = props.imageUrl + \"/\" + newCoords + \"/\" + props.displayWidth + \",/0/default.jpg\"\n  return (\n    <img alt=\"manuscript\" src={imageLink}/>\n  );\n}\n\nexport default Image;\n","import React from 'react';\n\nfunction LineText(props) {\n  return (\n    <div className=\"text\" style={{\"whiteSpace\": \"nowrap\"}}>\n     <span dangerouslySetInnerHTML={{__html: props.text}} />\n    </div>\n  );\n}\n\nexport default LineText;\n","// Note this component is a near duplicate of Image Text Wrapper in Paleographinator\n// TODO: This shoud be the target for a refactored independent React Component\n\nimport React, { Component } from 'react';\nimport Image from './Image';\nimport LineText from './LineText';\n\nclass ImageTextWrapper extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\"\n    }\n  }\n  render() {\n    // const getClass = () => {\n    //   if (this.props.targetLabel === this.props.label){\n    //     return \"ImageTextWrapper target\"\n    //   }\n    //   else {\n    //     return \"ImageTextWrapper\"\n    //   }\n    // }\n    return (\n      <div className={this.props.targetLabel === this.props.label ? \"ImageTextWrapper target\" : \"ImageTextWrapper\"}>\n        <div className=\"labelImageWrapper\">\n\n        <Image\n          imageUrl={this.props.imageUrl}\n          canvas={this.props.canvas}\n          coords={this.props.coords}\n          canvasShort={this.props.canvasShort}\n          displayWidth={this.props.displayWidth}\n          />\n        </div>\n        <LineText text={this.props.text}/>\n      </div>\n    );\n  }\n}\n\nexport default ImageTextWrapper;\n","import Axios from 'axios'\nimport {sparqlEndpoint} from './config';\nimport $ from 'jquery';\n\nexport function loadXMLDoc(filename)\n  {\n    const xhttp = new XMLHttpRequest();\n    xhttp.open(\"GET\", filename, false);\n    try {xhttp.responseType = \"msxml-document\"} catch(err) {} // Helping IE11\n    xhttp.send(\"\");\n    return xhttp.responseXML;\n  }\n\nexport function convertXMLDoc(xmlurl, xslurl){\n  const xml = loadXMLDoc(xmlurl)\n  const xsl = loadXMLDoc(xslurl)\n  const xsltProcessor = new XSLTProcessor();\n  xsltProcessor.importStylesheet(xsl);\n  const resultDocument = xsltProcessor.transformToFragment(xml, document);\n  return resultDocument;\n}\n\nexport function nsResolver(prefix) {\n    if(prefix === \"tei\") {\n      return 'http://www.tei-c.org/ns/1.0'\n    }\n}\n\n\n\nexport function runQuery(query){\n  //const sparqlEndpoint = \"https://sparql-docker.scta.info/ds/query\"\n  //const sparqlEndpoint = sparqlEndpoint\n  const queryPromise = Axios.get(sparqlEndpoint, { params: { \"query\": query, \"output\": \"json\" } })\n  return queryPromise\n}\n\n//handles scroll to paragraph procedure\nexport function scrollToParagraph(hash, highlight){\n    const element = $(\"#\" + hash);\n\n    // TODO: highlighting is NOT working\n    if (highlight){\n      element.addClass(\"highlightNone\");\n      $(\".paragraphnumber\").removeClass(\"highlight2\")\n      $(\".plaoulparagraph\").removeClass(\"highlightNone\")\n      $(\".plaoulparagraph\").removeClass(\"highlight\")\n      element.children(\".paragraphnumber\").addClass(\"highlight2\")\n      element.addClass( \"highlight\");\n      setTimeout(function(){\n        element.addClass(\"highlightNone\");\n    }, 2000);\n\n    }\n  \tif (element.length > 0) {\n  \t    $('html, body')\n              .stop()\n              .animate({\n                  scrollTop: element.offset().top - 100\n              }, 1000);\n     }\n\n  }\n","//note; each query here represents an attempt an efficient single request for related information\n//each query therefore could be tranformed into a restful api\n\n\n export function getRelatedExpressions(itemExpressionUri){\n   const query = [\n     \"SELECT DISTINCT ?isRelatedTo ?label \",\n     \"WHERE { \",\n     \"{\",\n     \"<\" + itemExpressionUri + \"> ?o ?isRelatedTo .\",\n     \"?o a <http://scta.info/resource/textRelation> .\",\n     \"?o <http://www.w3.org/1999/02/22-rdf-syntax-ns#label> ?label . \",\n     \"?isRelatedTo a <http://scta.info/resource/expression> .\",\n     \"}\",\n     \"UNION\",\n     \"{\",\n     \"<\" + itemExpressionUri + \"> ?o ?p .\",\n     \"?o a <http://scta.info/resource/textRelation> .\",\n     \"?o <http://www.w3.org/1999/02/22-rdf-syntax-ns#label> ?label . \",\n     \"?p a <http://scta.info/resource/quotation> .\",\n     \"?p <http://scta.info/property/source> ?isRelatedTo .\",\n     \"}\",\n     \"}\"\n   ].join('');\n     return query\n }\n//get Related Expressions\n// export function getRelatedExpressions(itemExpressionUri){\n//   const query = [\n//     \"SELECT DISTINCT ?isRelatedTo \",\n//     \"WHERE { \",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/isRelatedTo> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/quotes> ?quote .\",\n//     \"?quote a <http://scta.info/resource/quotation> .\",\n//     \"?quote <http://scta.info/property/source> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/quotes> ?quote .\",\n//     \"?quote a <http://scta.info/resource/expression> .\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/quotes> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/quotedBy> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/abbreviates> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/abbreviatedBy> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/references> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/referencedBy> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/copies> ?isRelatedTo .\",\n//     \"}\",\n//     \"UNION\",\n//     \"{\",\n//     \"<\" + itemExpressionUri + \"> <http://scta.info/property/isCopiedBy> ?isRelatedTo .\",\n//     \"}\",\n//     \"}\"\n//   ].join('');\n//\n//     return query\n// }\n\n// query info block, division, or item (possible also collection)\nexport function basicInfoQuery(itemExpressionUri){\n  const query = [\n    \"SELECT DISTINCT ?title ?structureType ?cmanifestation ?cmanifestationTitle ?manifestation ?manifestationTitle ?ctranscription ?manifestationCTranscription ?cdoc ?cxml ?expressionShortId ?longTitle ?topLevelExpression ?next ?previous ?inbox \",\n    \"WHERE { \",\n    \"<\" + itemExpressionUri + \"> <http://purl.org/dc/elements/1.1/title> ?title .\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/structureType> ?structureType .\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation .\",\n    \"?cmanifestation <http://purl.org/dc/elements/1.1/title> ?cmanifestationTitle .\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/hasManifestation> ?manifestation .\",\n    \"?manifestation <http://purl.org/dc/elements/1.1/title> ?manifestationTitle .\",\n    \"?manifestation <http://scta.info/property/hasCanonicalTranscription> ?manifestationCTranscription .\",\n    \"?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription .\",\n    \"?ctranscription <http://scta.info/property/hasDocument> ?cdoc . \",\n    \"?ctranscription <http://scta.info/property/hasXML> ?cxml . \",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/shortId> ?expressionShortId .\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/longTitle> ?longTitle .\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .\",\n    \"OPTIONAL {\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/next> ?next .\",\n    \"}\",\n    \"OPTIONAL {\",\n    \"<\" + itemExpressionUri + \"> <http://scta.info/property/previous> ?previous .\",\n    \"}\",\n    \"<\" + itemExpressionUri + \"> <http://www.w3.org/ns/ldp#inbox> ?inbox . \",\n    \"}\",\n    \"ORDER BY ?title\"].join('');\n\n    return query\n  }\n\n  export function itemTranscriptionInfoQuery(itemTranscriptionUri){\n    const query = [\n      \"SELECT DISTINCT ?title ?manifestation ?doc ?xml ?expression ?expressionShortId ?longTitle ?topLevelExpression ?next ?previous ?inbox ?t \",\n      \"WHERE { \",\n      \"BIND(<\" + itemTranscriptionUri + \"> as ?t) . \",\n      \"?t <http://purl.org/dc/elements/1.1/title> ?title .\",\n      \"?t <http://scta.info/property/isTranscriptionOf> ?manifestation .\",\n      \"?t <http://scta.info/property/hasDocument> ?doc . \",\n      \"?t <http://scta.info/property/hasXML> ?xml . \",\n      \"?manifestation <http://scta.info/property/isManifestationOf> ?expression .\",\n      \"?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .\",\n      \"?expression <http://scta.info/property/shortId> ?expressionShortId .\",\n      \"?expression <http://scta.info/property/longTitle> ?longTitle .\",\n      \"?expression <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .\",\n      \"OPTIONAL {\",\n      \"?expression <http://scta.info/property/next> ?next .\",\n      \"}\",\n      \"OPTIONAL {\",\n      \"?expression <http://scta.info/property/previous> ?previous .\",\n      \"}\",\n      \"?expression <http://www.w3.org/ns/ldp#inbox> ?inbox . \",\n      \"}\",\n      \"ORDER BY ?expressionTitle\"].join('');\n\n      return query\n    }\n  // gets all structure items with basic item information\n  export function basicStructureAllItemsInfoQuery(topLevelExpressionUrl){\n    const query = [\n      \"SELECT DISTINCT ?item ?itemTitle ?topLevel ?itemQuestionTitle ?cm ?cmTitle ?ct ?next ?previous ?itemType ?doc \",\n      \"WHERE { \",\n      \"<\" + topLevelExpressionUrl + \"> <http://scta.info/property/hasStructureItem> ?item .\",\n      \"?item <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel .\",\n      \"?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .\",\n      \"?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?itemType . \",\n      \"OPTIONAL {\",\n      \"?item <http://scta.info/property/questionTitle> ?itemQuestionTitle .\",\n      \"}\",\n      \"OPTIONAL\",\n      \"{\",\n      \"?item <http://scta.info/property/next> ?next .\",\n      \"}\",\n      \"OPTIONAL\",\n      \"{\",\n      \"?item <http://scta.info/property/previous> ?previous .\",\n      \"}\",\n      \"?item <http://scta.info/property/hasCanonicalManifestation> ?cm .\",\n      \"?item <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .\",\n      \"?cm <http://purl.org/dc/elements/1.1/title> ?cmTitle .\",\n      \"?cm <http://scta.info/property/hasCanonicalTranscription> ?ct .\",\n      \"?ct <http://scta.info/property/hasDocument> ?doc .\",\n      \"}\",\n      \"ORDER BY ?totalOrderNumber\"].join('');\n      return query\n    }\n    // gets all parts\n    export function partsInfoQuery(resourceurl){\n      const query = [\n        \"SELECT DISTINCT ?part ?partTitle ?partQuestionTitle ?partType ?partLevel \",\n        \"WHERE { \",\n        \"<\" + resourceurl + \"> <http://purl.org/dc/terms/hasPart> ?part .\",\n        \"?part <http://purl.org/dc/elements/1.1/title> ?partTitle .\",\n        \"?part <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?partType . \",\n        \"OPTIONAL {\",\n        \"?part <http://scta.info/property/questionTitle> ?partQuestionTitle .\",\n        \"}\",\n        \"OPTIONAL {\",\n        \"?part <http://scta.info/property/level> ?partLevel .\",\n        \"}\",\n        \"OPTIONAL {\",\n        \"?part <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .\",\n        \"}\",\n        \"}\",\n        \"ORDER BY ?totalOrderNumber\"].join('');\n        return query\n      }\n    // gets all expressions for work Group\n    export function workGroupExpressionQuery(resourceurl){\n      const query = [\n        \"SELECT DISTINCT ?item ?itemTitle ?itemAuthor ?itemAuthorTitle ?itemType \",\n        \"WHERE { \",\n        \"<\" + resourceurl + \"> <http://scta.info/property/hasExpression> ?item .\",\n        \"?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?itemType . \",\n        \"?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .\",\n        \"?item <http://www.loc.gov/loc.terms/relators/AUT> ?itemAuthor .\",\n        \"?itemAuthor <http://purl.org/dc/elements/1.1/title> ?itemAuthorTitle .\",\n        \"}\",\n        \"ORDER BY ?itemAuthorTitle\"].join('');\n        return query\n      }\n\n  export function getItemTranscription(resourceurl){\n    const query = [\n      \"SELECT DISTINCT ?ctranscription \",\n      \"WHERE { \",\n        \"{\",\n          \"<\" + resourceurl + \"> <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation . \",\n          \"?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . \",\n        \"}\",\n        \"UNION\",\n        \"{\",\n          \"<\" + resourceurl + \"> <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . \",\n        \"}\",\n      \"}\"].join('');\n      return query\n  }\n  export function getItemTranscriptionFromBlockDiv(resourceurl){\n    const query = [\n      \"SELECT DISTINCT ?ctranscription ?blockDivExpression \",\n      \"WHERE { \",\n        \"OPTIONAL\",\n        \"{\",\n        \"<\" + resourceurl + \"> <http://scta.info/property/isPartOfStructureItem> ?itemParent . \",\n        \"{\",\n          \"{\",\n            \"?itemParent <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation . \",\n            \"?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . \",\n          \"}\",\n          \"UNION\",\n          \"{\",\n            \"?itemParent <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . \",\n          \"}\",\n        \"}\",\n        \"}\",\n        \"OPTIONAL\",\n        \"{\",\n        \"{\",\n          \"{\",\n            \"<\" + resourceurl + \"> <http://scta.info/property/isManifestationOf> ?blockDivExpression . \",\n          \"}\",\n          \"UNION\",\n          \"{\",\n            \"<\" + resourceurl + \"> <http://scta.info/property/isTranscriptionOf> ?blockDivManifestation . \",\n            \"?blockDivManifestation <http://scta.info/property/isManifestationOf> ?blockDivExpression . \",\n          \"}\",\n        \"}\",\n        \"}\",\n      \"}\"].join('');\n      return query\n  }\n  //TODO rename to getType\n  export function getStructureType(resourceurl){\n    const query = [\n      \"SELECT DISTINCT ?type ?structureType ?level ?topLevel ?itemParent \",\n      \"WHERE { \",\n      \"<\" + resourceurl + \"> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?type . \",\n      \"OPTIONAL {\",\n      \"<\" + resourceurl + \"> <http://scta.info/property/structureType> ?structureType . \",\n      \"}\",\n      \"OPTIONAL {\",\n      \"<\" + resourceurl + \"> <http://scta.info/property/level> ?level . \",\n      \"}\",\n      \"OPTIONAL {\",\n      \"<\" + resourceurl + \"> <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel . \",\n      \"}\",\n      \"OPTIONAL {\",\n      \"<\" + resourceurl + \"> <http://scta.info/property/isPartOfTopLevelManifestation> ?topLevel . \",\n      \"}\",\n      \"OPTIONAL {\",\n      \"<\" + resourceurl + \"> <http://scta.info/property/isPartOfTopLevelTransription> ?topLevel . \",\n      \"}\",\n      \"OPTIONAL {\",\n      \"<\" + resourceurl + \"> <http://scta.info/property/isPartOfStructureItem> ?itemParent . \",\n      \"}\",\n      \"}\"].join('');\n      return query\n    }\n  //surface id query, gets canvas and manifestation\n  export function getSurfaceInfo(surfaceid){\n    const query = [\n      \"SELECT DISTINCT ?surfaceTitle ?isurface ?isurfaceTitle ?icodexTitle ?canvas ?imageurl ?next_surface ?previous_surface \",\n        \"{\",\n  \t\t\t\t\"<\" + surfaceid + \"> <http://purl.org/dc/elements/1.1/title> ?surfaceTitle .\",\n  \t\t\t\t\"<\" + surfaceid + \"> <http://scta.info/property/hasISurface> ?isurface .\",\n  \t\t\t\t\"OPTIONAL {\",\n  \t\t\t\t\t\"<\" + surfaceid + \"> <http://scta.info/property/next> ?next_surface .\",\n  \t\t\t\t\"}\",\n  \t\t\t\t\"OPTIONAL {\",\n  \t\t\t\t\t\"<\" + surfaceid + \"> <http://scta.info/property/previous> ?previous_surface .\",\n          \"}\",\n  \t\t\t\t\"OPTIONAL {\",\n  \t\t\t\t\t\"?isurface <http://purl.org/dc/elements/1.1/title> ?isurfaceTitle .\",\n  \t\t\t\t\t\"?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .\",\n  \t\t\t\t\t\"?icodex <http://purl.org/dc/elements/1.1/title> ?icodexTitle .\",\n  \t\t\t\t\"}\",\n  \t\t\t\t\"?isurface <http://scta.info/property/hasCanvas> ?canvas .\",\n  \t\t\t\t\"OPTIONAL{\",\n  \t\t\t\t\t\"?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?blank .\",\n  \t\t\t\t\"}\",\n  \t\t\t\t\"OPTIONAL{\",\n  \t\t\t\t\"?canvas <http://www.w3.org/2003/12/exif/ns#height> ?c_height .\",\n          \"}\",\n  \t\t     \"?blank <http://www.w3.org/1999/02/22-rdf-syntax-ns#first> ?o .\",\n  \t\t     \"?o <http://www.w3.org/ns/oa#hasBody> ?o2 .\",\n  \t\t    \"OPTIONAL{\",\n  \t\t\t\t\t \"?o2 <http://rdfs.org/sioc/services#has_service> ?imageurl .\",\n  \t\t\t\t \"}\",\n  \t\t\t\t \"OPTIONAL{\",\n  \t\t\t\t\t \"?o2 <http://www.shared-canvas.org/ns/hasRelatedService> ?imageurl .\",\n  \t\t\t\t \"}\",\n        \"}\"].join('');\n\n      return query\n    }\n\n//surface id query, gets canvas and manifestation\nexport function getAuthorInformation(authorid){\n    const query = [\n      \"CONSTRUCT\",\n      \"{\",\n      \"?author  <http://purl.org/dc/elements/1.1/title> ?authorTitle ;\",\n      \"<http://scta.info/resource/hasTopLevelExpression> ?expression ;\",\n      \"<http://scta.info/property/authorArticle> ?authorArticle;\",\n      \"<http://scta.info/property/textArticle> ?textArticle .\",\n    \t\"?authorArticle <http://purl.org/dc/elements/1.1/title> ?authorArticleTitle . \",\n      \"?textArticle <http://purl.org/dc/elements/1.1/title> ?textArticleTitle . \",\n    \t\"?expression <http://purl.org/dc/elements/1.1/title> ?topLevelExpressionTitle .\",\n      \"}\",\n      \"WHERE \",\n      \"{\",\n      \"<\" + authorid + \"> <http://purl.org/dc/elements/1.1/title> ?authorTitle .\",\n      \"BIND(<\" + authorid + \"> as ?author) . \",\n      \"?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author .\",\n      \"?expression a <http://scta.info/resource/expression> .\",\n      \"?expression <http://scta.info/property/level> '1' .\",\n      \"?expression <http://purl.org/dc/elements/1.1/title> ?topLevelExpressionTitle .\",\n      \"?expression2 <http://www.loc.gov/loc.terms/relators/AUT> ?author .\",\n      \"?textArticle <http://scta.info/property/isArticleOf> ?expression2 .\",\n      \"?textArticle <http://purl.org/dc/elements/1.1/title> ?textArticleTitle .\",\n      \"?authorArticle <http://scta.info/property/isArticleOf> ?author .\",\n      \"?authorArticle <http://purl.org/dc/elements/1.1/title> ?authorArticleTitle\",\n      \"}\"].join('');\n      return query\n      }\n\n  export function versionHistoryInfo(transcriptionUri){\n     \t \tconst query = [\n     \t \t\t\"SELECT ?version ?version_shortId ?order_number ?version_label ?review ?doc\",\n     \t    \"{\",\n            \"{\",\n               \"BIND(<\" + transcriptionUri + \"> as ?version) . \",\n     \t         \"?version <http://scta.info/property/shortId> ?version_shortId .\",\n               \"?version <http://scta.info/property/hasDocument> ?doc . \",\n     \t         \"?version <http://scta.info/property/versionOrderNumber> ?order_number .\",\n     \t\t\t\t\t \"?version <http://scta.info/property/versionLabel> ?version_label .\",\n     \t\t\t\t\t \"OPTIONAL {\",\n     \t\t\t\t\t \t\"?version <http://scta.info/property/hasReview> ?review .\",\n     \t\t\t\t   \"}\",\n     \t\t\t\t \"}\",\n     \t       \"UNION\",\n            \"{\",\n     \t         \"<\" + transcriptionUri + \"> <http://scta.info/property/hasAncestor> ?version .\",\n     \t\t\t\t\t \"?version <http://scta.info/property/shortId> ?version_shortId .\",\n               \"?version <http://scta.info/property/hasDocument> ?doc . \",\n     \t         \"?version <http://scta.info/property/versionOrderNumber> ?order_number .\",\n     \t\t\t\t\t \"?version <http://scta.info/property/versionLabel> ?version_label .\",\n     \t\t\t\t\t \"OPTIONAL {\",\n     \t\t\t\t\t \t\"?version <http://scta.info/property/hasReview> ?review .\",\n     \t\t\t\t   \"}\",\n     \t\t\t\t \"}\",\n     \t       \"UNION\",\n     \t       \"{\",\n     \t         \"<\" + transcriptionUri + \"> <http://scta.info/property/hasDescendant> ?version .\",\n     \t\t\t\t\t \"?version <http://scta.info/property/shortId> ?version_shortId .\",\n               \"?version <http://scta.info/property/hasDocument> ?doc . \",\n     \t         \"?version <http://scta.info/property/versionOrderNumber> ?order_number .\",\n     \t\t\t\t\t \"?version <http://scta.info/property/versionLabel> ?version_label .\",\n     \t\t\t\t\t \"OPTIONAL {\",\n     \t\t\t\t\t \t\"?version <http://scta.info/property/hasReview> ?review .\",\n     \t\t\t\t   \"}\",\n     \t\t\t\t \"}\",\n     \t     \"}\",\n     \t     \"ORDER BY DESC(?order_number)\"].join('');\n           return query\n           }\n\n  //gets lines and zone order for\n  export function getBlockLines(manifestationBlockId){\n     const query = [\n       \"SELECT ?first ?last ?order ?surface\",\n       \"{\",\n         \"<\" + manifestationBlockId + \"> <http://scta.info/property/isOnZone> ?zone . \",\n         \"?zone <http://scta.info/property/isOnZone> ?zone2 .\",\n         \"?zone2 <http://scta.info/property/firstLine> ?first .\",\n         \"?zone2 <http://scta.info/property/lastLine> ?last .\",\n         \"?zone2 <http://scta.info/property/isPartOfSurface> ?surface .\",\n         \"?zone <http://scta.info/property/isOnZoneOrder> ?order .\",\n       \"}\"].join('');\n       return query\n     }\n\n   //gets lines and zone order for\n   export function getChildParts(resourceid){\n      const query = [\n        \"SELECT ?part ?title ?level ?order ?structureType ?questionTitle \",\n        \"{\",\n          \"<\" + resourceid + \"> <http://purl.org/dc/terms/hasPart> ?part . \",\n          \"?part <http://purl.org/dc/elements/1.1/title> ?title .\",\n          \"?part <http://scta.info/property/level> ?level .\",\n          \"?part <http://scta.info/property/structureType> ?structureType .\",\n          \"OPTIONAL\",\n          \"{\",\n          \"?part <http://scta.info/property/sectionOrderNumber> ?order .\",\n          \"}\",\n          \"OPTIONAL\",\n          \"{\",\n          \"?part <http://scta.info/property/questionTitle> ?questionTitle .\",\n          \"}\",\n        \"}\",\n        \"ORDER BY ?order\"].join('');\n        return query\n      }\n      //gets lines and zone order for\n    export function getMembersOf(resourceid){\n       const query = [\n         \"SELECT ?memberOf\",\n         \"{\",\n           \"<\" + resourceid + \"> <http://scta.info/property/isMemberOf> ?memberOf . \",\n         \"}\"].join('');\n         return query\n       }\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Axios from 'axios'\n\nimport ImageTextWrapper from './ImageTextWrapper';\n\nimport {runQuery} from './utils'\nimport {getSurfaceInfo} from './Queries'\n\n\n\nclass Surface2 extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleNext = this.handleNext.bind(this)\n    this.handlePrevious = this.handlePrevious.bind(this)\n    this.handleToggleTextLines = this.handleToggleTextLines.bind(this)\n    this.state = {\n      currentSurfaceId: \"\",\n      manifest: \"\",\n      canvas: \"\",\n      region: \"full\",\n      width: \"1000\",\n      next: \"\",\n      previous: \"\",\n      imageurl: \"\",\n      annotationsDisplay: true\n    }\n\n  }\n  handleNext(){\n    //this.retrieveSurfaceInfo(this.state.next)\n    this.props.handleSurfaceFocusChange(this.state.next)\n  }\n  handlePrevious(){\n    //this.retrieveSurfaceInfo(this.state.previous)\n    this.props.handleSurfaceFocusChange(this.state.previous)\n\n  }\n  handleToggleTextLines(){\n    //this.retrieveSurfaceInfo(this.state.previous)\n    this.setState((prevState) => {\n      return {annotationsDisplay: !prevState.annotationsDisplay}\n    })\n  }\n  retrieveSurfaceInfo(surfaceid){\n    console.log('surfaceid', surfaceid)\n    // manifest id should be retrieved from query\n    // this is a temporary measure until db is corrected and query is posible\n\n    const manifest = \"http://scta.info/iiif/\" + this.props.topLevel.split(\"/resource/\")[1] + \"/\" + surfaceid.split(\"/resource/\")[1].split(\"/\")[0] + \"/manifest\";\n    const surfaceInfo = runQuery(getSurfaceInfo(surfaceid))\n    surfaceInfo.then((d) => {\n      const b = d.data.results.bindings[0]\n      //second nested async call for annotation list\n      const alUrl = \"https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid=\" + surfaceid.split(\"/resource/\")[1]\n      Axios.get(alUrl).then((d2) => {\n          this.setState({\n          currentSurfaceId: surfaceid,\n          surfaceTitle: b.surfaceTitle.value,\n          manifest: manifest,\n          canvas: b.canvas.value,\n          imageurl: b.imageurl.value,\n          next: b.next_surface ? b.next_surface.value : \"\",\n          previous: b.previous_surface ? b.previous_surface.value : \"\",\n          annotations: d2.data ? d2.data.resources : \"\"\n        })\n      }).catch((error) => {\n        console.log(\"failed retrieving annotationlist: \", error)\n        this.setState({\n        currentSurfaceId: surfaceid,\n        surfaceTitle: b.surfaceTitle.value,\n        manifest: manifest,\n        canvas: b.canvas.value,\n        imageurl: b.imageurl.value,\n        next: b.next_surface ? b.next_surface.value : \"\",\n        previous: b.previous_surface ? b.previous_surface.value : \"\",\n        annotations: \"\"\n      })\n    })\n  })\n}\ncomponentDidMount(){\n    if (this.props.surfaceid){\n      console.log('surfaceid', this.props.surfaceid)\n      this.retrieveSurfaceInfo(this.props.surfaceid)\n    }\n  }\n  componentWillReceiveProps(nextProps){\n    if (nextProps.surfaceid){\n    this.retrieveSurfaceInfo(nextProps.surfaceid)\n    }\n  }\n  render() {\n    const displayImages = () => {\n      if (this.state.annotations && this.state.annotationsDisplay){\n        const imageTextWrappers = this.state.annotations.map((h, i) => {\n          const text = h.resource.chars;\n          const canvas = h.on.split(\"#xywh=\")[0];\n          const canvasShort = canvas.split(\"/\")[canvas.split(\"/\").length - 1];\n          const coords = h.on.split(\"#xywh=\")[1];\n          const imageUrl = h.imageUrl\n          const label = h.label\n          return (\n            <ImageTextWrapper key={i}\n              imageUrl={imageUrl}\n              canvas={canvas}\n              coords={coords}\n              canvasShort={canvasShort}\n              text={text}\n              label={label}\n              targetLabel={this.props.targetLabel}\n              surfaceButton={false}\n              displayWidth=\"1000\"\n              />\n            )\n\n        })\n        return imageTextWrappers\n      }\n      else{\n        return <img alt=\"manuscript\" src={this.state.imageurl + \"/\" + this.state.region + \"/\" + this.state.width + \",/0/default.jpg\"}/>\n      }\n    }\n    return (\n      <Container className={this.props.hidden ? \"hidden\" : \"showing\"}>\n      {this.state.currentSurfaceId ?\n        <div>\n          <div className=\"surface-navigation\">\n            <p>{this.state.surfaceTitle}</p>\n            {this.state.previous && <p><button onClick={this.handlePrevious}>Previous</button></p>}\n            {this.state.next && <p><button onClick={this.handleNext}>Next</button></p>}\n            {this.state.annotations && <p><button onClick={this.handleToggleTextLines}>Toggle Text Lines</button></p>}\n          </div>\n          {displayImages()}\n        </div> : <p>No surface selected</p>}\n      </Container>\n\n    );\n  }\n\n}\n\nexport default Surface2;\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Axios from 'axios'\n\nimport ImageTextWrapper from './ImageTextWrapper';\n\nimport {runQuery} from './utils'\nimport {getSurfaceInfo, getBlockLines} from './Queries'\n\n//TODO: surface 3 needs to run in a wrapper which allows the user to choose between manifestations.\n//TODO: rdf dbase needs to include first line numbers for paragraphs that start in the middle of al line.\n\nclass Surface3 extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleNext = this.handleNext.bind(this)\n    this.handlePrevious = this.handlePrevious.bind(this)\n    this.state = {\n      width: \"1000\",\n      region: \"full\",\n      surfaces: [\n      ]\n    }\n\n  }\n  handleNext(){\n    //this.retrieveSurfaceInfo(this.state.next)\n    this.props.handleSurfaceFocusChange(this.state.next)\n  }\n  handlePrevious(){\n    //this.retrieveSurfaceInfo(this.state.previous)\n    this.props.handleSurfaceFocusChange(this.state.previous)\n\n  }\n  retrieveSurfaceInfo(manifestationid){\n    // manifest id should be retrieved from query\n    // this is a temporary measure until db is corrected and query is posible\n    const blockLineInfo = runQuery(getBlockLines(manifestationid))\n    blockLineInfo.then((d1) => {\n      d1.data.results.bindings.forEach((z) => {\n      const surfaceid = z.surface.value\n      const firstLine = z.first.value\n      const lastLine = z.last.value\n      const order = z.order.value\n      //const manifest = \"http://scta.info/iiif/\" + this.props.topLevel.split(\"/resource/\")[1] + \"/\" + surfaceid.split(\"/resource/\")[1].split(\"/\")[0] + \"/\" + \"manifest\";\n      const surfaceInfo = runQuery(getSurfaceInfo(surfaceid))\n      surfaceInfo.then((d) => {\n        const b = d.data.results.bindings[0]\n        //second nested async call for annotation list\n        const alUrl = \"https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid=\" + surfaceid.split(\"/resource/\")[1]\n        Axios.get(alUrl).then((d2) => {\n          //const resources = d2.data.resources\n            this.setState((prevState) => {\n              const newSurface = {\n                currentSurfaceId: surfaceid,\n                surfaceTitle: b.surfaceTitle ? b.surfaceTitle.value : \"\",\n                //manifest: manifest,\n                canvas: b.canvas.value,\n                imageurl: b.imageurl.value,\n                next: b.next_surface ? b.next_surface.value : \"\",\n                previous: b.previous_surface ? b.previous_surface.value : \"\",\n                annotations: d2.data ? d2.data.resources : \"\",\n                surfaceid: surfaceid,\n                firstLine: firstLine,\n                lastLine: lastLine,\n                order: order\n\n              }\n            return {\n              surfaces: [\n                ...prevState.surfaces,\n                newSurface\n\n              ]\n            }\n          })\n        }).catch((error) => {\n            console.log(\"failed retrieving annotationlist: \", error)\n            this.setState((prevState) => {\n              const newSurface = {\n                currentSurfaceId: surfaceid,\n                surfaceTitle: b.surfaceTitle.value,\n                //manifest: manifest,\n                canvas: b.canvas.value,\n                imageurl: b.imageurl.value,\n                next: b.next_surface ? b.next_surface.value : \"\",\n                previous: b.previous_surface ? b.previous_surface.value : \"\",\n                annotations: \"\",\n                surfaceid: surfaceid,\n                firstLine: firstLine,\n                lastLine: lastLine,\n                order: order\n\n              }\n            return {\n              surfaces: [\n                ...prevState.surfaces,\n                newSurface\n              ]\n            }\n          })\n        })\n      })\n    })\n  })\n}\ncomponentDidMount(){\n    if (this.props.manifestationid){\n      this.setState((prevState) => {\n        return {\n          surfaces: []\n        }\n      },\n      this.retrieveSurfaceInfo(this.props.manifestationid)\n    )\n    }\n  }\n  componentWillReceiveProps(nextProps){\n    if (nextProps.manifestationid !== this.props.manifestationid){\n      this.setState((prevState) => {\n        return {\n          surfaces: []\n        }\n\n      },\n    this.retrieveSurfaceInfo(nextProps.manifestationid))\n    }\n  }\n  render() {\n    const displayAllImages = () => {\n      const sortedSurfaces = this.state.surfaces.sort((a, b) => {\n        if (a.order > b.order) return 1;\n        if (b.order > a.order) return -1;\n        return 0;\n      })\n      const surfacesDisplay = sortedSurfaces.map((surface) => {\n        return displayImages(surface)\n      })\n      return surfacesDisplay\n    }\n    const displayImages = (surface) => {\n\n      // handle line display\n      if (surface.annotations && this.props.annotationsDisplay === \"lines\"){\n        const imageTextWrappers = surface.annotations.map((h, i) => {\n\n          if (i + 1 >= surface.firstLine && i < surface.lastLine){\n            const text = h.resource.chars;\n            const canvas = h.on.split(\"#xywh=\")[0];\n            const canvasShort = canvas.split(\"/\")[canvas.split(\"/\").length - 1];\n            const coords = h.on.split(\"#xywh=\")[1];\n            const imageUrl = h.imageUrl\n            const label = h.label\n            return (\n              <ImageTextWrapper key={i}\n                imageUrl={imageUrl}\n                canvas={canvas}\n                coords={coords}\n                canvasShort={canvasShort}\n                text={text}\n                label={label}\n                targetLabel={this.props.targetLabel}\n                surfaceButton={false}\n                displayWidth=\"1000\"\n                />\n              )\n            }\n            else{\n              return null\n            }\n\n        })\n        return imageTextWrappers\n      }\n      // handle paragraph display\n      else if (surface.annotations && this.props.annotationsDisplay === \"paragraph\"){\n        const h = surface.annotations[surface.firstLine - 1]\n        const fl = surface.annotations[surface.firstLine - 1]\n        const flcanvas = fl.on.split(\"#xywh=\")[0];\n        const flcanvasShort = flcanvas.split(\"/\")[flcanvas.split(\"/\").length - 1];\n        const flcoords = fl.on.split(\"#xywh=\")[1];\n        const y = flcoords.split(\",\")[1]\n        const ll = surface.annotations[surface.lastLine - 1]\n        //const llcanvas = ll ? ll.on.split(\"#xywh=\")[0] : \"\"\n        //const llcanvasShort = llcanvas.split(\"/\")[llcanvas.split(\"/\").length - 1];\n        const llcoords = ll ? ll.on.split(\"#xywh=\")[1] : \"\"\n        const lly = llcoords.split(\",\")[1]\n        const llh = llcoords.split(\",\")[3]\n        const llbottom = (parseInt(lly) + parseInt(llh)) - parseInt(y)\n        const coords = (parseInt(flcoords.split(\",\")[0] - 10)) + \",\" + (parseInt(y) - 50) + \",\" + (parseInt(flcoords.split(\",\")[2]) + 10) + \",\" + (parseInt(llbottom) + 50)\n        const text = \"\"\n        const imageUrl = h.imageUrl\n\n        return (\n          <ImageTextWrapper\n            imageUrl={imageUrl}\n            canvas={flcanvas}\n            coords={coords}\n            canvasShort={flcanvasShort}\n            text={text}\n            label={\"\"}\n            targetLabel={\"\"}\n            surfaceButton={false}\n            displayWidth=\"1000\"\n            />\n          )\n        }\n      else{\n        return <img alt=\"manuscript\" src={surface.imageurl + \"/full/\" + this.state.width + \",/0/default.jpg\"}/>\n      }\n    }\n    return (\n      <Container className={this.props.hidden ? \"hidden\" : \"showing\"}>\n      {displayAllImages()}\n      </Container>\n\n    );\n  }\n\n}\n\nexport default Surface3;\n","import React from 'react';\nimport Surface3 from './Surface3';\n\nimport { FaList, FaFile, FaParagraph} from 'react-icons/fa';\n\n//TODO: surface 3 needs to run in a wrapper which allows the user to choose between manifestations.\n//TODO: rdf dbase needs to include first line numbers for paragraphs that start in the middle of al line.\n\nclass Surface3Wrapper extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleChangeManifestation = this.handleChangeManifestation.bind(this)\n    this.handleToggleTextLinesView = this.handleToggleTextLinesView.bind(this)\n    this.state = {\n      manifestations: [],\n      focusedManifestation: \"\",\n      focusedManifestationSlug: null,\n      annotationsDisplay: \"lines\"\n    }\n  }\n  handleToggleTextLinesView(view){\n    //this.retrieveSurfaceInfo(this.state.previous)\n    this.setState((prevState) => {\n      return {annotationsDisplay: view}\n    })\n  }\n  handleChangeManifestation(focusedManifestation){\n    //TODO not best way to get manifestation slug; it should probably be retrieved from info query\n    const slug = focusedManifestation.split(\"/resource/\")[1].split(\"/\")[1]\n    this.setState({focusedManifestation: focusedManifestation, focusedManifestationSlug: slug})\n  }\n  componentDidMount(){\n    if (this.props.info){\n      this.setState((prevState) => {\n        return {\n          manifestations: this.props.info.manifestations,\n        }\n      })\n    }\n  }\n  componentWillReceiveProps(nextProps){\n    if (nextProps.info !== this.props.info){\n      this.setState((prevState) => {\n        return {\n          manifestations: nextProps.info.manifestations,\n        }\n      })\n    }\n  }\n  render() {\n    const displayManifestationsList = () => {\n      const list = this.state.manifestations.map((m) => {\n        return <p key={\"title-\" + m.manifestation}><span onClick={() => {this.handleChangeManifestation(m.manifestation)}}>{m.manifestationTitle}</span></p>\n      })\n      return list\n    }\n    const displayManifestation = () => {\n      const manifestation = this.state.manifestations.map((m) => {\n        if (m.manifestation.includes(this.state.focusedManifestationSlug)){\n          return <Surface3 key={\"surface-\" + m.manifestation} manifestationid={m.manifestation} annotationsDisplay={this.state.annotationsDisplay}/>\n        }\n        else{\n          return null\n        }\n      })\n      return manifestation\n\n    }\n\n    return (\n      <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n        <div className=\"surfaceWrapper\">\n          <div className=\"manifestationsList\">\n            {displayManifestationsList()}\n          </div>\n          <div className=\"imagesDisplay\">\n            {displayManifestation()}\n          </div>\n          {this.state.focusedManifestationSlug &&\n            <div>\n            <p><span title=\"Text Line View\" onClick={() => {this.handleToggleTextLinesView(\"lines\")}}><FaList/></span></p>\n            <p><span title=\"Paragraph View\" onClick={() => {this.handleToggleTextLinesView(\"paragraph\")}}><FaParagraph/></span></p>\n            <p><span title=\"Full Surface View\" onClick={() => {this.handleToggleTextLinesView(\"surface\")}}><FaFile/></span></p>\n            </div>\n          }\n\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Surface3Wrapper;\n","import React from 'react';\nimport Axios from 'axios'\nimport { Light as SyntaxHighlighter } from 'react-syntax-highlighter';\n//import xml from 'react-syntax-highlighter/dist/esm/languages/hljs/xml';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n\nclass XmlView extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.mount = false\n    this.retrieveXML = this.retrieveXML.bind(this)\n    this.state = {\n      xmlstring: \"\"\n    }\n  }\n  retrieveXML(info){\n\n    //construct file url request ot exist db to get a cors enabled copy of the text (github does not serve files with cors enabled)\n    // const doc = info.cdoc\n    // const topLevel = info.topLevel\n    // const docFragment = doc.split(\"/master/\")[1]\n    // const topLevelFragment = info.topLevel.split(\"/resource/\")[1]\n\n    //const xmlurl = \"http://exist.scta.info/exist/apps/scta-app/text/\" + topLevelFragment + \"/\" + docFragment;\n    const xmlurl = info.cxml\n    // const xmlDoc = loadXMLDoc(xmlurl)\n    // console.log(\"xmlDoc\", xmlDoc, info.resourceid)\n    // const p = xmlDoc.evaluate(\"//tei:p[@xml:id='\" + info.resourceid + \"']\", xmlDoc, nsResolver, XPathResult.ANY_TYPE, null);\n    // console.log(\"paragraph\", p)\n    Axios.get(xmlurl).then((d) => {\n      if (this.mount){\n        this.setState({xmlstring: d.data})\n      }\n    })\n\n  }\n  componentDidMount(){\n    this.mount = true\n    this.retrieveXML(this.props.info)\n\n  }\n  componentWillReceiveProps(nextProps){\n    if (nextProps.info !== this.props.info){\n      this.retrieveXML(nextProps.info)\n    }\n  }\n  componentWillUnmount(){\n    this.mount = false\n  }\n\n  render(){\n    return (\n      <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n      <SyntaxHighlighter language=\"xml\" style={docco} showLineNumbers>\n        {this.state.xmlstring}\n      </SyntaxHighlighter>\n      </div>\n    )\n  }\n}\n\nexport default XmlView;\n","import React from 'react';\nimport { FaClipboard} from 'react-icons/fa';\nimport {Link} from 'react-router-dom';\n\nclass Info extends React.Component {\n  constructor(props){\n    super(props)\n    this.copyToClipboard = this.copyToClipboard.bind(this)\n\n  }\n  copyToClipboard(string){\n    var dummy = document.createElement(\"textarea\");\n    document.body.appendChild(dummy);\n    dummy.value = string;\n    dummy.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(dummy);\n  }\n  componentDidMount(){\n\n\n  }\n  componentWillReceiveProps(newProps){\n\n  }\n\n  render(){\n    const displayRelatedExpressions = () => {\n      //prevents against rendering if info is not present\n      if (this.props.info){\n        //prevents against rendering if relatedExpressions is not present\n        if (this.props.info.relatedExpressions){\n          const relatedExpressions = this.props.info.relatedExpressions.map((r) => {\n            return <p key={r.resourceid}>{r.relationLabel} <Link to={\"/text?resourceid=\" + r.resourceid}>{r.resourceid}</Link></p>\n          })\n          return relatedExpressions\n        }\n      }\n    }\n    const displayManifestations = () => {\n      if (this.props.info){\n        const manifestations = this.props.info.manifestations.map((i) => {\n          return <p key={i.manifestation}>{i.manifestationTitle} : <Link to={\"/text?resourceid=\" + i.manifestation}>{i.manifestation}</Link></p>\n        })\n        return manifestations\n      }\n    }\n    const displayInfo = () => {\n      if (this.props.info){\n        const resourceid = this.props.info.resourceid.includes('http') ? this.props.info.resourceid : \"http://scta.info/resource/\" + this.props.info.resourceid\n        return(\n          <div>\n          <p key=\"id\">Resourceid: {resourceid}  <span title=\"Copy resource id\" onClick={(e) => {e.preventDefault(); this.copyToClipboard(resourceid)}}><FaClipboard /></span></p>\n          <p key=\"inbox\">LDN Inbox: {this.props.info.inbox}</p>\n          </div>\n        )\n      }\n    }\n  return (\n\n    <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n      <h1>Info</h1>\n      {displayInfo()}\n      <div>\n      <p>Manifestations</p>\n      {displayManifestations()}\n      </div>\n      <div>\n      <p>Related Expression</p>\n      {displayRelatedExpressions()}\n      </div>\n\n\n\n    </div>\n    );\n  }\n}\n\nexport default Info;\n","import React from 'react';\nimport Nav from 'react-bootstrap/Nav';\n\nimport {FaSearch, FaGripVertical, FaCode, FaInfo, FaRegImage, FaComments, FaRegWindowRestore, FaRegWindowMaximize, FaRegWindowMinimize, FaRegWindowClose, FaPencilAlt, FaClone, FaAlignLeft} from 'react-icons/fa';\n// reimport these if you want to use the chnage window location functions: FaAngleDoubleDown, FaAngleDoubleLeft,\n\nfunction WindowNavBar(props) {\n\n  return (\n  <Nav variant=\"tabs\">\n  {\n    //<Navbar.Brand href=\"/\">Focus: {props.focus}</Navbar.Brand>\n  }\n  {props.focusSet && <Nav.Item>\n    <Nav.Link title=\"Basic Resource Information\" onClick={() => {props.handleTabChange(\"info\", props.windowId)}}><FaInfo/></Nav.Link>\n  </Nav.Item>}\n  {props.focusSet && <Nav.Item>\n    <Nav.Link title=\"Images\" onClick={() => {props.handleTabChange(\"surface3\", props.windowId)}}><FaRegImage/></Nav.Link>\n  </Nav.Item>}\n  {props.focusSet && <Nav.Item>\n    <Nav.Link title=\"Text XML Source\" onClick={() => {props.handleTabChange(\"xml\", props.windowId)}}><FaCode/></Nav.Link>\n  </Nav.Item>}\n  {props.focusSet && <Nav.Item>\n    <Nav.Link title=\"Text Comparisons\" onClick={() => {props.handleTabChange(\"textCompare\", props.windowId)}}><FaGripVertical/></Nav.Link>\n  </Nav.Item>}\n  {props.focusSet &&<Nav.Item>\n    <Nav.Link title=\"Comments\" onClick={() => {props.handleTabChange(\"comments\", props.windowId)}}><FaComments/></Nav.Link>\n  </Nav.Item>}\n  {props.focusSet &&<Nav.Item>\n    <Nav.Link title=\"Text Citation\" onClick={() => {props.handleTabChange(\"citation\", props.windowId)}}><FaPencilAlt/></Nav.Link>\n  </Nav.Item>}\n  <Nav.Item>\n    <Nav.Link title=\"Text Outline\" onClick={() => {props.handleTabChange(\"textOutlineWrapper\", props.windowId)}}><FaAlignLeft/></Nav.Link>\n  </Nav.Item>\n  <Nav.Item>\n    <Nav.Link title=\"Text Search\" onClick={() => {props.handleTabChange(\"search\", props.windowId)}}><FaSearch/></Nav.Link>\n  </Nav.Item>\n\n  {props.openWidthHeight !== \"minimum\" &&\n  <Nav.Item>\n    <Nav.Link title=\"Minimize Window\" onClick={() => {props.handleMinimize(props.windowId)}}><FaRegWindowMinimize/></Nav.Link>\n  </Nav.Item>}\n  {props.openWidthHeight !== \"middle\" &&\n  <Nav.Item>\n    <Nav.Link title=\"Half Size Window\" onClick={() => {props.handleMiddlize(props.windowId)}}><FaRegWindowRestore/></Nav.Link>\n  </Nav.Item>\n  }\n  {props.openWidthHeight !== \"maximum\" &&\n  <Nav.Item>\n    <Nav.Link title=\"Maximize Window\" onClick={() => {props.handleMaximize(props.windowId)}}><FaRegWindowMaximize/></Nav.Link>\n  </Nav.Item>\n  }\n  <Nav.Item>\n    <Nav.Link title=\"Close Window\" onClick={() => {props.handleClose(props.windowId)}}><FaRegWindowClose/></Nav.Link>\n  </Nav.Item>\n  {/* commented to prevent window moving; this insures window 1 is always side window and window 2 is bottom window\n    uncomment if this behavior is desired\n    <Nav.Item>\n    <Nav.Link title=\"Move Window\" onClick={() => {props.handleSwitchWindow(props.windowId, props.windowType)}}>{props.windowType === \"sideWindow\" ? <FaAngleDoubleDown/> : <FaAngleDoubleLeft/>}</Nav.Link>\n  </Nav.Item>\n  */\n  }\n  <Nav.Item>\n    {!props.altWindowState && <Nav.Link title=\"Clone Window\" onClick={() => {props.handleDuplicateWindow(props.windowId, props.windowType)}}>{<FaClone/>}</Nav.Link>}\n  </Nav.Item>\n\n\n</Nav>\n\n  );\n}\n\nexport default WindowNavBar;\n","import React from 'react';\n\nimport { FaAngleLeft, FaAngleRight} from 'react-icons/fa';\nimport Nav from 'react-bootstrap/Nav';\n\nfunction NextPrevBar(props) {\n  const displayNextPrevBar = () => {\n    if (props.info){\n      return (\n        <Nav variant=\"tabs\">\n        <Nav.Link onClick={() => {props.handleBlockFocusChange(props.info.resourceid)}}>{props.info.title}</Nav.Link>\n        <Nav.Item>\n          {(props.info.previous && props.info.previous !== \"http://scta.info/resource/\")  && <Nav.Link onClick={() => {props.handleBlockFocusChange(props.info.previous)}}><FaAngleLeft/></Nav.Link>}\n        </Nav.Item>\n        <Nav.Item>\n          {(props.info.next && props.info.next !== \"http://scta.info/resource/\") && <Nav.Link onClick={() => {props.handleBlockFocusChange(props.info.next)}}><FaAngleRight/></Nav.Link>}\n        </Nav.Item>\n\n        </Nav>\n      )\n    }\n    else{\n      return null\n    }\n  }\n  return (\n    displayNextPrevBar()\n  );\n}\n\nexport default NextPrevBar;\n","import React from 'react';\nimport Diff from 'diff-match-patch'\nimport Axios from 'axios'\nimport {Link} from 'react-router-dom';\n\nimport { FaEyeSlash, FaEye, FaStar } from 'react-icons/fa';\n\nclass TextCompareItem extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleToggleShow = this.handleToggleShow.bind(this)\n    this.mounted = \"\"\n    this.state = {\n      compareText: \"\",\n      rawText: \"\",\n      show: true\n    }\n  }\n  handleToggleShow(){\n    this.setState((prevState) => {\n      return{\n        show: !prevState.show\n      }\n    })\n  }\n  createCompare(base, transcription){\n\n    Axios.get(\"http://exist.scta.info/exist/apps/scta-app/csv-pct.xq?resourceid=\" + transcription)\n          .then((text) => {\n\n            const dmp = new Diff.diff_match_patch();\n\n            const diff = dmp.diff_main(base, text.data);\n            // Result: [(-1, \"Hell\"), (1, \"G\"), (0, \"o\"), (1, \"odbye\"), (0, \" World.\")]\n            dmp.diff_cleanupSemantic(diff);\n            const ds = dmp.diff_prettyHtml(diff);\n            if (this.mounted === true && base){\n              this.setState({compareText: ds, rawText: text.data})\n            }\n\n          })\n        }\n\n  componentDidMount(){\n    this.mounted = true;\n    this.setState({rawText: \"\", compareText: \"\"})\n    this.createCompare(this.props.base, this.props.compareTranscription)\n  }\n  componentWillReceiveProps(newProps){\n    // conditional try to restrict new async calls to only when props.info changes\n    if (newProps.base !== this.props.base || newProps.compareTranscription !== this.props.compareTranscription){\n      this.setState({rawText: \"\", compareText: \"\"})\n      this.createCompare(newProps.base, newProps.compareTranscription)\n    }\n  }\n  componentWillUnmount(){\n      this.mounted = false;\n    }\n\n\n  render(){\n    const displayComparison = () => {\n      if (this.props.base && this.state.compareText){\n        return (\n          <div>\n            <span><Link to={\"/text?resourceid=\" + this.props.compareTranscription}>{this.props.compareTranscription}</Link></span>\n            <span onClick={() => this.handleToggleShow()}>{this.state.show ? <FaEyeSlash/> : <FaEye/>}</span>\n            <span onClick={() => this.props.handleChangeBase(this.state.rawText)}><FaStar/></span>\n            <div className={this.state.show ? \"unhidden\" : \"hidden\"}>\n              <div ref=\"text\" dangerouslySetInnerHTML={{ __html: this.state.compareText}}></div>\n            </div>\n          </div>\n        )\n      }\n      else{\n        return <p>Loading</p>\n      }\n    }\n\n    return (\n      displayComparison()\n    );\n  }\n}\n\nexport default TextCompareItem;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport { FaEyeSlash, FaEye } from 'react-icons/fa';\nimport {runQuery} from './utils'\nimport {basicInfoQuery} from './Queries'\n\nimport TextCompareItem from './TextCompareItem'\n\n\n\nclass TextCompare extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleToggleShowAll = this.handleToggleShowAll.bind(this)\n    this.mounted = \"\"\n    this.state = {\n      info: \"\",\n      show: false,\n      baseText: \"\"\n    }\n\n  }\n\n  handleToggleShowAll(){\n    this.setState((prevState) => {\n      return{\n        show: !prevState.show\n      }\n    })\n  }\n\n  // TODO dupblicate of function in Text Component\n  // needs refactoring\n  arrangeTextInfo(info, resourceid){\n      info.then((d) => {\n        const bindings = d.data.results.bindings[0]\n        const manifestations = d.data.results.bindings.map((b) => {\n          return {\n            manifestation: b.manifestation.value,\n            manifestationTitle: b.manifestationTitle.value,\n            transcription: b.manifestationCTranscription.value\n          }\n        })\n        if (this.mounted === true && bindings){\n          this.setState({\n            info: {\n              resourceid: resourceid,\n              title: bindings.title.value,\n              structureType: bindings.structureType.value,\n              inbox: bindings.inbox.value,\n              next: bindings.next ? bindings.next.value : \"\",\n              previous: bindings.previous ? bindings.previous.value : \"\",\n              cdoc: bindings.cdoc.value,\n              cxml: bindings.cxml.value,\n              topLevel: bindings.topLevelExpression.value,\n              cmanifestation: bindings.cmanifestation.value,\n              ctranscription: bindings.ctranscription.value,\n              manifestations: manifestations\n            }\n          });\n        }\n      });\n    }\n  getTextInfo(id){\n    const info = runQuery(basicInfoQuery(id))\n    this.arrangeTextInfo(info, id)\n  }\n\n  componentDidMount(){\n    this.mounted = true;\n    this.setState({show: this.props.show, baseText: this.props.baseText})\n\n    if (this.props.isMainText){\n\n      this.setState({info: this.props.info})\n    }\n    else{\n      this.getTextInfo(this.props.expressionid)\n    }\n  }\n\n\n  componentWillReceiveProps(nextProps){\n    // conditional try to restrict new async calls to only when props.info changes\n    if (this.props.info.resourceid !== nextProps.info.resourceid){\n      this.setState({baseText: nextProps.baseText})\n\n      if (nextProps.isMainText){\n        this.setState({info: nextProps.info})\n      }\n      else{\n        this.getTextInfo(nextProps.expressionid)\n\n      }\n    }\n  }\n    componentWillUnmount(){\n      this.mounted = false;\n  }\n\n  render(){\n    const displayComparisons = () => {\n      if (this.state.info.manifestations){\n        const texts = this.state.info.manifestations.map((m) => {\n          return (\n            <TextCompareItem\n            key={m.transcription}\n            base={this.props.baseText}\n            compareTranscription={m.transcription}\n            handleChangeBase={this.props.handleChangeBase}\n            show={this.state.show}\n            />\n          )\n        })\n        return texts\n      }\n    }\n\n  return (\n    <div>\n      {\n        // the link to reroute is not quite working, because the base Text is not resetting, focusBlockChange might be better; but item structure will also need to be changed.\n      }\n      <p><span>{this.props.relationLabel}</span> <Link to={\"/text?resourceid=\" + this.state.info.resourceid}>{this.state.info.resourceid}</Link>\n      <span onClick={() => this.handleToggleShowAll()}>{this.state.show ? <FaEyeSlash/> : <FaEye/>}</span></p>\n      <div className={this.state.show ? \"unhidden\" : \"hidden\"}>\n      {displayComparisons()}\n      </div>\n    </div>\n\n  );\n  }\n}\n\nexport default TextCompare;\n","import React from 'react';\nimport Axios from 'axios'\n\nimport TextCompare from './TextCompare'\n\n\nclass TextCompareWrapper extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleCompare = this.handleToggleCompare.bind(this)\n    this.handleChangeBase = this.handleChangeBase.bind(this)\n    this.getText = this.getText.bind(this)\n    this.mounted = \"\"\n    this.state = {\n      expressions: {},\n      baseText: \"\"\n    }\n\n  }\n  handleChangeBase(rawText){\n    this.setState({baseText: rawText})\n  }\n  handleToggleCompare(expressionid){\n    this.setState((prevState) => {\n      const newExpressions = {...prevState.expressions}\n      newExpressions[expressionid].show = !newExpressions[expressionid].show\n      return {\n        expressions: newExpressions\n      }\n    })\n  }\n  getText(ctranscription){\n    const _this = this;\n    Axios.get(\"http://exist.scta.info/exist/apps/scta-app/csv-pct.xq?resourceid=\" + ctranscription)\n      .then((text) => {\n        _this.setState({baseText: text.data})\n      })\n    }\n\n  componentDidMount(){\n    // prevents check when prop.info is not set\n    if (this.props.info){\n      // prevents check when prop.info.relatedExpressions is not set\n      if (this.props.info.relatedExpressions){\n        this.getText(this.props.info.ctranscription)\n        const expressions = {}\n        expressions[this.props.info.resourceid] = {id: this.props.info.resourceid, show: true}\n\n        this.props.info.relatedExpressions.forEach((r) => {\n          expressions[r.resourceid] = {id: r.resourceid, relationLabel: r.relationLabel, show: false}\n        })\n        this.setState({expressions: expressions})\n      }\n    }\n  }\n  componentWillReceiveProps(nextProps){\n    // only fire reload if \"info resource\" has changed\"\n    if (this.props.info.resourceid !== nextProps.info.resourceid){\n\n    // this conditional is needed, because props are waiting on multiple async calls.\n    // when an async call finishes it will up; and the related Expression query last,\n    // it will use the old ctranscription prop overriding the the update from the prop update from the other async call\n    if (this.props.info.relatedExpressions){\n      // this conditional may no longer be necessary based on first conditional check\n      if (this.props.info.ctranscription !== nextProps.info.ctranscription){\n        this.getText(nextProps.info.ctranscription)\n      }\n      const expressions = {}\n      expressions[nextProps.info.resourceid] = {id: nextProps.info.resourceid, show: true}\n      nextProps.info.relatedExpressions.forEach((r) => {\n        expressions[r.resourceid] = {id: r.resourceid, relationLabel: r.relationLabel, show: false}\n      })\n      this.setState({expressions: expressions})\n    }\n  }\n  }\n  render(){\n    const displayExpressions = () => {\n      const exObject = this.state.expressions\n      const expressions = Object.keys(exObject).map((key) => {\n        const isMainText = this.props.info.resourceid === exObject[key].id ? true : false\n        return (\n          <div key={this.state.expressions[key].id}>\n            {<TextCompare\n              info={this.props.info}\n              expressionid={exObject[key].id}\n              relationLabel={exObject[key].relationLabel}\n              isMainText={isMainText}\n              handleChangeBase={this.handleChangeBase}\n              baseText={this.state.baseText}\n              show={exObject[key].show}\n              />}\n          </div>\n        )\n      })\n      return expressions\n    }\n\n  return (\n    <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n    {displayExpressions()}\n    </div>\n\n  );\n  }\n}\n\nexport default TextCompareWrapper;\n","import React from 'react';\n\nfunction CommentItem(props) {\n  return (\n    <div className=\"comment\">\n      <p>{props.n && props.n.body.value}</p>\n      </div>\n  );\n}\n\nexport default CommentItem;\n","import React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\n\nclass CommentCreate extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleCommentUpdate = this.handleCommentUpdate.bind(this)\n    this.handleSubmitComment = this.handleSubmitComment.bind(this)\n    this.state = {\n      comment: \"\"\n    }\n  }\n  handleCommentUpdate(e){\n    e.preventDefault()\n    this.setState({comment: e.target.value})\n\n  }\n  handleSubmitComment(e){\n    e.preventDefault()\n    this.props.handleSumbitComment(this.state.comment)\n  }\n  render(){\n    return (\n      <div className=\"comment\">\n        <Form onSubmit={this.handleSubmitComment}>\n         <FormControl type=\"text\" id=\"comment\" placeholder=\"comment\" className=\"mr-sm-2\" onChange={this.handleCommentUpdate} />\n         <Button type=\"submit\" variant=\"outline-success\">Search</Button>\n       </Form>\n      </div>\n    );\n  }\n}\n\nexport default CommentCreate;\n","import React from 'react';\nimport Axios from 'axios'\nimport uuidv4 from 'uuid/v4'\n\nimport CommentItem from \"./CommentItem\"\nimport CommentCreate from \"./CommentCreate\"\n\nclass Comments extends React.Component {\n  constructor(props){\n  super(props)\n  this.handleSumbitComment = this.handleSumbitComment.bind(this)\n  this.state = {\n    notifications: [],\n    inbox: \"\",\n    resourceid: \"\"\n  }\n}\nhandleSumbitComment(comment){\n  const _this = this;\n\n  const randomid = uuidv4();\n  const annotat = {\n    \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n    \"id\": \"http://inbox.scta.info/notifications/\" + randomid,\n    \"type\": \"Annotation\",\n    \"motivation\": \"commenting\",\n    \"body\": {\n      \"type\": \"TextualBody\",\n      \"value\": comment\n    },\n    \"target\": this.state.resourceid\n  }\n  Axios({\n    method: 'post',\n    url: this.state.inbox,\n    data: annotat,\n    config: { headers: {'Content-Type': 'application/json+ld' }}\n    })\n    .then(function (response) {\n      _this.setState((prevState) => {\n        return {notifications: [annotat, ...prevState.notifications, ]}\n      });\n        //handle success\n        console.log(response);\n    })\n    .catch(function (response) {\n        //handle error\n        console.log(response);\n    });\n\n\n  }\n  retrieveComments(inbox){\n    // using callback here to make sure state is set before making second a sync call.\n    // TODO: consider using this in other components to prevent out of sync behavior\n    // especially is TextCompareComponents\n    this.setState({notifications: []}, function() {\n      Axios.get(inbox).then((d) => {\n        d.data[\"ldp:contains\"].forEach((n) => {\n          //TODO annoying that each comment has to be requestd.\n          // if inbox main list included full comment, only one request would be needed\n          Axios.get(n[\"@id\"]).then((d2) => {\n            console.log(\"d2\", d2)\n            this.setState((prevState) => {\n              return {notifications: [...prevState.notifications, d2.data]}\n            });\n          });\n        })\n      }).catch((e) => {\n        console.log(e)\n      })\n    })\n  }\n  componentDidMount(){\n    // conditional prevents against needless attempt to retreive comments with info is not present\n    if (this.props.info){\n      this.setState({inbox: this.props.info.inbox, resourceid: this.props.info.resourceid})\n      this.retrieveComments(this.props.info.inbox)\n    }\n  }\n  componentWillReceiveProps(newProps){\n    // conditional prevents against needlessly rerequesting information when \"info\" is the same\n    if (newProps.info !== this.props.info){\n      this.setState({inbox: newProps.info.inbox, resourceid: newProps.info.resourceid})\n      this.retrieveComments(newProps.info.inbox)\n    }\n  }\n  render(){\n    const displayComments = () => {\n      const comments = this.state.notifications.map((n, i) => {\n        return (\n          <CommentItem key={i} n={n}/>\n        )\n      })\n      return comments\n    }\n    return (\n      <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n        <h1>Comments</h1>\n        <CommentCreate handleSumbitComment={this.handleSumbitComment}/>\n        {displayComments()}\n      </div>\n    );\n\n  }\n\n\n\n\n}\n\nexport default Comments;\n","import React from 'react';\nimport { FaClipboard} from 'react-icons/fa';\n\nfunction Citation(props) {\n  return (\n    <div className={props.hidden ? \"hidden\" : \"showing\"}>\n    <h1><FaClipboard/></h1>\n    <p>Full Citation</p>\n    <p>Peter Plaoul, Commentarius in libros Sententiarum, de Fide, Lectio 1, de Fide, Quaestio: utrum in causa iudiciali fidei contra traditionem pure humanitus adinventam iudex idoneus ferret pro fide sententiam , Paragraph l1-cpspfs, [n. 1], SCTA Expression Url http://scta.info/resource/l1-cpspfs; ed. EditorName, SCTA Manifestion Url http://scta.info/resource/l1-cpspfs, Transcription Data Source QmNynYEQkRrt6MTfCxS8w2Pm6eN4tbLXuRCpE7HbzWdxqg; Accessed at http://scta.lombardpress.org/text/l1-cpspfs on June 29, 2019, Archived at http://scta.lombardpress.org/text/archive?datasource=QmNynYEQkRrt6MTfCxS8w2Pm6eN4tbLXuRCpE7HbzWdxqg</p>\n\n<p>Short Citation</p>\n\n<p>Peter Plaoul, Commentarius in libros Sententiarum, de Fide, Lectio 1, de Fide, Quaestio: utrum in causa iudiciali fidei contra traditionem pure humanitus adinventam iudex idoneus ferret pro fide sententiam , Paragraph l1-cpspfs, [n. 1], QmNynYEQkRrt6MTfCxS8w2Pm6eN4tbLXuRCpE7HbzWdxqg, Accessed on June 29, 2019</p>\n\n<p>Explanation of Citation Practices</p>\n\n<p>The citation of a text that has survived through a historical succession of manifestations is a complicated endeavor. Today, when transcriptions of these manifestations can be published as data, separate from any presentation, and thereby can be presented in a variety of ways, a full citation inevitably becomes even more complex. In order to identify both a specific dataset and the specific presentation of that data, specificity and precision are needed.</p>\n\n<p>Full citations identify three aspects of the text currently being viewed.</p>\n\n<p>First (blue) it identifies the idea of the paragraph in question situated within the conceptual hierarchy of the text.</p>\n\n<p>Second (red) it identifies the transcription data source used to represent a particular manifestion of this passage</p>\n\n<p>Third (green) it identifies specific presentation of the data source currently being viewed.</p>\n</div>\n  );\n}\n\nexport default Citation;\n","import React from 'react';\nimport {FaExternalLinkAlt, FaChevronDown, FaChevronUp} from 'react-icons/fa';\nimport {Link} from 'react-router-dom';\n\nimport {runQuery} from './utils'\nimport {getChildParts} from './Queries'\nclass TextOutline extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleToggleChildren = this.handleToggleChildren.bind(this)\n    this.state = {\n      parts: [],\n      showChildren: false\n    }\n\n  }\n  handleToggleChildren(e){\n    e.preventDefault();\n    this.setState((prevState) => {\n      return {showChildren: !prevState.showChildren}\n    })\n  }\n  retrieveParts(resourceid){\n    const partsInfo = runQuery(getChildParts(resourceid))\n    partsInfo.then((data) => {\n      // async seems to be working pretty well and efficiently.\n      // if a section has many parts, it will be fired several times.\n      // if it has a 100 parts, it will fire 100 times.\n      // But 100 doesn't seem to causing serious performance issues.\n      console.log(\"async test; fired\")\n      const newData = data.data.results.bindings.map((d) => {\n        return {\n          part: d.part.value,\n          title: d.title.value,\n          level: d.level.value,\n          structureType: d.structureType.value,\n          questionTitle: d.questionTitle ? d.questionTitle.value : \"\"\n        }\n      })\n      this.setState({parts: newData})\n    })\n  }\n  componentDidMount(){\n    //this.setState({showChildren: this.props.showChildren})\n    this.retrieveParts(this.props.resourceid)\n\n    if (this.props.membersOf){\n      if (this.props.membersOf.includes(this.props.resourceid)) {\n        this.setState({showChildren: true})\n\n      }\n    }\n\n  }\n  componentWillReceiveProps(newProps){\n    if (newProps.resourceid !== this.props.resourceid){\n      this.retrieveParts(this.props.resourceid)\n    }\n    if (newProps.resourceid !== this.props.resourceid || newProps.membersOf !== this.props.membersOf){\n      if (newProps.membersOf){\n        if (newProps.membersOf.includes(newProps.resourceid)) {\n          this.setState({showChildren: true})\n        }\n        // else{\n        //   this.setState({showChildren: false})\n        // }\n      }\n    }\n\n  }\n  render(){\n    const displayChildren = () => {\n      const parts = this.state.parts.map((p) => {\n        let bold = \"\"\n        if (this.props.membersOf){\n          if (this.props.membersOf.includes(p.part) || p.part === this.props.focusResourceid) {\n            bold = \"bold\"\n            //showChildren = true;\n          }\n        }\n        return <TextOutline\n        bold={bold}\n        key={p.part}\n        focusResourceid={this.props.focusResourceid}\n        showChildren={this.state.showChildren}\n        resourceid={p.part}\n        title={p.title}\n        level={p.level}\n        structureType={p.structureType}\n        membersOf={this.props.membersOf}\n        questionTitle={p.questionTitle}\n        mtFocus={this.props.mtFocus}/>\n      })\n      return parts\n    }\n    const indent = this.props.level * 5\n    return (\n      <div id=\"outline\" style={{\"paddingLeft\": indent + \"px\"}}>\n        <p className={this.props.bold}>\n        {this.props.title}\n        {this.props.questionTitle && <span>: {this.props.questionTitle}</span>}\n        {(this.state.parts.length > 0 && !this.state.showChildren) && <span className=\"outlineArrow\" onClick={this.handleToggleChildren}><FaChevronDown/></span>}\n        {(this.state.parts.length > 0 && this.state.showChildren) && <span className=\"outlineArrow\" onClick={this.handleToggleChildren}><FaChevronUp/></span>}\n        {this.props.structureType !== \"http://scta.info/resource/structureCollection\" && <Link to={\"/text?resourceid=\" + this.props.resourceid + this.props.mtFocus} ><FaExternalLinkAlt/></Link>}\n        </p>\n        {this.state.showChildren && displayChildren()}\n      </div>\n    );\n  }\n}\n\nexport default TextOutline;\n","import React from 'react';\nimport TextOutline from './TextOutline'\n\nimport {runQuery} from './utils'\nimport {getMembersOf} from './Queries'\n\nclass TextOutlineWrapper extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      membersOf: [],\n    }\n  }\n  retrieveMembersOf(resourceid){\n    const membersOfInfo = runQuery(getMembersOf(resourceid))\n    membersOfInfo.then((data) => {\n      const newData = data.data.results.bindings.map((d) => {\n        return d.memberOf.value\n      })\n      this.setState({membersOf: newData})\n    })\n  }\n  componentDidMount(){\n    this.retrieveMembersOf(this.props.focusResourceid)\n  }\n  componentWillReceiveProps(newProps){\n    if (newProps.focusResourceid !== this.props.focusResourceid){\n      this.retrieveMembersOf(newProps.focusResourceid)\n    }\n  }\n  render(){\n    return (\n      <div className={this.props.hidden ? \"hidden\" : \"showing\"}>\n      <TextOutline key={this.props.resourceid}\n      showChildren={true}\n      focusResourceid={this.props.focusResourceid}\n      resourceid={this.props.resourceid}\n      title={this.props.title}\n      level={1}\n      structureType={\"http://scta.info/resource/structureCollection\"}\n      membersOf={this.state.membersOf}\n      mtFocus={this.props.mtFocus}/>\n      </div>\n    );\n  }\n}\n\nexport default TextOutlineWrapper;\n","import React from 'react';\nimport Surface2 from \"./Surface2\"\nimport Surface3Wrapper from \"./Surface3Wrapper\"\nimport XmlView from \"./XmlView\"\nimport Info from \"./Info\"\nimport WindowNavBar from \"./WindowNavBar\"\nimport NextPrevBar from \"./NextPrevBar\"\nimport TextCompareWrapper from \"./TextCompareWrapper\"\nimport SearchWrapper from \"./SearchWrapper\"\nimport Comments from \"./Comments\"\nimport Citation from \"./Citation\"\nimport TextOutlineWrapper from \"./TextOutlineWrapper\"\n\n\n\nclass Window extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      windowLoad: \"\"\n    }\n  }\n\n  componentDidMount(){\n    this.setState({windowLoad: this.props.windowLoad})\n\n\n  }\n  componentWillReceiveProps(newProps){\n    this.setState({windowLoad: newProps.windowLoad})\n\n\n  }\n\n\n  render(){\n    const displayChild = () => {\n      return(\n        <div>\n\n          {// components that are only avialable if blockDiv focus and this.props.info is set\n            this.props.info &&\n          <div>\n            <TextCompareWrapper info={this.props.info} relatedExpressions={this.props.relatedExpressions} hidden={this.state.windowLoad !== \"textCompare\"}/>\n            <XmlView info={this.props.info} hidden={this.state.windowLoad !== \"xml\"}/>\n            <Info info={this.props.info} relatedExpressions={this.props.relatedExpressions} topLevel={this.props.topLevel} hidden={this.state.windowLoad !== \"info\"}/>\n            <Citation info={this.props.info} relatedExpressions={this.props.relatedExpressions} topLevel={this.props.topLevel} hidden={this.state.windowLoad !== \"citation\"}/>\n            <Surface2 surfaceid={this.props.surfaceid} topLevel={this.props.topLevel} handleSurfaceFocusChange={this.props.handleSurfaceFocusChange} hidden={this.state.windowLoad !== \"surface2\"}/>\n            <Surface3Wrapper info={this.props.info} topLevel={this.props.topLevel} handleSurfaceFocusChange={this.props.handleSurfaceFocusChange} hidden={this.state.windowLoad !== \"surface3\"}/>\n            <Comments info={this.props.info} hidden={this.state.windowLoad !== \"comments\"}/>\n          </div>\n          }\n          {\n            //TODO: use of info, topLevel, itemFocus, focusResearceid, resourceid, needs to be better organized and clarified\n          }\n          <TextOutlineWrapper focusResourceid={this.props.info ? this.props.info.resourceid : this.props.itemFocus.expression} resourceid={this.props.topLevel} title={this.props.topLevel} hidden={this.state.windowLoad !== \"textOutlineWrapper\"} mtFocus={this.props.mtFocus}/>\n          <SearchWrapper hidden={this.state.windowLoad !== \"search\"} topLevel={this.props.topLevel}/>\n          {\n            //<Surface surfaceid={this.props.surfaceid} topLevel={this.props.topLevel}/>\n          }\n        </div>\n      )\n\n    }\n\n  return (\n    <div className={this.props.windowType + \" \" + this.props.windowType + this.props.openWidthHeight}>\n      <WindowNavBar handleTabChange={this.props.handleTabChange}\n      handleClose={this.props.handleClose}\n      handleMinimize={this.props.handleMinimize}\n      handleMaximize={this.props.handleMaximize}\n      handleMiddlize={this.props.handleMiddlize}\n      windowType={this.props.windowType}\n      openWidthHeight={this.props.openWidthHeight}\n      windowId={this.props.windowId}\n      focus={this.props.resourceid}\n      handleSwitchWindow={this.props.handleSwitchWindow}\n      handleDuplicateWindow={this.props.handleDuplicateWindow}\n      altWindowState={this.props.altWindowState}\n      focusSet={!!this.props.info}\n      />\n      <NextPrevBar info={this.props.info} handleBlockFocusChange={this.props.handleBlockFocusChange}/>\n\n      {displayChild()}\n\n    </div>\n    );\n  }\n}\n\nexport default Window;\n","import React from 'react';\nimport {NavLink} from 'react-router-dom';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\n\n\nclass TextNavBar extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      next: \"\",\n      previous: \"\"\n    }\n  }\n  componentWillReceiveProps(nextProps){\n    this.setState({next: nextProps.next, previous: nextProps.previous})\n  }\n  render(){\n    return (\n      <Navbar bg=\"light\" variant=\"light\" expand=\"lg\" fixed=\"bottom\">\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav>\n          {this.props.previous && <NavLink className=\"nav-link\" to={\"/text?resourceid=\" + this.props.previous}>Previous</NavLink>}\n          {this.props.next && <NavLink className=\"nav-link\" to={\"/text?resourceid=\" + this.props.next}>Next</NavLink>}\n          {this.props.next && <NavLink className=\"nav-link\" to={\"/text?resourceid=\" + this.props.topLevel}>Text Home</NavLink>}\n        </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n\n    );\n  }\n}\n\nexport default TextNavBar;\n","import React from 'react';\n\nimport $ from 'jquery';\n\nimport {convertXMLDoc, scrollToParagraph} from './utils'\n\nclass Text extends React.Component {\n  constructor(props){\n    super(props)\n    this.retrieveText = this.retrieveText.bind(this)\n\n\n  }\n  retrieveText(doc, topLevel, scrollTo){\n    const _this = this;\n    if (doc){\n      //construct file url request ot exist db to get a cors enabled copy of the text (github does not serve files with cors enabled)\n      const doc = this.props.doc;\n      const topLevel = this.props.topLevel;\n      const docFragment = doc.split(\"/master/\")[1]\n      const topLevelFragment = topLevel.split(\"/resource/\")[1]\n\n      let xmlurl = \"\"\n      if (doc.includes(\"ipfs\")){\n        xmlurl = doc\n      }\n      else{\n        xmlurl = \"http://exist.scta.info/exist/apps/scta-app/text/\" + topLevelFragment + \"/\" + docFragment;\n      }\n      const xslurl = \"/xslt/main_view.xsl\"\n      const resultDocument = convertXMLDoc(xmlurl, xslurl)\n      // append resultDoc to div in DOM\n      document.getElementById(\"text\").innerHTML = \"\";\n      document.getElementById(\"text\").appendChild(resultDocument);\n      // if (this.state.blockFocus){\n      //   scrollToParagraph(this.state.blockFocus, true)\n      // }\n    }\n    // bind events to dom\n    // only seems to be working when they are here; not yet sure why\n\n    $('.paragraphnumber').click(function(e) {\n         e.preventDefault();\n         const id = $(this).parent(\"p\").attr('id')\n         _this.props.setFocus(id)\n         _this.props.openWindow(\"window1\", \"info\")\n    });\n\n    // scroll to paragraph after document has been appended\n    if (scrollTo){\n      scrollToParagraph(scrollTo, true)\n    }\n\n  //   $('.lbp-paragraphmenu').click(function(e) {\n  //     e.preventDefault();\n  //     const id = $(this).attr('data-id')\n  //\n  //     //_this.setState({blockFocus: id})\n  //     _this.setState((prevState) => {\n  //       const windows = prevState.windows\n  //       windows.window1.open = true\n  //       return {\n  //         windows: windows,\n  //         blockFocus: id\n  //       }\n  //\n  //     })\n  //     // set block info to state.info\n  //     const fullid = \"http://scta.info/resource/\" + id\n  //     const info = runQuery(basicInfoQuery(fullid))\n  //     _this.arrangeTextInfo(info, fullid)\n  //\n  //     // retrieve relatedExpressions info\n  //     // get related expressions info\n  //     // TODO/Note this is getting called in handleBlockFocusChange as well;\n  //     // Strong candidate for  refactor\n  //     const relatedExpressions = runQuery(getRelatedExpressions(fullid))\n  //     _this.arrangeRelatedInfo(relatedExpressions)\n  //     // scroll to paragraph\n  //     scrollToParagraph(id, true)\n  //\n  //   });\n    $('.js-show-folio-image').click(function(e) {\n      e.preventDefault();\n      const surfaceid = $(this).attr('data-surfaceid');\n      const paragraphid = $(this).closest('.plaoulparagraph').attr(\"id\");\n\n      _this.props.setFocus(paragraphid)\n      _this.props.handleSurfaceFocusChange(\"http://scta.info/resource/\" + surfaceid)\n      _this.props.openWindow(\"window2\", \"surface2\")\n    });\n    $('.appnote, .footnote').click(function(e) {\n      e.preventDefault();\n    });\n    $('.appnote, .footnote').parent().mouseover(function(e) {\n         e.preventDefault();\n         const link = $(this).children('.appnote, .footnote')\n         const target = $(link).attr('href')\n         const text = $(target).html()\n        // const top = $(target).position().top;\n         //const left = $(target).position().left;\n         const noteDisplay = $(link).next(\".note-display\")\n         $(noteDisplay).removeClass(\"hidden\")\n         $(noteDisplay).html(text)\n    });\n     $('.appnote, .footnote').parent().mouseout(function(e) {\n          e.preventDefault();\n          $(\".note-display\").addClass(\"hidden\")\n      });\n\n      //TODO: this bind is working in the bottom list, but not inthe popup footnotes\n      $(document).on(\"click\", '.js-show-reference-paragraph', function(e){\n        const target = $(this).attr('data-url')\n        window.location = \"#/text?resourceid=\" + target\n      })\n\n  }\n\n  componentDidUpdate(prevProps, prevState){\n\n    //check to see if doc has changed\n    if (prevProps.doc !== this.props.doc){\n      this.retrieveText(this.props.doc, this.props.topLevel, this.props.scrollTo)\n    }\n    // if doc has already been appended, still scroll to target block\n    else{\n      if (this.props.scrollTo){\n      scrollToParagraph(this.props.scrollTo, true)\n      }\n    }\n\n\n    //this.retrieveText(this.props.doc, this.props.topLevel, this.props.scrollTo)\n  }\n\n  componentDidMount(){\n    this.retrieveText(this.props.doc, this.props.topLevel, this.props.scrollTo)\n  }\n  componentWillReceiveProps(newProps){\n\n  }\n  render(){\n\n    return (\n      <div>\n        <div id=\"text\"></div>\n      </div>\n    );\n  }\n}\n\nexport default Text;\n","import React from 'react';\n\nimport {Link} from 'react-router-dom';\nimport Axios from 'axios'\nimport Alert from 'react-bootstrap/Alert';\n\nimport {runQuery} from './utils'\nimport {versionHistoryInfo} from './Queries'\n\nclass VersionChain extends React.Component {\n  constructor(props){\n    super(props)\n    this.getVersionHistory = this.getVersionHistory.bind(this)\n    this.handleToggleShowVersions = this.handleToggleShowVersions.bind(this)\n    this.state = {\n      versions: [],\n      currentVersion: {},\n      showVersions: false\n    }\n  }\n  handleToggleShowVersions(){\n    this.setState((prevState) => {\n      return {showVersions: !prevState.showVersions}\n    })\n  }\n  getVersionHistory(itemInfo){\n      const versionChainInfo = runQuery(versionHistoryInfo(itemInfo.transcriptionid))\n      versionChainInfo.then((d) => {\n        const b = d.data.results.bindings\n        b.forEach((b, i) => {\n          var reviewUrl = \"https://dll-review-registry.scta.info/api/v1/reviews/?url=\" + b.doc.value + \"?society=MAA\"\n          Axios(reviewUrl).then((d2) => {\n            const data = d2.data\n            var reviewObject = {}\n            if (data.length > 0){\n              reviewObject = {\n                img_url: data[0][\"badge-url\"],\n                reviewid: data[0][\"id\"],\n                ipfsHash: data[0][\"ipfs-hash\"],\n                html_link: \"https://dll-review-registry.scta.info/reviews/\" + data[0][\"id\"] + \".html\",\n                rubric_link: data[0][\"badge-rubric\"],\n                summary: data[0][\"review-summary\"]\n              }\n            }\n            this.setState((prevState) => {\n              const newVersion = {\n                versionTranscription: b.version ? b.version.value : \"\",\n                versionLabel: b.version_label ? b.version_label.value : \"\",\n                versionOrderNumber: b.order_number ? b.order_number.value : \"\",\n                versionReview: b.review ? b.review.value : \"\",\n                versionDoc: b.doc ? b.doc.value : \"\",\n                versionReviewInfo: reviewObject,\n              }\n              return {\n                versions: [...prevState.versions, newVersion],\n                currentVersion: itemInfo\n              }\n            })\n          })\n        })\n      })\n    }\n  componentDidMount(){\n    //prevents call when itemInfo prop is not present\n    if (this.props.itemInfo){\n      this.getVersionHistory(this.props.itemInfo)\n    }\n  }\n  componentWillReceiveProps(newProps){\n      if (newProps.itemInfo.transcriptionid !== this.props.itemInfo.transcriptionid){\n        this.setState({versions: []}, () => {\n          this.getVersionHistory(newProps.itemInfo)\n        })\n      }\n\n\n  }\n  render(){\n    const displayVersions = () => {\n      const versions = this.state.versions.map((v) => {\n        const currentlyViewing = v.versionTranscription === this.state.currentVersion.transcriptionid ? \"currentlyViewing\" : \"\"\n        return (<p key={v.versionTranscription} className={currentlyViewing}>\n          {currentlyViewing ? <span>{v.versionLabel} (Currently Viewing)</span> : <Link to={\"/text?resourceid=\" + v.versionTranscription}>{v.versionLabel}</Link>}\n          {v.versionReviewInfo.html_link && <span> Peer Reviewed: <a href={v.versionReviewInfo.html_link}><img alt=\"review\" src={v.versionReviewInfo.img_url}/></a> </span>}\n          <span class=\"small\"> Data Source: <a href={v.versionDoc}>{v.versionDoc}</a> </span>\n          </p>)\n      })\n      return versions\n    }\n    const displayAlert = () => {\n      if (this.state.versions){\n        if (this.state.versions.length > 1){\n          return (\n            <Alert variant=\"info\">\n              <p onClick={this.handleToggleShowVersions}>This Text Has Multiple Indexed Versions</p>\n              {this.state.showVersions && displayVersions()}\n            </Alert>\n          )\n        }\n        else if (this.state.versions.length === 1){\n          const version = this.state.versions[0]\n          return (<Alert variant=\"info\">\n            <span>Version: {version.versionLabel} | Data Source: <a href={version.versionDoc}>{version.versionDoc}</a> </span>\n          </Alert>\n          )\n        }\n        else{\n          return null\n        }\n      }\n      else {\n        return null\n      }\n    }\n    return (\n      displayAlert()\n    );\n  }\n}\n\nexport default VersionChain;\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\n\n\nimport Window from \"./Window\"\nimport TextNavBar from \"./TextNavBar\"\nimport Text from \"./Text\"\nimport VersionChain from \"./VersionChain\"\nimport {runQuery, scrollToParagraph} from './utils'\n\nimport {getRelatedExpressions, basicInfoQuery, itemTranscriptionInfoQuery} from './Queries'\n\n\nclass TextWrapper extends React.Component {\n  constructor(props){\n    super(props)\n    this.mount = false\n    this.openWindow = this.openWindow.bind(this)\n    this.setFocus = this.setFocus.bind(this)\n    this.handleTabChange = this.handleTabChange.bind(this)\n    this.handleClose = this.handleClose.bind(this)\n    this.handleMinimize = this.handleMinimize.bind(this)\n    this.handleMaximize = this.handleMaximize.bind(this)\n    this.handleMiddlize = this.handleMiddlize.bind(this)\n    this.handleSwitchWindow = this.handleSwitchWindow.bind(this)\n    this.handleDuplicateWindow = this.handleDuplicateWindow.bind(this)\n    this.handleSurfaceFocusChange = this.handleSurfaceFocusChange.bind(this)\n    this.state = {\n      doc: \"\",\n      focus: \"\",\n      //focusRelatedExpressions: \"\",\n      mtFocus: \"\",\n      itemFocus: \"\",\n      surfaceid: \"\",\n      windows: {\n        window1: {\n          windowId: \"window1\",\n          open: false,\n          windowLoad: \"info\",\n          position: \"sideWindow\",\n          openWidthHeight: \"middle\"\n        },\n        window2: {\n          windowId: \"window2\",\n          open: false,\n          windowLoad: \"info\",\n          position: \"bottomWindow\",\n          openWidthHeight: \"middle\"\n        }\n      }\n    }\n  }\n  openWindow(id, windowLoad){\n    if (!this.state.windows[id].open){\n      this.setState((prevState) => {\n        const windows = prevState.windows\n        windows[id].open = true\n        windows[id].windowLoad = windowLoad\n        return {\n          windows: windows,\n        }\n      })\n    }\n  }\n  handleClose(windowId){\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      windows[windowId].open = false\n      return {windows: windows}\n\n    })\n    //scroll is supposed to re-align text scroll to focused paragraph after side bar close.\n    //but it is not quite working\n    scrollToParagraph(this.state.blockFocus, true)\n\n  }\n  handleMinimize(windowId){\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      windows[windowId].openWidthHeight = \"minimum\"\n      return {windows: windows}\n\n    })\n  }\n  handleMaximize(windowId){\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      windows[windowId].openWidthHeight = \"maximum\"\n      return {windows: windows}\n\n    })\n  }\n  handleMiddlize(windowId){\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      windows[windowId].openWidthHeight = \"middle\"\n      return {windows: windows}\n\n    })\n  }\n  handleSwitchWindow(windowId, windowType){\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      if (windows[windowId].position === \"sideWindow\"){\n        windows[windowId].position = \"bottomWindow\"\n        // these conditionals control whether an already existing window will be closed when the other is moved\n        // while commented they allow window1 and window2 to stack on top of each other\n\n        // if (windowId === \"window1\"){\n        //   windows[\"window2\"].open = false\n        // }\n        // else if ((windowId === \"window2\")){\n        //   windows[\"window1\"].open = false\n        // }\n      }\n      else if (windows[windowId].position === \"bottomWindow\"){\n        windows[windowId].position = \"sideWindow\"\n        // these conditionals control whether an already existing window will be closed when the other is moved\n        // while commented they allow window1 and window2 to stack on top of each other\n\n        // if (windowId === \"window1\"){\n        //   windows[\"window2\"].open = false\n        // }\n        // else if ((windowId === \"window2\")){\n        //   windows[\"window1\"].open = false\n        // }\n      }\n      return {windows: windows}\n\n    })\n  }\n  handleDuplicateWindow(windowId, windowType){\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      const altWindowId = windowId === \"window1\" ? \"window2\" : \"window1\"\n      if (windows[windowId].position === \"sideWindow\"){\n        windows[altWindowId].position = \"bottomWindow\"\n        windows[altWindowId].open = true\n      }\n      else if (windows[windowId].position === \"bottomWindow\"){\n        windows[altWindowId].position = \"sideWindow\"\n        windows[altWindowId].open = true\n      }\n      return {windows: windows}\n    })\n  }\n  handleTabChange(windowLoad, windowId){\n\n    this.setState((prevState) => {\n      const windows = prevState.windows\n      windows[windowId].windowLoad = windowLoad\n      return {windows: windows}\n\n    })\n\n  }\n\n  handleSurfaceFocusChange(surfaceid){\n    this.setState({surfaceid: surfaceid})\n  }\n  setFocus(id){\n    const fullid = id.includes(\"http\") ? id + this.state.mtFocus : \"http://scta.info/resource/\" + id + this.state.mtFocus\n    this.props.handleUpdateUrlResource(fullid)\n  }\n\n\n  retrieveFocusInfo(id){\n    const fullid = id.includes(\"http\") ? id : \"http://scta.info/resource/\" + id\n    // get info\n    const info = runQuery(basicInfoQuery(fullid))\n    //arrange info and set it to state\n\n    this.arrangeFocusInfo(info, fullid)\n    // get related expressions info\n    // removed these second calls and embed the query in arrange focus info to keep information in sync.\n    // TODO remove below three lines\n    //const relatedExpressions = runQuery(getRelatedExpressions(fullid))\n    //arrange info and set it to state\n    //this.arrangeFocusRelatedInfo(relatedExpressions)\n\n    //scrollToParagraph(shortid, true)\n\n  }\n\n  arrangeFocusInfo(info, resourceid){\n      info.then((d) => {\n        const bindings = d.data.results.bindings[0]\n        const manifestations = d.data.results.bindings.map((b) => {\n          return {\n            manifestation: b.manifestation.value,\n            manifestationTitle: b.manifestationTitle.value,\n            transcription: b.manifestationCTranscription.value\n          }\n        })\n        // TODO the need for this 2nd query and async call might\n        // be able to be removed using a construct query\n        // see example pattern in articles collection\n        const relatedExpressions = runQuery(getRelatedExpressions(resourceid))\n        relatedExpressions.then((d) => {\n          const bindings2 = d.data.results.bindings\n          const relatedExpressions = bindings2.map((r) => {\n              return {\n                resourceid: r.isRelatedTo.value,\n                relationLabel: r.label.value\n              }\n            });\n\n          if (this.mount){\n            this.setState({\n              focus: {\n                resourceid: resourceid,\n                title: bindings.title.value,\n                structureType: bindings.structureType.value,\n                inbox: bindings.inbox.value,\n                next: bindings.next ? bindings.next.value : \"\",\n                previous: bindings.previous ? bindings.previous.value : \"\",\n                cdoc: bindings.cdoc.value,\n                cxml: bindings.cxml.value,\n                topLevel: bindings.topLevelExpression.value,\n                cmanifestation: bindings.cmanifestation.value,\n                ctranscription: bindings.ctranscription.value,\n                manifestations: manifestations,\n                relatedExpressions: relatedExpressions\n              }\n            });\n          }\n        })\n      });\n    }\n  // embeded this within arrang focus info, so that information remains in sync\n  // TODO remove this\n    // arrangeFocusRelatedInfo(relatedInfo){\n    //     relatedInfo.then((d) => {\n    //       console.log(\"new data\", d)\n    //       const bindings = d.data.results.bindings\n    //       const relatedExpressions = bindings.map((r) => {\n    //           return {\n    //             resourceid: r.isRelatedTo.value,\n    //             relationLabel: r.label.value\n    //           }\n    //         });\n    //     if (this.mount){\n    //       this.setState({\n    //         focusRelatedExpressions: relatedExpressions\n    //       });\n    //       }\n    //     });\n    //   }\n    setItemFocus(id){\n      const fullid = id.includes(\"http\") ? id : \"http://scta.info/resource/\" + id\n      // get info\n      const info = runQuery(itemTranscriptionInfoQuery(fullid))\n      this.arrangeItemFocusInfo(info)\n    }\n    arrangeItemFocusInfo(itemFocusInfo){\n        itemFocusInfo.then((d) => {\n          const bindings = d.data.results.bindings[0]\n          if (this.mount){\n            this.setState({\n              itemFocus: {\n                title: bindings.title.value,\n                manifestation: bindings.manifestation.value,\n                expression: bindings.expression.value,\n                doc: bindings.doc.value,\n                xml: bindings.xml.value,\n                next: bindings.next ? bindings.next.value : \"\",\n                previous: bindings.previous ? bindings.previous.value : \"\",\n                inbox: bindings.inbox.value,\n                topLevel: bindings.topLevelExpression.value,\n                transcriptionid: bindings.t.value\n              }\n            });\n          }\n        });\n      }\n\n  componentDidMount(){\n    this.mount = true\n\n    this.setItemFocus(this.props.transcriptionid)\n\n    const mFocus = this.props.transcriptionid.split(\"/resource/\")[1].split(\"/\")[1]\n    const tFocus = this.props.transcriptionid.split(\"/resource/\")[1].split(\"/\")[2]\n    this.setState({mtFocus: \"/\" + mFocus + \"/\" + tFocus})\n\n    if (this.props.blockDivFocus){\n      this.retrieveFocusInfo(this.props.blockDivFocus)\n    }\n  }\n  componentWillReceiveProps(newProps){\n    //Keep test, but it seems like this look up only needs to fire, when the transcription id prop changes\n    // not when other props changes.\n    if (newProps.transcriptionid !== this.props.transcriptionid){\n      this.setItemFocus(newProps.transcriptionid)\n      const mFocus = newProps.transcriptionid.split(\"/resource/\")[1].split(\"/\")[1]\n      const tFocus = newProps.transcriptionid.split(\"/resource/\")[1].split(\"/\")[2]\n      this.setState({mtFocus: \"/\" + mFocus + \"/\" + tFocus})\n    }\n\n\n\n    if (!newProps.blockDivFocus){\n      this.setState({focus: \"\"});\n    }\n    else if (newProps.blockDivFocus !== this.props.blockDivFocus){\n      this.retrieveFocusInfo(newProps.blockDivFocus)\n    }\n  }\n  componentWillUnmount(){\n    this.mount = false\n  }\n  render(){\n    const displayWindows = () => {\n      const windows = Object.keys(this.state.windows).map((key) => {\n        if (this.state.windows[key].open){\n          return (<Window\n              key={key}\n              handleClose={this.handleClose}\n              handleMinimize={this.handleMinimize}\n              handleMaximize={this.handleMaximize}\n              handleMiddlize={this.handleMiddlize}\n              handleTabChange={this.handleTabChange}\n              handleBlockFocusChange={this.setFocus}\n              handleSurfaceFocusChange={this.handleSurfaceFocusChange}\n              handleSwitchWindow={this.handleSwitchWindow}\n              handleDuplicateWindow={this.handleDuplicateWindow}\n              resourceid={this.state.focus ? this.state.focus.resourceid : this.props.resourceid}\n              windowType={this.state.windows[key].position}\n              windowId={this.state.windows[key].windowId}\n              windowLoad={this.state.windows[key].windowLoad}\n              openWidthHeight={this.state.windows[key].openWidthHeight}\n              surfaceid={this.state.surfaceid}\n              info={this.state.focus}\n              itemFocus={this.state.itemFocus}\n              topLevel={this.state.itemFocus.topLevel}\n              altWindowState={this.state.windows[key].windowId === \"window1\" ? this.state.windows[\"window2\"].open : this.state.windows[\"window1\"].open}\n              mtFocus={this.state.mtFocus}\n              />\n            )\n          }\n          else{\n            return null\n          }\n        })\n        return windows\n      }\n    const textClass = () => {\n      let aSideWindowOpen = false;\n      if (this.state.windows.window1.open && this.state.windows.window1.position === \"sideWindow\" && this.state.windows.window1.openWidthHeight === \"middle\"){\n        aSideWindowOpen = true\n      }\n      else if (this.state.windows.window2.open && this.state.windows.window2.position === \"sideWindow\"){\n        aSideWindowOpen = true\n      }\n      return aSideWindowOpen\n    }\n\n    return (\n      <div>\n        {this.state.itemFocus &&\n          <VersionChain itemInfo={this.state.itemFocus}/>\n        }\n        <Container className={textClass() ? \"lbp-text skinnyText\" : \"lbp-text fullText\"}>\n          {this.state.itemFocus &&\n          <Text\n            doc={this.state.itemFocus.doc}\n            topLevel={this.state.itemFocus.topLevel}\n            setFocus={this.setFocus}\n            handleSurfaceFocusChange={this.handleSurfaceFocusChange}\n            openWindow={this.openWindow}\n            scrollTo={this.state.focus ? this.state.focus.resourceid.split(\"/resource/\")[1] : this.state.itemFocus.expression.split(\"/resource/\")[1]}\n            />\n          }\n        </Container>\n        <TextNavBar\n          next={this.state.itemFocus && this.state.itemFocus.next}\n          previous={this.state.itemFocus && this.state.itemFocus.previous}\n          topLevel={this.state.itemFocus && this.state.itemFocus.topLevel}\n          handleClose={this.handleClose}\n        />\n        <div>\n        {\n        // <TextNavBar\n        // next={this.state.items[this.state.itemFocus] && this.state.items[this.state.itemFocus].next}\n        // previous={this.state.items[this.state.itemFocus] && this.state.items[this.state.itemFocus].previous}\n        // topLevel={this.state.items[this.state.itemFocus] && this.state.items[this.state.itemFocus].topLevel}\n        // handleClose={this.handleClose}\n        // />\n        }\n        {displayWindows()}\n        </div>\n      </div>\n    );\n  }\n}\nexport default TextWrapper;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nfunction Item(props) {\n  const displayItem = () => {\n    // conditions prevents attempt to render when props.item is not present\n    if (props.item){\n      return (\n        <tr>\n          {props.item.author && <td><Link to={\"/text?resourceid=\" + props.item.author}>{props.item.authorTitle}</Link></td>}\n          <td><Link to={\"/text?resourceid=\" + props.item.id}>{props.item.title}</Link></td>\n          {props.item.questionTitle ? <td><Link to={\"/text?resourceid=\" + props.item.id}>{props.item.questionTitle}</Link></td> : <td/>}\n        </tr>\n      )\n    }\n    else{\n      return null\n    }\n  }\n  return (\n    displayItem()\n  );\n}\n\nexport default Item;\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\n\nimport FormControl from 'react-bootstrap/FormControl';\nimport Table from 'react-bootstrap/Table';\n\nimport {runQuery} from './utils'\nimport {basicStructureAllItemsInfoQuery, partsInfoQuery,workGroupExpressionQuery} from './Queries'\n\nimport Item from \"./Item\"\n\n//import Lbp from \"lbp.js/lib\"\n\n\nclass Collection extends React.Component {\n  constructor(props){\n    super(props)\n    this.retrieveCollectionInfo = this.retrieveCollectionInfo.bind(this)\n    this.makeRequests = this.makeRequests.bind(this)\n    this.handleFilter = this.handleFilter.bind(this)\n    this.filter = React.createRef();\n    this.mount = false\n    this.state = {\n      items: {},\n      parts: {},\n      filter: \"\"\n    }\n\n  }\n  handleFilter(e){\n    const item = e.target.value\n    this.setState({filter: item})\n\n  }\n  arrangeParts(partsPromise){\n    const _this = this\n    partsPromise.then((d) => {\n        const bindings = d.data.results.bindings\n        let partsObject = {}\n        bindings.forEach((b) => {\n          const pId = b.part.value\n          partsObject[pId] = {\n            id: b.part.value,\n            title: b.partTitle.value,\n            type: b.partType.value,\n            questionTitle: b.partQuestionTitle ? b.partQuestionTitle.value : null,\n            level: b.partLevel ? b.partLevel.value : \"unknown\",\n        }\n      });\n      if (this.mount){\n        _this.setState(\n          {\n            parts: partsObject\n          }\n        )\n      }\n    });\n  }\n  arrangeItems(itemsPromise){\n    const _this = this\n    itemsPromise.then((d) => {\n      const bindings = d.data.results.bindings\n      let itemsObject = {}\n      bindings.forEach((b) => {\n        const itemId = b.item.value\n        itemsObject[itemId] = {\n          title: b.itemTitle.value,\n          id: b.item.value,\n          type: b.itemType.value,\n          questionTitle: b.itemQuestionTitle ? b.itemQuestionTitle.value : null,\n          author: b.itemAuthor ? b.itemAuthor.value : null,\n          authorTitle: b.itemAuthorTitle ? b.itemAuthorTitle.value : null,\n          next: b.next ? b.next.value : null,\n          previous: b.previous ? b.previous.value : null,\n          cm: b.cm ? b.cm.value : null,\n          cmTitle: b.cmTitle ? b.cmTitle.value : null,\n          ct: b.ct ? b.ct.value : null,\n          topLevel: b.topLevel ? b.topLevel.value : null,\n          doc: b.doc ? b.doc.value : null\n        }\n      });\n      if (this.mount){\n        _this.setState(\n          {\n            items: itemsObject\n          }\n        )\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n  retrieveWorkGroupInfo(resourceid){\n    const expressionsInfo = runQuery(workGroupExpressionQuery(resourceid))\n    const partsInfo = runQuery(partsInfoQuery(resourceid))\n    this.arrangeParts(partsInfo)\n    this.arrangeItems(expressionsInfo)\n  }\n  retrieveCollectionInfo(resourceid, structureType, topLevel){\n    const collectionInfo = runQuery(basicStructureAllItemsInfoQuery(topLevel))\n    const partsInfo = runQuery(partsInfoQuery(resourceid))\n\n    //add parts to state\n    this.arrangeParts(partsInfo)\n    /// add items to state\n    this.arrangeItems(collectionInfo)\n  }\n  makeRequests(newResourceId, structureType, topLevel, type){\n\n    //\n    //   // get all expressions for this workGroup\n      if (type === \"http://scta.info/resource/workGroup\"){\n          this.retrieveWorkGroupInfo(newResourceId, structureType, topLevel)\n          //this.setState({itemFocus: \"\"})\n      }\n      // get all items for this collection\n      else if (structureType === \"http://scta.info/resource/structureCollection\"){\n          this.retrieveCollectionInfo(newResourceId, structureType, topLevel)\n          //this.setState({itemFocus: \"\"})\n      }\n\n  }\n  componentDidUpdate(prevProps, prevState){\n\n  }\n  componentDidMount(){\n    this.mount = true\n    this.setState({resourceid: this.props.resourceid})\n    this.makeRequests(this.props.resourceid, this.props.structureType, this.props.topLevel, this.props.type)\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n\n    // conditional prevents new information requestion if resource id has not changed\n    if (nextProps.resourceid !== this.props.resourceid){\n      this.setState({resourceid: nextProps.resourceid, filter: \"\"})\n      // this conditional resets form value if ref is present\n      if (this.filter){\n        this.filter.current.value = \"\"\n      }\n      this.makeRequests(nextProps.resourceid, nextProps.structureType, nextProps.topLevel, nextProps.type)\n    }\n  }\n  componentWillUnmount(){\n    this.mount = false\n  }\n  render(){\n    //const resourceid = Qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).resourceid;\n\n    const displayQuestions = () => {\n      const questions = []\n      Object.keys(this.state.items).forEach((key) => {\n        const filterCheck = this.state.items[key].title + \" \" + this.state.items[key].authorTitle + \" \" + this.state.items[key].questionTitle\n        if (filterCheck.toLowerCase().includes(this.state.filter.toLowerCase())){\n        questions.push(\n          <Item key={key} item={this.state.items[key]}/>\n        )}\n      });\n      return (\n        <Container>\n\n        <h1>Items</h1>\n        <br/>\n        <Table striped bordered hover size=\"sm\">\n        <tbody>\n        {questions}\n        </tbody>\n        </Table>\n        </Container>\n      )\n    }\n    const displayParts = () => {\n        const questions = []\n        Object.keys(this.state.parts).forEach((key) => {\n          //check against filter\n            if (this.state.parts[key].title.toLowerCase().includes(this.state.filter.toLowerCase())){\n            questions.push(\n              <Item key={key} item={this.state.parts[key]}/>\n              )\n            }\n\n        });\n        //check against top level expression as parts; if parts are top level expression; don't display parts\n        const testPart = this.state.parts[Object.keys(this.state.parts)[0]]\n        if (testPart){\n          if (!(testPart.type === \"http://scta.info/resource/expression\" && testPart.level === \"1\")){\n            return (\n              <Container>\n              <h1>Parts</h1>\n              <br/>\n              <Table striped bordered hover size=\"sm\">\n              <tbody>\n              {questions}\n              </tbody>\n              </Table>\n              </Container>\n            )\n          }\n        }\n      }\n\n    return (\n      <Container className=\"collectionBody\">\n      {}\n      <Container className=\"collectionFilter\">\n        <FormControl ref={this.filter} id=\"filter\" placeholder=\"type to filter\" onChange={this.handleFilter}/>\n      </Container>\n      {displayParts()}\n      {displayQuestions()}\n      </Container>\n    );\n  }\n}\n\nexport default Collection;\n","import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Table from 'react-bootstrap/Table';\nimport {runQuery} from './utils'\nimport {getAuthorInformation} from './Queries'\nimport Item from \"./Item\"\n\n//import Lbp from \"lbp.js/lib\"\n\n\nclass AuthorCollection extends React.Component {\n  constructor(props){\n    super(props)\n\n    this.retrieveAuthorCollectionInfo = this.retrieveAuthorCollectionInfo.bind(this)\n    this.handleItemFilter = this.handleItemFilter.bind(this)\n    this.itemFilter = React.createRef();\n\n    this.mount = false\n    this.state = {\n      authorTitle: \"\",\n      authorArticles: [],\n      textArticles: [],\n      expressions: [],\n      itemFilter: \"\",\n    }\n\n  }\n  handleItemFilter(e){\n    const item = e.target.value\n    this.setState({itemFilter: item})\n\n  }\n  arrangeItems(itemsPromise, resourceid){\n    itemsPromise.then((d) => {\n      console.log(\"data\", d)\n      const author = d.data[\"@graph\"].filter((i) => i[\"@id\"] === resourceid)[0]\n      console.log(\"author\", author)\n      //const authorExpressions = d.data[\"@graph\"].filter((i) => {i[\"@id\"] === author.hasTopLevelExpression})\n      const authorTitle = author[\"http://purl.org/dc/elements/1.1/title\"]\n      let authorArticles = null\n      if(Array.isArray(author.authorArticle)){\n        authorArticles =  author.authorArticle.map((a) => {\n          return {\n            id: a,\n            title: d.data[\"@graph\"].filter((i) => i[\"@id\"] === a)[0][\"http://purl.org/dc/elements/1.1/title\"]\n          }\n        })\n      }\n      else{\n        authorArticles = [{id: author.autherArticle, title: d.data[\"@graph\"].filter((i) => i[\"@id\"] === author.autherArticle)[0][\"http://purl.org/dc/elements/1.1/title\"]}]\n      }\n      let textArticles = null\n      if(Array.isArray(author.textArticle)){\n          textArticles =  author.textArticle.map((a) => {\n          return {\n            id: a,\n            title: d.data[\"@graph\"].filter((i) => i[\"@id\"] === a)[0][\"http://purl.org/dc/elements/1.1/title\"]\n          }\n        })\n      }\n      else{\n        textArticles = [{id: author.textArticle, title: d.data[\"@graph\"].filter((i) => i[\"@id\"] === author.textArticle)[0][\"http://purl.org/dc/elements/1.1/title\"]}]\n      }\n\n      let expressions = null\n      if(Array.isArray(author.hasTopLevelExpression)){\n        expressions =  author.hasTopLevelExpression.map((a) => {\n          return {\n            id: a,\n            title: d.data[\"@graph\"].filter((i) => i[\"@id\"] === a)[0][\"http://purl.org/dc/elements/1.1/title\"]\n          }\n        })\n      }\n      else{\n        expressions = [{id: author.hasTopLevelExpression, title: d.data[\"@graph\"].filter((i) => i[\"@id\"] === author.hasTopLevelExpression)[0][\"http://purl.org/dc/elements/1.1/title\"]}]\n      }\n      this.setState({authorArticles: authorArticles, textArticles: textArticles, expressions: expressions, authorTitle: authorTitle })\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n  retrieveAuthorCollectionInfo(resourceid){\n    const authorCollectionInfo = runQuery(getAuthorInformation(resourceid))\n    /// add items to state\n    this.arrangeItems(authorCollectionInfo, resourceid)\n  }\n  componentDidUpdate(prevProps, prevState){\n\n  }\n  componentDidMount(){\n    this.mount = true\n    this.retrieveAuthorCollectionInfo(this.props.resourceid)\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.refs.itemFilter ? this.refs.itemFilter.value = \"\" :\n    this.retrieveAuthorCollectionInfo(nextProps.resourceid)\n  }\n  componentWillUnmount(){\n    this.mount = false\n  }\n  render(){\n    //const resourceid = Qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).resourceid;\n\n    const displayItems = (list) => {\n      const items = list.map((i) => {\n        return (\n\n          <Item item={i}/>\n\n        )\n      });\n      return items\n    }\n\n\n\n\n\n\n    return (\n      <div className=\"collectionBody\">\n      <h1>{this.state.authorTitle}</h1>\n      <br/>\n      {this.state.expressions &&\n        <Container>\n        <h1>Expressions</h1>\n        <br/>\n        <Table striped bordered hover size=\"sm\">\n        <tbody>\n        {displayItems(this.state.expressions)}\n        </tbody>\n        </Table>\n        </Container>\n      }\n      {this.state.authorArticles &&\n        <Container>\n        <h1>Author Related Articles</h1>\n        <br/>\n        <Table striped bordered hover size=\"sm\">\n        <tbody>\n        {displayItems(this.state.authorArticles)}\n        </tbody>\n        </Table>\n        </Container>\n      }\n      {this.state.textArticles &&\n        <Container>\n        <h1>Text Related Articles</h1>\n        <br/>\n        <Table striped bordered hover size=\"sm\">\n        <tbody>\n        {displayItems(this.state.textArticles)}\n        </tbody>\n        </Table>\n        </Container>\n      }\n      </div>\n    );\n  }\n}\n\nexport default AuthorCollection;\n","import React from 'react';\nimport Qs from \"query-string\"\nimport TextWrapper from \"./TextWrapper\"\nimport Collection from \"./Collection\"\nimport AuthorCollection from \"./AuthorCollection\"\n\nimport {runQuery} from './utils'\nimport {getItemTranscription, getItemTranscriptionFromBlockDiv, getStructureType} from './Queries'\n\nclass TextSwitch extends React.Component {\n  constructor(props){\n    super(props)\n    this.handleUpdateUrlResource = this.handleUpdateUrlResource.bind(this)\n    this.state = {\n      displayType: \"\",\n      resourceid: \"\",\n      itemTranscriptionId: \"\",\n      blockDivFocus: \"\"\n    }\n  }\n  handleUpdateUrlResource(fullid){\n    this.props.history.push({search: '?resourceid=' + fullid})\n  }\n  getInfo(resourceid){\n    const structureTypePromise = runQuery(getStructureType(resourceid))\n    structureTypePromise.then((t) => {\n      const type = t.data.results.bindings[0].type.value\n      const structureType = t.data.results.bindings[0].structureType ? t.data.results.bindings[0].structureType.value : null\n      //const level = t.data.results.bindings[0].level ? t.data.results.bindings[0].level.value : null\n      const topLevel = t.data.results.bindings[0].topLevel ? t.data.results.bindings[0].topLevel.value : resourceid\n      const itemParent = t.data.results.bindings[0].itemParent ? t.data.results.bindings[0].itemParent.value : null\n      //const itemTranscriptionId = t.data.results.bindings[0].ctranscription ? t.data.results.bindings[0].ctranscription.value : null\n      if (type === \"http://scta.info/resource/person\"){\n          this.setState({displayType: \"person\", resourceid: resourceid, structureType: \"\", topLevel: \"\", type: type})\n      }\n      else if (type === \"http://scta.info/resource/workGroup\"){\n          this.setState({displayType: \"collection\", resourceid: resourceid, structureType: structureType, topLevel: topLevel, type: type})\n      }\n      else if (structureType === \"http://scta.info/resource/structureCollection\"){\n          this.setState({displayType: \"collection\", resourceid: resourceid, structureType: structureType, topLevel: topLevel, type: type})\n      }\n      else if (structureType === \"http://scta.info/resource/structureItem\" ){\n        if (type === \"http://scta.info/resource/transcription\"){\n          this.setState({itemTranscriptionId: resourceid, displayType: \"item\", blockDivFocus: \"\"})\n        }\n        else {\n          const structureTypePromise = runQuery(getItemTranscription(resourceid))\n          structureTypePromise.then((t) => {\n            this.setState({itemTranscriptionId: t.data.results.bindings[0].ctranscription.value, displayType: \"item\", blockDivFocus: \"\"})\n          });\n        }\n      }\n      else if (structureType === \"http://scta.info/resource/structureBlock\" || structureType === \"http://scta.info/resource/structureDivision\" ){\n        const structureTypePromise = runQuery(getItemTranscriptionFromBlockDiv(resourceid))\n        structureTypePromise.then((t) => {\n          if (type === \"http://scta.info/resource/transcription\"){\n            this.setState({itemTranscriptionId: itemParent, blockDivFocus: t.data.results.bindings[0].blockDivExpression.value, displayType: \"item\"})\n          }\n          else if (type === \"http://scta.info/resource/expression\"){\n            this.setState({itemTranscriptionId: t.data.results.bindings[0].ctranscription.value, blockDivFocus: resourceid, displayType: \"item\"})\n          }\n          else {\n            this.setState({itemTranscriptionId: t.data.results.bindings[0].ctranscription.value, blockDivFocus: t.data.results.bindings[0].blockDivExpression.value, displayType: \"item\"})\n          }\n        });\n      }\n    });\n  }\n\n  componentDidMount(){\n    const newResourceId = Qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).resourceid\n    this.getInfo(newResourceId)\n  }\n  componentWillReceiveProps(nextProps) {\n    const newResourceId = Qs.parse(nextProps.location.search, { ignoreQueryPrefix: true }).resourceid\n    this.getInfo(newResourceId)\n  }\n\n\n\n  render(){\n    const display = () => {\n      if (this.state.displayType === \"person\"){\n        return (<AuthorCollection resourceid={this.state.resourceid}/>)\n\n      }\n      else if (this.state.displayType === \"collection\"){\n        return (<Collection resourceid={this.state.resourceid} structureType={this.state.structureType} topLevel={this.state.topLevel} type={this.state.type}/>)\n\n      }\n      else if (this.state.displayType === \"item\"){\n        return (<TextWrapper itemid={this.state.resourceid} transcriptionid={this.state.itemTranscriptionId} blockDivFocus={this.state.blockDivFocus} handleUpdateUrlResource={this.handleUpdateUrlResource}/>)\n      }\n      else{\n        return null\n      }\n    }\n  return (\n    display()\n    );\n  }\n\n}\n\nexport default TextSwitch;\n","import React from 'react';\n\nfunction About() {\n  return (\n    <div className=\"About\">\n    <h1>About</h1>\n\n    </div>\n  );\n}\n\nexport default About;\n","import React from 'react';\nimport {NavLink} from 'react-router-dom';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport {resourceEndpoint} from './config';\n\nfunction NavBar() {\n  return (\n    <Navbar bg=\"dark\" variant=\"light\" expand=\"lg\" fixed=\"top\">\n      <Nav>\n        <NavLink className=\"nav-link\" to=\"/\">SCTA Reading Room</NavLink>\n      </Nav>\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse id=\"basic-navbar-nav\">\n      <Nav>\n\n\n\n        <NavLink className=\"nav-link\" to={\"/text?resourceid=\" + resourceEndpoint}>Text</NavLink>\n        {// example drop down\n          // <NavDropdown title=\"Dropdown\" id=\"basic-nav-dropdown\">\n        //   <NavDropdown.Item href=\"#action/3.1\">Action</NavDropdown.Item>\n        //   <NavDropdown.Item href=\"#action/3.2\">Another action</NavDropdown.Item>\n        //   <NavDropdown.Item href=\"#action/3.3\">Something</NavDropdown.Item>\n        //   <NavDropdown.Divider />\n        //   <NavDropdown.Item href=\"#action/3.4\">Separated link</NavDropdown.Item>\n        // </NavDropdown>\n      }\n      <NavLink className=\"nav-link\" to=\"/search\">Search</NavLink>\n      </Nav>\n\n      <Nav>\n        <NavLink className=\"nav-link\" to=\"/about\">About</NavLink>\n        <NavLink className=\"nav-link\" to=\"/donate\">Donate</NavLink>\n      </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n\n  );\n}\n\nexport default NavBar;\n","import React from 'react';\n\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\n\n\n\n\nfunction Footer() {\n  return (\n    <Container className=\"lbp-footer\" fluid>\n    <Row>\n    <Col>\n    <p>Designed by <a href=\"http://jeffreycwitt.com\">Jeffrey C. Witt</a></p>\n    </Col>\n    <Col>\n    <p>A <a href=\"http://lombardpress.org\">LombardPress</a> Publication</p>\n    </Col>\n    <Col>\n    <p>Powered by <a href=\"http://scta.info\">SCTA</a> Data</p>\n    </Col>\n    </Row>\n    </Container>\n\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport {HashRouter, Route, Switch} from 'react-router-dom';\nimport Home from \"./Home\"\nimport SearchWrapper from \"./SearchWrapper\"\nimport TextSwitch from \"./TextSwitch\"\nimport About from \"./About\"\nimport NavBar from './NavBar';\n\n\n\nimport Footer from './Footer';\n\nimport 'bootstrap/dist/css/bootstrap.css'\nimport '../styles/App.scss';\n//import '../styles/index.scss';\n\nconst AppRouter = () => (\n  <HashRouter forceRefresh={false}>\n    <div>\n      <NavBar/>\n      <Switch>\n        <Route path=\"/\" exact={true} component={Home}/>\n        <Route path=\"/text\"  exact={true} component={TextSwitch}/>\n        <Route path=\"/about\" exact={true} component={About}/>\n        <Route path=\"/search\" exact={true} render={(props) => <SearchWrapper {...props} hidden={false}/>}/>\n        {\n          //<Route path=\"/edit/:id\" exact={true} component={EditExpensePage}/>\n        //<Route path=\"/help\" exact={true} component={HelpPage}/>\n        // <Route component={NotFoundPage}/>\n        }\n      </Switch>\n      <Footer/>\n    </div>\n  </HashRouter>\n)\n\nexport default AppRouter\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './styles/index.scss';\nimport AppRouter from './components/AppRouter';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<AppRouter/>, document.getElementById('root'));\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}