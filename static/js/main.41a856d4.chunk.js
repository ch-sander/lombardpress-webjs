(this["webpackJsonplombardpress-web.js"]=this["webpackJsonplombardpress-web.js"]||[]).push([[0],{100:function(e,t,a){e.exports=a(266)},263:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(51),s=a.n(r),o=a(12),l=a(40),c=a(14),u=a(90),p=a(17),h="https://sparql-docker.scta.info/ds/query",d=a(21);var f=function(e){var t=Object(d.b)().t;return i.a.createElement("div",{className:"Home"},i.a.createElement(c.a,{id:"lbp-home",fluid:!0},i.a.createElement(c.a,null,i.a.createElement(u.a,{id:"lbp-jumbo"},i.a.createElement("h1",null,t("Title")),i.a.createElement("p",null,t("Subtitle")),i.a.createElement(p.a,null,i.a.createElement(o.b,{className:"nav-link",to:"/text?resourceid=http://scta.info/resource/scta",style:{color:"black"}},t("Enter")))))))},m=a(19),v=a(18),g=a(16),T=a.n(g),b=a(15),E=a.n(b);function y(e){return new Promise((function(t){var a=new XMLHttpRequest;if(a.open("GET",e),"undefined"===typeof XSLTProcessor)try{a.responseType="msxml-document"}catch(n){console.log("error",n)}a.onload=function(){t(this.responseXML)},a.send()}))}function w(e,t){return new Promise((function(a,n){Promise.all([y(e),y(t)]).then((function(e){var t=new XSLTProcessor;if(t.importStylesheet(e[1]),e[0]){var i=t.transformToFragment(e[0],document);a(i)}else{var r=new Error("xml document could not be retrieved");n(r)}}))}))}function x(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}function O(e){return T.a.get(h,{params:{query:e,output:"json"}})}function C(e,t){var a=E()("#"+e);t&&(a.addClass("highlightNone"),E()(".paragraphnumber").removeClass("highlight2"),E()(".plaoulparagraph").removeClass("highlightNone"),E()(".plaoulparagraph").removeClass("highlight"),a.children(".paragraphnumber").addClass("highlight2"),a.addClass("highlight"),setTimeout((function(){a.addClass("highlightNone")}),2e3)),a.length>0&&E()("html, body").stop().animate({scrollTop:a.offset().top-100},1e3)}var k=a(42);var S=function(){return i.a.createElement("div",{className:"spinner",style:{padding:"20px 5px"}},i.a.createElement(k.a,{animation:"grow",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")),i.a.createElement(k.a,{animation:"grow",variant:"primary"}),i.a.createElement(k.a,{animation:"grow",variant:"secondary"}),i.a.createElement(k.a,{animation:"grow",variant:"success"}),i.a.createElement(k.a,{animation:"grow",variant:"danger"}),i.a.createElement(k.a,{animation:"grow",variant:"warning"}),i.a.createElement(k.a,{animation:"grow",variant:"info"}))},L=a(20),I=function(e,t){if(t)switch(t.type){case"START_EXPRESSIONS_FETCH":return{};case"COMPLETE_EXPRESSIONS_FETCH":return Object(L.a)(t.expressions);default:return e}},j=function(e,t){var a="";e.searchWorkGroup&&(a=["<"+e.searchWorkGroup+"> <http://scta.info/property/hasExpression> ?expression ."].join(" "));var n="";e.expressionAuthorType&&(n=["?expression <http://www.loc.gov/loc.terms/relators/AUT> ?expressionAuthor . ","?expressionAuthor <http://scta.info/property/personType> <http://scta.info/resource/"+e.expressionAuthorType+"> ."].join(""));var i="";e.searchAuthor&&(i=["?expression <http://www.loc.gov/loc.terms/relators/AUT> <"+e.searchAuthor+"> ."].join(""));var r=["SELECT ?type ?expression ?expressionShortId ?expressionTitle ?author ?authorTitle ?workGroup ?workGroupTitle","WHERE { ","?expression a <http://scta.info/resource/expression> .","?expression a ?type .","?expression <http://scta.info/property/level> '1' . ",n,a,i,"?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","?expression <http://purl.org/dc/terms/isPartOf> ?workGroup .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .","}","ORDER BY ?expressionTitle"].join("");t({type:"START_EXPRESSIONS_FETCH"}),T.a.get(h,{params:{query:r,output:"json"}}).then((function(e){console.log("async firing");var a=e.data.results.bindings.map((function(e){return{expression:e.expression.value,expressionShortId:e.expressionShortId?e.expressionShortId.value:"",expressionTitle:e.expressionTitle.value,workGroup:e.workGroup?e.workGroup.value:"",workGroupTitle:e.workGroupTitle?e.workGroupTitle.value:"",author:e.author?e.author.value:"",authorTitle:e.author?e.authorTitle.value:"",type:e.type.value}}));t({type:"COMPLETE_EXPRESSIONS_FETCH",expressions:a})}))},F=function(e,t){if(t)switch(t.type){case"START_AUTHORS_FETCH":return{};case"COMPLETE_AUTHORS_FETCH":return Object(L.a)(t.authors);default:return e}},N=function(e,t){var a="";e.searchWorkGroup&&(a="<"+e.searchWorkGroup+"> <http://scta.info/property/hasExpression> ?resource .");var n=["SELECT DISTINCT ?author ?authorTitle ?authorShortId ","WHERE { ","?author a <http://scta.info/resource/person> .","?resource a <http://scta.info/resource/expression> .","?resource <http://scta.info/property/level> '1' .",a,"?resource <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://scta.info/property/shortId> ?authorShortId .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","ORDER BY ?authorTitle"].join("");t({type:"START_AUTHORS_FETCH"}),T.a.get(h,{params:{query:n,output:"json"}}).then((function(e){console.log("async firing");var a=e.data.results.bindings.map((function(e){return{author:e.author.value,authorShortId:e.authorShortId.value,authorTitle:e.authorTitle.value}}));t(function(e){return{type:"COMPLETE_AUTHORS_FETCH",authors:e}}(a))}))},A=function(e,t){if(t)switch(t.type){case"START_WORK_GROUPS_LIST_FETCH":return{};case"COMPLETE_WORK_GROUPS_LIST_FETCH":return Object(L.a)(t.workGroups);default:return e}},P=function(e,t){var a="";e.searchAuthor&&(a=["?workGroup <http://scta.info/property/hasExpression> ?expression .","?expression <http://www.loc.gov/loc.terms/relators/AUT> <"+e.searchAuthor+"> ."].join(""));var n=["SELECT DISTINCT ?workGroup ?workGroupTitle ","WHERE { ","?workGroup a <http://scta.info/resource/workGroup> .","?workGroup <http://purl.org/dc/elements/1.1/title> ?workGroupTitle .",a,"}","ORDER BY ?workGroupTitle"].join(" ");t({type:"START_WORK_GROUPS_LIST_FETCH"}),T.a.get(h,{params:{query:n,output:"json"}}).then((function(e){console.log("async firing workGroups");var a=e.data.results.bindings.map((function(e){return{workGroup:e.workGroup.value,workGroupTitle:e.workGroupTitle.value}}));t(function(e){return{type:"COMPLETE_WORK_GROUPS_LIST_FETCH",workGroups:e}}(a))}))},_=function(e){var t=Object(n.useState)(e.searchType?e.searchType:"questionTitles"),a=Object(m.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),c=l[0],u=l[1],h=Object(n.useState)(e.searchAuthor),d=Object(m.a)(h,2),f=d[0],g=d[1],T=Object(n.useState)(e.searchEid),b=Object(m.a)(T,2),E=b[0],y=b[1],w=Object(n.useState)(e.searchWorkGroup),x=Object(m.a)(w,2),O=x[0],C=x[1],k=Object(n.useReducer)(I,[]),S=Object(m.a)(k,2),L=S[0],_=S[1],M=Object(n.useReducer)(F,[]),D=Object(m.a)(M,2),R=D[0],W=D[1],U=Object(n.useReducer)(A,[]),H=Object(m.a)(U,2),q=H[0],V=H[1],G={searchTerm:c,searchAuthor:f,searchEid:E,searchWorkGroup:O,searchType:r},B=Object(n.useState)(!1),z=Object(m.a)(B,2),Q=z[0],X=z[1];return Object(n.useEffect)((function(){s(e.searchType?e.searchType:"questionTitles")}),[e.searchType]),Object(n.useEffect)((function(){g(e.searchAuthor)}),[e.searchAuthor]),Object(n.useEffect)((function(){y(e.searchEid)}),[e.searchEid]),Object(n.useEffect)((function(){C(e.searchWorkGroup)}),[e.searchWorkGroup]),Object(n.useEffect)((function(){e.handleSetSearchParameters(G)}),[c,f,E,O,r]),Object(n.useEffect)((function(){console.log("mount asyn firing"),_(j(G,_)),W(N(G,W)),V(P(G,V))}),[]),Object(n.useEffect)((function(){_(j(G,_)),V(P(G,V))}),[f]),Object(n.useEffect)((function(){_(j(G,_)),W(N(G,W))}),[O]),i.a.createElement("div",null,i.a.createElement(v.a.Group,null,e.showLabels&&i.a.createElement(v.a.Label,null,"Search Term"),i.a.createElement(v.a.Control,{as:"input",type:"text",placeholder:"search term",onChange:function(e){return u(e.target.value)},value:G.searchTerm})),Q&&i.a.createElement("div",null,i.a.createElement(v.a.Group,null,i.a.createElement(v.a.Label,null,"Search Type"),i.a.createElement(v.a.Control,{as:"select",onChange:function(e){s(e.target.value)},value:G.searchType},i.a.createElement("option",{value:"questionTitles"},"Questions Titles"),i.a.createElement("option",{value:"text"},"Text"))),i.a.createElement(v.a.Group,null,i.a.createElement(v.a.Label,null,"Work Group"),i.a.createElement(v.a.Control,{as:"select",onChange:function(e){C(e.target.value)},value:G.searchWorkGroup},i.a.createElement("option",{value:""},"All"),q&&q.map((function(e,t){return i.a.createElement("option",{key:e.workGroup+"-"+t,value:e.workGroup},e.workGroupTitle)})))),i.a.createElement(v.a.Group,null,i.a.createElement(v.a.Label,null,"Author"),i.a.createElement(v.a.Control,{as:"select",onChange:function(e){g(e.target.value)},value:G.searchAuthor},i.a.createElement("option",{value:""},"All"),R&&R.map((function(e,t){return i.a.createElement("option",{key:e.author+"-"+t,value:e.author},e.authorTitle)})))),i.a.createElement(v.a.Group,null,i.a.createElement(v.a.Label,null,"Text"),i.a.createElement(v.a.Control,{as:"select",onChange:function(e){y(e.target.value)},value:G.searchEid},i.a.createElement("option",{value:""},"All"),L&&L.map((function(e,t){return i.a.createElement("option",{key:e.expression+"-"+t,value:e.expression},e.authorTitle,": ",e.expressionTitle)}))))),e.showAdvancedParameters&&i.a.createElement(p.a,{onClick:function(){X(!Q)}},Q?"Hide":"Show"," Filter Options"))};function M(e,t){var a="https://exist.scta.info/exist/apps/scta-app/jsonsearch/json-search-text-by-expressionid.xq?query="+e+"&expressionid="+("all"===t?t:t.split("/resource/")[1]);return T.a.get(a)}var D=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),r=a[0],s=a[1],l=Object(n.useState)([]),u=Object(m.a)(l,2),h=u[0],d=u[1],f=function(e){if(e.preventDefault(),r.searchTerm)if("text"===r.searchType){if(d("fetching"),r.searchEid)M(r.searchTerm,r.searchEid).then((function(e){d(e.data.results)}));else if(r.searchAuthor){(function(e,t){var a="https://exist.scta.info/exist/apps/scta-app/jsonsearch/json-search-text-by-authorid.xq?query="+e+"&authorid="+t.split("/resource/")[1];return T.a.get(a)})(r.searchTerm,r.searchAuthor).then((function(e){d(e.data.results)}))}else{M(r.searchTerm,"all").then((function(e){d(e.data.results)}))}}else{var t=O(function(e){var t=e.searchTerm,a="";e.searchWorkGroup&&(a=["BIND(<"+e.searchWorkGroup+"> AS ?workGroup) .","?workGroup <http://scta.info/property/hasExpression> ?topLevel ."].join(" "));var n="";e.searchAuthor&&(n="BIND(<"+e.searchAuthor+"> AS ?author).");var i="";return e.searchEid&&(i="BIND(<"+e.searchEid+"> AS ?topLevel)."),["SELECT ?resource ?qtitle ?resourceTitle ?structureType ?longTitle ?author ?authorTitle","WHERE","{","?resource <http://scta.info/property/questionTitle> ?qtitle  .","?resource <http://purl.org/dc/elements/1.1/title> ?resourceTitle .","?resource <http://scta.info/property/structureType> ?structureType .","?resource <http://scta.info/property/longTitle> ?longTitle .",i,"?resource <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel .",n,"?topLevel <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .",a,"FILTER (REGEX(STR(?qtitle), '"+t+"', 'i')) .","}"].join(" ")}(r));d("fetching"),t.then((function(e){d(e.data.results.bindings)}))}else d([])};return i.a.createElement(c.a,{className:e.hidden?"hidden":"showing"},i.a.createElement(v.a,{onSubmit:f},i.a.createElement(_,{handleSetSearchParameters:function(e){s(e)},searchAuthor:e.searchAuthor,searchEid:e.searchEid,searchWorkGroup:e.searchWorkGroup,showAdvancedParameters:e.showAdvancedParameters,showLabels:e.showLabels,searchType:e.searchType}),i.a.createElement("br",null),e.showSubmit&&i.a.createElement(p.a,{onClick:f},"Submit")),function(e){return"fetching"===e?i.a.createElement(S,null):"questionTitles"===r.searchType?function(e,t){return e.map((function(e,a){return i.a.createElement("div",{key:e.resource.value+"-"+a},i.a.createElement("p",null,i.a.createElement(o.b,{to:"/text?resourceid="+e.author.value},e.authorTitle.value),": ",i.a.createElement(o.b,{to:"/text?resourceid="+e.resource.value},e.longTitle.value)),i.a.createElement("p",null,e.qtitle.value.toLowerCase().replace(t.searchTerm.toLowerCase(),t.searchTerm.toUpperCase())))}))}(e,r):"text"===r.searchType?function(e){return e?e.length>1?e.map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("p",null,i.a.createElement(o.b,{to:"/text?resourceid=http://scta.info/resource/"+e.pid},e.pid)),i.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.text}}))})):e?i.a.createElement("div",{key:e.pid},i.a.createElement("p",null,i.a.createElement(o.b,{to:"/text?resourceid=http://scta.info/resource/"+e.pid},e.pid)),i.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.text}})):i.a.createElement("div",null,i.a.createElement("p",null,"No results")):i.a.createElement("div",null,i.a.createElement("p",null,"No results found"))}(e):void 0}(h))};D.defaultProps={showLabels:!0,showAdvancedParameters:!0,searchAuthor:"",searchEid:"",showSubmit:!0};var R=a(6),W=a(7),U=a(10),H=a(8),q=a(2),V=a(9),G=a(64),B=a.n(G),z=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).getPdf=a.getPdf.bind(Object(q.a)(a)),a.state={status:"",pdf:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"getPdf",value:function(e){var t=this;T.a.get("https://print.lombardpress.org/api/v1/resource?url="+e).then((function(e){if(console.log(e),e.data.url){console.log("first condition passed",e.data.url);var a=e.data.url;t.setState({pdf:"http://print.lombardpress.org/api/v1/cache/"+a})}else t.setState({status:e.data.Status+"Please check back in a few minutes",pdf:""})}))}},{key:"componentDidMount",value:function(){var e=this.props.url;this.getPdf(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.url;t!==this.props.url&&this.getPdf(t)}},{key:"render",value:function(){return i.a.createElement("div",{style:{width:"100vh",height:"100vh",margin:"auto"}},this.state.pdf?i.a.createElement("object",{data:this.state.pdf,type:"application/pdf",width:"100%",height:"100%"},"alt : ",i.a.createElement("a",{href:this.state.pdf},this.state.pdf)):i.a.createElement("p",null,this.state.status))}}]),t}(i.a.Component);var Q=function(e){var t="";if(e.coords){var a=e.coords.split(",");t=parseInt(a[0])+","+a[1]+","+parseInt(a[2])+","+a[3]}var n=e.imageUrl+"/"+t+"/"+e.displayWidth+",/0/default.jpg";return i.a.createElement("img",{alt:"manuscript",src:n})};var X=function(e){return i.a.createElement("div",{className:"text",style:{whiteSpace:"nowrap"}},i.a.createElement("span",null,e.number)," ",i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}))},Y=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).state={searchText:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:this.props.targetLabel===this.props.label?"ImageTextWrapper target":"ImageTextWrapper"},i.a.createElement("div",{className:"labelImageWrapper"},i.a.createElement(Q,{imageUrl:this.props.imageUrl,canvas:this.props.canvas,coords:this.props.coords,canvasShort:this.props.canvasShort,displayWidth:this.props.displayWidth})),i.a.createElement(X,{text:this.props.text,number:this.props.number+1}))}}]),t}(n.Component);function J(e){return["SELECT DISTINCT ?title ?structureType ?cmanifestation ?cmanifestationTitle ?manifestation ?manifestationTitle ?ctranscription ?manifestationCTranscription ?cdoc ?cxml ?expressionShortId ?longTitle ?topLevelExpression ?next ?previous ?inbox ?author ?authorTitle ","WHERE { ","<"+e+"> <http://purl.org/dc/elements/1.1/title> ?title .","<"+e+"> <http://scta.info/property/structureType> ?structureType .","<"+e+"> <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation .","?cmanifestation <http://purl.org/dc/elements/1.1/title> ?cmanifestationTitle .","<"+e+"> <http://scta.info/property/hasManifestation> ?manifestation .","?manifestation <http://purl.org/dc/elements/1.1/title> ?manifestationTitle .","?manifestation <http://scta.info/property/hasCanonicalTranscription> ?manifestationCTranscription .","?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription .","?ctranscription <http://scta.info/property/hasDocument> ?cdoc . ","?ctranscription <http://scta.info/property/hasXML> ?cxml . ","<"+e+"> <http://scta.info/property/shortId> ?expressionShortId .","<"+e+"> <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .","OPTIONAL {","<"+e+"> <http://scta.info/property/longTitle> ?longTitle .","}","OPTIONAL {","?topLevelExpression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","OPTIONAL {","<"+e+"> <http://scta.info/property/next> ?next .","}","OPTIONAL {","<"+e+"> <http://scta.info/property/previous> ?previous .","}","<"+e+"> <http://www.w3.org/ns/ldp#inbox> ?inbox . ","}","ORDER BY ?title"].join("")}function K(e){return["SELECT DISTINCT ?title ?description ?part ?partTitle ?partQuestionTitle ?partType ?partLevel ","WHERE { ","<"+e+"> <http://purl.org/dc/elements/1.1/title> ?title .","<"+e+"> <http://purl.org/dc/elements/1.1/description> ?description .","<"+e+"> <http://purl.org/dc/terms/hasPart> ?part .","?part <http://purl.org/dc/elements/1.1/title> ?partTitle .","?part <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?partType . ","OPTIONAL {","?part <http://scta.info/property/questionTitle> ?partQuestionTitle .","}","OPTIONAL {","?part <http://scta.info/property/level> ?partLevel .","}","OPTIONAL {","?part <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","}","}","ORDER BY ?totalOrderNumber"].join("")}function Z(e){return["SELECT DISTINCT ?surfaceTitle ?isurface ?isurfaceTitle ?icodexTitle ?canvas ?imageurl ?next_surface ?previous_surface ","{","<"+e+"> <http://purl.org/dc/elements/1.1/title> ?surfaceTitle .","<"+e+"> <http://scta.info/property/hasISurface> ?isurface .","OPTIONAL {","<"+e+"> <http://scta.info/property/next> ?next_surface .","}","OPTIONAL {","<"+e+"> <http://scta.info/property/previous> ?previous_surface .","}","OPTIONAL {","?isurface <http://purl.org/dc/elements/1.1/title> ?isurfaceTitle .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?icodex <http://purl.org/dc/elements/1.1/title> ?icodexTitle .","}","?isurface <http://scta.info/property/hasCanvas> ?canvas .","OPTIONAL{","?canvas <http://iiif.io/api/presentation/2#hasImageAnnotations> ?blank .","}","OPTIONAL{","?canvas <http://www.w3.org/2003/12/exif/ns#height> ?c_height .","}","?blank <http://www.w3.org/1999/02/22-rdf-syntax-ns#first> ?o .","?o <http://www.w3.org/ns/oa#hasBody> ?o2 .","OPTIONAL{","?o2 <http://rdfs.org/sioc/services#has_service> ?imageurl .","}","OPTIONAL{","?o2 <http://www.shared-canvas.org/ns/hasRelatedService> ?imageurl .","}","}"].join("")}var $=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).mount=!1,a.handleNext=a.handleNext.bind(Object(q.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(q.a)(a)),a.handleLineFocusNext=a.handleLineFocusNext.bind(Object(q.a)(a)),a.handleLineFocusPrev=a.handleLineFocusPrev.bind(Object(q.a)(a)),a.isLineNumberLast=a.isLineNumberLast.bind(Object(q.a)(a)),a.isLineNumberFirst=a.isLineNumberFirst.bind(Object(q.a)(a)),a.handleToggleTextLines=a.handleToggleTextLines.bind(Object(q.a)(a)),a.handleToggleAllLines=a.handleToggleAllLines.bind(Object(q.a)(a)),a.state={currentSurfaceId:"",manifest:"",canvas:"",region:"full",width:"1000",next:"",previous:"",imageurl:"",annotationsDisplay:!0,showAllLines:!1},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleNext",value:function(){this.props.handleSurfaceFocusChange(this.state.next)}},{key:"handlePrevious",value:function(){this.props.handleSurfaceFocusChange(this.state.previous)}},{key:"handleToggleTextLines",value:function(){this.setState((function(e){return{annotationsDisplay:!e.annotationsDisplay}}))}},{key:"handleToggleAllLines",value:function(){this.setState((function(e){return{showAllLines:!e.showAllLines}}))}},{key:"retrieveSurfaceInfo",value:function(e){var t=this;O(Z(e)).then((function(a){var n=a.data.results.bindings[0];if(n){var i="https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid="+e.split("/resource/")[1];T.a.get(i).then((function(a){t.mount&&t.setState({currentSurfaceId:e,surfaceTitle:n.surfaceTitle.value,manifest:"",canvas:n.canvas.value,imageurl:n.imageurl.value,next:n.next_surface?n.next_surface.value:"",previous:n.previous_surface?n.previous_surface.value:"",annotations:a.data?a.data.resources:""})})).catch((function(a){console.log("failed retrieving annotationlist: ",a),t.mount&&t.setState({currentSurfaceId:e,surfaceTitle:n.surfaceTitle.value,manifest:"",canvas:n.canvas.value,imageurl:n.imageurl.value,next:n.next_surface?n.next_surface.value:"",previous:n.previous_surface?n.previous_surface.value:"",annotations:""})}))}}))}},{key:"handleLineFocusNext",value:function(){var e=parseInt(this.props.lineFocusId.split("/")[this.props.lineFocusId.split("/").length-1]),t=this.props.lineFocusId.split("/");t.pop(),t.push((e+1).toString()),this.props.handleLineFocusChange(t.join("/"))}},{key:"handleLineFocusPrev",value:function(){var e=parseInt(this.props.lineFocusId.split("/")[this.props.lineFocusId.split("/").length-1]),t=this.props.lineFocusId.split("/");t.pop(),t.push((e-1).toString()),this.props.handleLineFocusChange(t.join("/"))}},{key:"isLineNumberFirst",value:function(){return 1===parseInt(this.props.lineFocusId.split("/")[this.props.lineFocusId.split("/").length-1])}},{key:"isLineNumberLast",value:function(){var e=this.state.annotations.length;return parseInt(this.props.lineFocusId.split("/")[this.props.lineFocusId.split("/").length-1])===e}},{key:"componentDidMount",value:function(){this.mount=!0,this.props.surfaceid&&this.retrieveSurfaceInfo(this.props.surfaceid),this.setState({annotationsDisplay:this.props.annotationsDisplay})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.surfaceid!==this.props.surfaceid&&this.retrieveSurfaceInfo(e.surfaceid)}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=this;return i.a.createElement(c.a,{className:this.props.hidden?"hidden":"showing"},this.state.currentSurfaceId?i.a.createElement("div",null,i.a.createElement("div",{className:"surface-navigation"},i.a.createElement("p",null,this.state.surfaceTitle),this.props.handleSurfaceFocusChange&&i.a.createElement("div",null,this.state.previous&&i.a.createElement(p.a,{size:"sm",onClick:this.handlePrevious},"Previous Page"),this.state.next&&i.a.createElement(p.a,{size:"sm",onClick:this.handleNext},"Next Page")),this.props.handleLineFocusChange&&!this.state.showAllLines&&i.a.createElement("div",null,!this.isLineNumberFirst()&&i.a.createElement(p.a,{size:"sm",onClick:this.handleLineFocusPrev},"Previous Line"),!this.isLineNumberLast()&&i.a.createElement(p.a,{size:"sm",onClick:this.handleLineFocusNext},"Next Line")),i.a.createElement("div",null,this.props.lineFocusId&&i.a.createElement(p.a,{size:"sm",onClick:this.handleToggleAllLines},"Toggle All/Focus Lines"),this.state.annotations&&i.a.createElement(p.a,{size:"sm",onClick:this.handleToggleTextLines},"Toggle Show Text Lines"))),function(){if(e.state.annotations&&e.state.annotationsDisplay)return e.state.annotations.map((function(t,a){var n=t.resource.chars,r=t.on.split("#xywh=")[0],s=r.split("/")[r.split("/").length-1],o=t.on.split("#xywh=")[1],l=t.imageUrl,c=t.label;return e.state.showAllLines||parseInt(e.props.lineFocusId.split("/")[e.props.lineFocusId.split("/").length-1])===a+1||!e.props.lineFocusId?i.a.createElement(Y,{key:a,imageUrl:l,canvas:r,coords:o,canvasShort:s,text:n,label:c,number:a,targetLabel:e.props.targetLabel,surfaceButton:!1,displayWidth:e.props.width?e.props.width:e.state.width}):null}));var t=e.props.width?e.props.width:e.state.width;return i.a.createElement("img",{alt:"manuscript",src:e.state.imageurl+"/"+e.state.region+"/"+t+",/0/default.jpg"})}()):i.a.createElement("p",null,"No surface selected"))}}]),t}(i.a.Component);$.defaultProps={annotationsDisplay:!0};var ee=$,te=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).mounted="",a.handleNext=a.handleNext.bind(Object(q.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(q.a)(a)),a.state={region:"full",surfaces:[]},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleNext",value:function(){this.props.handleSurfaceFocusChange(this.state.next)}},{key:"handlePrevious",value:function(){this.props.handleSurfaceFocusChange(this.state.previous)}},{key:"retrieveSurfaceInfo",value:function(e){var t=this;O(["SELECT ?first ?last ?order ?surface","{","<"+e+"> <http://scta.info/property/isOnZone> ?zone . ","?zone <http://scta.info/property/isOnZone> ?zone2 .","?zone2 <http://scta.info/property/firstLine> ?first .","?zone2 <http://scta.info/property/lastLine> ?last .","?zone2 <http://scta.info/property/isPartOfSurface> ?surface .","?zone <http://scta.info/property/isOnZoneOrder> ?order .","}"].join("")).then((function(e){e.data.results.bindings.forEach((function(e){var a=e.surface.value,n=e.first.value,i=e.last.value,r=e.order.value;O(Z(a)).then((function(e){var s=e.data.results.bindings[0];if(s){var o="https://exist.scta.info/exist/apps/scta-app/folio-annotaiton-list-from-simpleXmlCoordinates.xq?surfaceid="+a.split("/resource/")[1];T.a.get(o).then((function(e){t.mounted&&t.setState((function(t){var o={currentSurfaceId:a,surfaceTitle:s.surfaceTitle?s.surfaceTitle.value:"",canvas:s.canvas.value,imageurl:s.imageurl.value,next:s.next_surface?s.next_surface.value:"",previous:s.previous_surface?s.previous_surface.value:"",annotations:e.data?e.data.resources:"",surfaceid:a,firstLine:n,lastLine:i,order:r};return{surfaces:[].concat(Object(L.a)(t.surfaces),[o])}}))})).catch((function(e){console.log("failed retrieving annotationlist: ",e),t.mounted&&t.setState((function(e){var t={currentSurfaceId:a,surfaceTitle:s.surfaceTitle.value,canvas:s.canvas.value,imageurl:s.imageurl.value,next:s.next_surface?s.next_surface.value:"",previous:s.previous_surface?s.previous_surface.value:"",annotations:"",surfaceid:a,firstLine:n,lastLine:i,order:r};return{surfaces:[].concat(Object(L.a)(e.surfaces),[t])}}))}))}}))}))}))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.props.manifestationid&&this.setState((function(e){return{surfaces:[]}}),this.retrieveSurfaceInfo(this.props.manifestationid))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.manifestationid!==this.props.manifestationid&&this.setState((function(e){return{surfaces:[]}}),this.retrieveSurfaceInfo(e.manifestationid))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=function(t){if(t.annotations&&"lines"===e.props.annotationsDisplay)return t.annotations.map((function(a,n){if(n+1>=t.firstLine&&n<t.lastLine){var r=a.resource.chars,s=a.on.split("#xywh=")[0],o=s.split("/")[s.split("/").length-1],l=a.on.split("#xywh=")[1],c=a.imageUrl,u=a.label;return i.a.createElement(Y,{key:n,imageUrl:c,canvas:s,coords:l,canvasShort:o,text:r,label:u,targetLabel:e.props.targetLabel,surfaceButton:!1,displayWidth:e.props.width})}return null}));if(t.annotations&&"paragraph"===e.props.annotationsDisplay){var a=t.annotations[t.firstLine-1],n=t.annotations[t.firstLine-1],r=n?n.on.split("#xywh=")[0]:"",s=r.split("/")[r.split("/").length-1],o=n?n.on.split("#xywh=")[1]:"",l=o.split(",")[1],c=t.annotations[t.lastLine-1],u=c?c.on.split("#xywh=")[1]:"",p=u.split(",")[1],h=u.split(",")[3],d=parseInt(p)+parseInt(h)-parseInt(l),f=(parseInt(o.split(",")[0])>10?parseInt(o.split(",")[0])-10:parseInt(o.split(",")[0]))+","+parseInt(l)+","+(parseInt(o.split(",")[2])+10)+","+(parseInt(d)+50),m=a?a.imageUrl:"";return m?i.a.createElement(Y,{key:t.currentSurfaceId+"-"+t.order,imageUrl:m,canvas:r,coords:f,canvasShort:s,text:"",label:"",targetLabel:"",surfaceButton:!1,displayWidth:e.props.width}):i.a.createElement("p",{key:t.currentSurfaceId+"-"+t.order},"Sorry, this image is not yet ready")}return i.a.createElement("img",{key:t.currentSurfaceId+"-"+t.order,alt:"manuscript",src:t.imageurl+"/full/"+e.props.width+",/0/default.jpg"})};return i.a.createElement(c.a,{className:this.props.hidden?"hidden":"showing"},e.state.surfaces.sort((function(e,t){return e.order>t.order?1:t.order>e.order?-1:0})).map((function(e){return t(e)})))}}]),t}(i.a.Component);te.defaultProps={width:"501"};var ae=te,ne=a(5),ie=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleChangeManifestation=a.handleChangeManifestation.bind(Object(q.a)(a)),a.handleToggleTextLinesView=a.handleToggleTextLinesView.bind(Object(q.a)(a)),a.state={focusedManifestation:"",annotationsDisplay:"lines"},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleTextLinesView",value:function(e){this.props.handleToggleTextLinesView?this.props.handleToggleTextLinesView(e):this.setState((function(t){return{annotationsDisplay:e}}))}},{key:"handleChangeManifestation",value:function(e){e.preventDefault(),this.props.handleChangeManifestation?this.props.handleChangeManifestation(e.target.value):this.setState({focusedManifestation:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;this.props.manifestations&&this.setState((function(t){return{focusedManifestation:e.props.focusedManifestation,annotationsDisplay:e.props.annotationsDisplay}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.focusedManifestation!==this.props.focusedManifestation&&this.setState((function(t){return{focusedManifestation:e.focusedManifestation}})),e.annotationsDisplay!==this.props.annotationsDisplay&&this.setState((function(t){return{annotationsDisplay:e.annotationsDisplay}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement("div",{className:"manifestationsList"},i.a.createElement(v.a.Control,{as:"select",onChange:this.handleChangeManifestation,value:this.state.focusedManifestation},e.props.manifestations.map((function(e){return i.a.createElement("option",{key:"title-"+e.manifestation,value:e.manifestation},e.manifestationTitle)})))),i.a.createElement("div",{className:"surfaceWrapper"},this.state.focusedManifestation&&i.a.createElement("div",{className:"image-display-choice"},i.a.createElement("p",null,i.a.createElement("span",{title:"Text Line View",onClick:function(){e.handleToggleTextLinesView("lines")}},i.a.createElement(ne.q,null))),i.a.createElement("p",null,i.a.createElement("span",{title:"Paragraph View",onClick:function(){e.handleToggleTextLinesView("paragraph")}},i.a.createElement(ne.r,null))),i.a.createElement("p",null,i.a.createElement("span",{title:"Full Surface View",onClick:function(){e.handleToggleTextLinesView("surface")}},i.a.createElement(ne.n,null)))),i.a.createElement("div",{className:"imagesDisplay"},e.props.manifestations.map((function(t){return t.manifestation===e.state.focusedManifestation?i.a.createElement(ae,{key:"surface-"+t.manifestation,manifestationid:t.manifestation,annotationsDisplay:e.state.annotationsDisplay,width:e.props.width}):null})))))}}]),t}(i.a.Component);ie.defaultProps={manifestations:[],hidden:!1,focusedManifestation:"",annotationsDisplay:"paragraph",width:"500"};var re=ie,se=a(269),oe=a(94),le=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).mount=!1,a.retrieveXML=a.retrieveXML.bind(Object(q.a)(a)),a.state={xmlstring:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"retrieveXML",value:function(e){var t=this,a="https://exist.scta.info/exist/apps/scta-app/document/"+e.split("/resource/")[1];T.a.get(a).then((function(e){t.mount&&t.setState({xmlstring:e.data})}))}},{key:"componentDidMount",value:function(){this.mount=!0,this.props.tresourceid&&this.retrieveXML(this.props.tresourceid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.tresourceid!==this.props.tresourceid&&this.retrieveXML(e.tresourceid)}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement(se.a,{language:"xml",style:oe.docco,showLineNumbers:!0},this.state.xmlstring))}}]),t}(i.a.Component),ce=a(13);var ue=function(e){return i.a.createElement(ce.a,{variant:"tabs"},e.focusSet&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"citation"===e.windowLoad,title:"Text Citation",onClick:function(){e.handleTabChange("citation",e.windowId)}},i.a.createElement(ne.p,null))),e.focusSet&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"surface3"===e.windowLoad,title:"Images",onClick:function(){e.handleTabChange("surface3",e.windowId)}},i.a.createElement(ne.s,null))),i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"xml"===e.windowLoad,title:"Text XML Source",onClick:function(){e.handleTabChange("xml",e.windowId)}},i.a.createElement(ne.h,null))),e.focusSet&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"textCompare"===e.windowLoad,title:"Text Comparisons",onClick:function(){e.handleTabChange("textCompare",e.windowId)}},i.a.createElement(ne.o,null))),e.focusSet&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"comments"===e.windowLoad,title:"Comments",onClick:function(){e.handleTabChange("comments",e.windowId)}},i.a.createElement(ne.i,null))),i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"textOutlineWrapper"===e.windowLoad,title:"Text Outline",onClick:function(){e.handleTabChange("textOutlineWrapper",e.windowId)}},i.a.createElement(ne.a,null))),i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{active:"search"===e.windowLoad,title:"Text Search",onClick:function(){e.handleTabChange("search",e.windowId)}},i.a.createElement(ne.x,null))),"minimum"!==e.openWidthHeight&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{title:"Minimize Window",onClick:function(){e.handleMinimize(e.windowId)}},i.a.createElement(ne.v,null))),"middle"!==e.openWidthHeight&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{title:"Half Size Window",onClick:function(){e.handleMiddlize(e.windowId)}},i.a.createElement(ne.w,null))),"maximum"!==e.openWidthHeight&&i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{title:"Maximize Window",onClick:function(){e.handleMaximize(e.windowId)}},i.a.createElement(ne.u,null))),i.a.createElement(ce.a.Item,null,i.a.createElement(ce.a.Link,{title:"Close Window",onClick:function(){e.handleClose(e.windowId)}},i.a.createElement(ne.t,null))),i.a.createElement(ce.a.Item,null,!e.altWindowState&&i.a.createElement(ce.a.Link,{title:"Clone Window",onClick:function(){e.handleDuplicateWindow(e.windowId,e.windowType)}},i.a.createElement(ne.g,null))))};var pe=function(e){return e.info?i.a.createElement(ce.a,{variant:"tabs"},i.a.createElement(ce.a.Link,{onClick:function(){e.handleBlockFocusChange(e.info.resourceid)}},e.info.title),i.a.createElement(ce.a.Item,null,e.info.previous&&"http://scta.info/resource/"!==e.info.previous&&i.a.createElement(ce.a.Link,{onClick:function(){e.handleBlockFocusChange(e.info.previous)}},i.a.createElement(ne.b,null))),i.a.createElement(ce.a.Item,null,e.info.next&&"http://scta.info/resource/"!==e.info.next&&i.a.createElement(ce.a.Link,{onClick:function(){e.handleBlockFocusChange(e.info.next)}},i.a.createElement(ne.c,null)))):null},he=a(99),de=a(95),fe=a.n(de),me=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleToggleShow=a.handleToggleShow.bind(Object(q.a)(a)),a.handleToggleCompare=a.handleToggleCompare.bind(Object(q.a)(a)),a.mounted="",a.state={showCompare:!0,compareText:"",rawText:"",show:!0,levenshteinDistance:void 0},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleShow",value:function(){this.setState((function(e){return{show:!e.show}}))}},{key:"handleToggleCompare",value:function(){this.setState((function(e){return{showCompare:!e.showCompare}}))}},{key:"textClean",value:function(e){return e.replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"").replace(/\s{2,}/g," ").toLowerCase()}},{key:"createCompare",value:function(e,t){var a=this;T.a.get("https://exist.scta.info/exist/apps/scta-app/csv-pct.xq?resourceid="+t).then((function(t){var n=new fe.a.diff_match_patch,i=n.diff_main(a.textClean(e),a.textClean(t.data));n.diff_cleanupSemantic(i);var r=n.diff_levenshtein(i),s=n.diff_prettyHtml(i);!0===a.mounted&&e?a.setState({compareText:s,rawText:t.data,levenshteinDistance:r}):a.mounted&&a.setState({rawText:t.data})}))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.setState({rawText:"",compareText:""}),this.createCompare(this.props.base,this.props.compareTranscription)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.base===this.props.base&&e.compareTranscription===this.props.compareTranscription||(this.setState({rawText:"",compareText:""}),this.createCompare(e.base,e.compareTranscription))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return function(){var t=e.props.base===e.state.rawText;if(e.state.showCompare&&e.props.base&&e.state.compareText){var a=e.state.levenshteinDistance,n=5*a;return i.a.createElement("div",{style:{borderLeft:"5px solid rgba("+n+", 0, 255, 1)",paddingLeft:"5px"}},i.a.createElement("span",null,i.a.createElement(o.b,{to:"/text?resourceid="+e.props.compareTranscription},e.props.compareTranscription)," "),i.a.createElement("span",{className:"lbp-span-link",title:"show/hide",onClick:function(){return e.handleToggleShow()}},e.state.show?i.a.createElement(ne.m,null):i.a.createElement(ne.l,null)),i.a.createElement("span",{className:"lbp-span-link",title:"toggle comparison off",onClick:function(){return e.handleToggleCompare()}},i.a.createElement(ne.A,null)),!t&&i.a.createElement("span",{className:"lbp-span-link",title:"set as base",onClick:function(){return e.props.handleChangeBase(e.state.rawText)}},i.a.createElement(ne.y,null)),i.a.createElement("span",{style:{fontSize:"14px",paddingLeft:"4px"},title:"levenshtein distance"},a),i.a.createElement("div",{className:e.state.show?"unhidden":"hidden"},i.a.createElement("div",{ref:"text",dangerouslySetInnerHTML:{__html:e.state.compareText}})))}return e.state.rawText?i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement(o.b,{to:"/text?resourceid="+e.props.compareTranscription},e.props.compareTranscription))," |",i.a.createElement("span",{className:"lbp-span-link",title:"show/hide",onClick:function(){return e.handleToggleShow()}},e.state.show?i.a.createElement(ne.m,null):i.a.createElement(ne.l,null)),i.a.createElement("span",{className:"lbp-span-link",title:"toggle comparison on",onClick:function(){return e.handleToggleCompare()}},i.a.createElement(ne.z,null)),!t&&i.a.createElement("span",{className:"lbp-span-link",title:"set as base",onClick:function(){return e.props.handleChangeBase(e.state.rawText)}},i.a.createElement(ne.y,null)),i.a.createElement("div",{className:e.state.show?"unhidden":"hidden"},i.a.createElement("div",{ref:"text",dangerouslySetInnerHTML:{__html:e.state.rawText}}))):i.a.createElement(S,null)}()}}]),t}(i.a.Component),ve=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleToggleShowAll=a.handleToggleShowAll.bind(Object(q.a)(a)),a.mounted="",a.state={info:"",show:!1,baseText:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleShowAll",value:function(){this.setState((function(e){return{show:!e.show}}))}},{key:"arrangeTextInfo",value:function(e,t){var a=this;e.then((function(e){var n=e.data.results.bindings[0],i=e.data.results.bindings.map((function(e){return{manifestation:e.manifestation.value,manifestationTitle:e.manifestationTitle.value,transcription:e.manifestationCTranscription.value}}));!0===a.mounted&&n&&a.setState({info:{resourceid:t,title:n.title.value,structureType:n.structureType.value,inbox:n.inbox.value,next:n.next?n.next.value:"",previous:n.previous?n.previous.value:"",cdoc:n.cdoc.value,cxml:n.cxml.value,topLevel:n.topLevelExpression.value,cmanifestation:n.cmanifestation.value,ctranscription:n.ctranscription.value,manifestations:i}})}))}},{key:"getTextInfo",value:function(e){var t=O(J(e));this.arrangeTextInfo(t,e)}},{key:"componentDidMount",value:function(){this.mounted=!0,this.setState({show:this.props.show,baseText:this.props.baseText}),this.props.isMainText?this.setState({info:this.props.info}):this.getTextInfo(this.props.expressionid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.info.resourceid!==e.info.resourceid&&(this.setState({baseText:e.baseText}),e.isMainText?this.setState({info:e.info}):this.getTextInfo(e.expressionid))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("span",null,this.props.relationLabel)," ",i.a.createElement(o.b,{to:"/text?resourceid="+this.state.info.resourceid},this.state.info.resourceid),i.a.createElement("span",{onClick:function(){return e.handleToggleShowAll()}},this.state.show?i.a.createElement(ne.m,null):i.a.createElement(ne.l,null))),i.a.createElement("div",{className:this.state.show?"unhidden":"hidden"},function(){if(e.state.info.manifestations)return e.state.info.manifestations.map((function(t){return i.a.createElement(me,{key:t.transcription,base:e.props.baseText,compareTranscription:t.transcription,handleChangeBase:e.props.handleChangeBase,show:e.state.show})}))}()))}}]),t}(i.a.Component),ge=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleCompare=a.handleToggleCompare.bind(Object(q.a)(a)),a.handleChangeBase=a.handleChangeBase.bind(Object(q.a)(a)),a.getText=a.getText.bind(Object(q.a)(a)),a.mounted="",a.state={expressions:{},baseText:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleChangeBase",value:function(e){this.setState({baseText:e})}},{key:"handleToggleCompare",value:function(e){this.setState((function(t){var a=Object(he.a)({},t.expressions);return a[e].show=!a[e].show,{expressions:a}}))}},{key:"getText",value:function(e){var t=this;T.a.get("https://exist.scta.info/exist/apps/scta-app/csv-pct.xq?resourceid="+e).then((function(e){t.setState({baseText:e.data})}))}},{key:"componentDidMount",value:function(){if(this.props.info&&this.props.info.relatedExpressions){this.getText(this.props.info.ctranscription);var e={};e[this.props.info.resourceid]={id:this.props.info.resourceid,show:!0},this.props.info.relatedExpressions.forEach((function(t){e[t.resourceid]={id:t.resourceid,relationLabel:t.relationLabel,show:!1}})),this.setState({expressions:e})}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.info.resourceid!==e.info.resourceid&&this.props.info.relatedExpressions){this.props.info.ctranscription!==e.info.ctranscription&&this.getText(e.info.ctranscription);var t={};t[e.info.resourceid]={id:e.info.resourceid,show:!0},e.info.relatedExpressions.forEach((function(e){t[e.resourceid]={id:e.resourceid,relationLabel:e.relationLabel,show:!1}})),this.setState({expressions:t})}}},{key:"render",value:function(){var e=this;return i.a.createElement(c.a,{className:this.props.hidden?"hidden":"showing"},i.a.createElement("h4",null,"Text Comparisons"),function(){var t=e.state.expressions;return Object.keys(t).map((function(a){var n=e.props.info.resourceid===t[a].id;return i.a.createElement("div",{key:e.state.expressions[a].id},i.a.createElement(ve,{info:e.props.info,expressionid:t[a].id,relationLabel:t[a].relationLabel,isMainText:n,handleChangeBase:e.handleChangeBase,baseText:e.state.baseText,show:t[a].show}))}))}(),i.a.createElement("hr",null),i.a.createElement("div",null,i.a.createElement("p",null,"Other Comparison/Connection Visualizations"),i.a.createElement("p",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://lombardpress.org/collation-vizualizer/index.html?id="+this.props.info.resourceid},"Collation Overlay")),i.a.createElement("p",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://scta.github.io/networks-explorer/?resourceid="+this.props.info.resourceid},"View Reference Connections")),i.a.createElement("p",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://scta.github.io/networks-explorer/topicconnections.html?resourceid="+this.props.info.resourceid},"View Topic Connections"))))}}]),t}(i.a.Component),Te=a(38);var be=function(e){var t=Object(d.b)().t,a=Object(n.useState)(""),r=Object(m.a)(a,2),s=r[0],o=r[1];return i.a.createElement(v.a,{onSubmit:function(t){t.preventDefault(),e.submitComment(s),o("")}},i.a.createElement(Te.a,{type:"text",id:"comment",value:s,placeholder:t("comment"),className:"mr-sm-2",onChange:function(e){o(e.target.value)}}),i.a.createElement("hr",null),i.a.createElement(p.a,{type:"submit",block:!0},t("Submit")))};var Ee=function(e){var t=Object(d.b)().t,a=Object(n.useState)(!1),r=Object(m.a)(a,2),s=r[0],l=r[1];return i.a.createElement("div",null,!e.focused&&i.a.createElement("p",null,t("For"),": ",i.a.createElement(o.b,{to:"/text?resourceid="+e.comment.target},e.comment.target)),s?i.a.createElement(be,{submitComment:function(t){e.updateComment(e.comment.id,t),l(!1)},comment:e.comment.body.value}):i.a.createElement("p",null,i.a.createElement("span",null,e.comment.body.value),"| ",e.comment.created&&e.comment.created.split("T")[0],"| ",i.a.createElement("span",{className:"lbp-span-link",onClick:function(){e.removeComment(e.comment.id)}},i.a.createElement(ne.B,null)),"| ",i.a.createElement("span",{className:"lbp-span-link",onClick:function(){return l(!0)}},i.a.createElement(ne.j,null))),i.a.createElement("hr",null))},ye=a(53),we=a.n(ye);var xe=function(e){var t=Object(d.b)().t,a=Object(n.useState)(JSON.parse(localStorage.getItem("sctaCommentsState"))||[]),r=Object(m.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(!0),u=Object(m.a)(l,2),h=u[0],f=u[1],v=Object(n.useState)(""),g=Object(m.a)(v,2),T=g[0],b=g[1],E=function(e){o(s.filter((function(t){return t.id!==e})))},y=function(e,t){s.filter((function(t){return t.id===e}))[0].body.value=t,o(Object(L.a)(s))};return Object(n.useEffect)((function(){localStorage.setItem("sctaCommentsState",JSON.stringify(s))})),i.a.createElement(c.a,{className:e.hidden?"hidden":"showing"},i.a.createElement(be,{submitComment:function(t){var a={"@context":"http://www.w3.org/ns/anno.jsonld",id:"http://inbox.scta.info/notifications/"+we()(),type:"Annotation",created:(new Date).toISOString(),motivation:"commenting",body:{type:"TextualBody",value:t},target:e.resourceid};o([].concat(Object(L.a)(s),[a])),b("")}}),i.a.createElement(Te.a,{style:{margin:"10px 0"},type:"text",value:T,placeholder:t("filter comments by text"),className:"mr-sm-2",onChange:function(e){b(e.target.value)}}),i.a.createElement(p.a,{style:{margin:"10px 0"},block:!0,onClick:function(){return f(!h)}},t(h?"Show All Comments":"Show Comments For Focused Passage")),i.a.createElement("div",null,s.slice(0).reverse().map((function(t,a){return h?t.target===e.resourceid&&t.body.value.includes(T)?i.a.createElement("div",{key:a},i.a.createElement(Ee,{comment:t,focused:!0,removeComment:E,updateComment:y})):null:t.target===e.resourceid&&t.body.value.includes(T)?i.a.createElement("div",{key:a,style:{borderLeft:"1px solid black"}},i.a.createElement(Ee,{comment:t,removeComment:E,updateComment:y})):t.body.value.includes(T)?i.a.createElement("div",{key:a},i.a.createElement(Ee,{comment:t,removeComment:E,updateComment:y})):null}))))},Oe=a(22),Ce=a.n(Oe),ke=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).state={eurl:"",etitle:"",murl:"",mtitle:"",turl:"",fetching:!1},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"retrieveCitation",value:function(e){var t,a=this;e&&(this.setState({fetching:!0}),O(["SELECT DISTINCT ?manifestation ?manifestationTitle ?manifestationSurface ?surfaceTitle ?codexTitle ?datasource ?eLongTitle ?author ?authorTitle ?expression ","{","<"+(t=e)+"> <http://scta.info/property/isTranscriptionOf> ?manifestation .","<"+t+"> <http://scta.info/property/hasDocument> ?datasource . ","?manifestation <http://purl.org/dc/elements/1.1/title> ?manifestationTitle .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .","OPTIONAL {","?expression <http://scta.info/property/longTitle> ?eLongTitle","}","OPTIONAL {","?topLevelExpression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","OPTIONAL","{","?manifestation <http://scta.info/property/isOnSurface> ?manifestationSurface .","?manifestationSurface <http://purl.org/dc/elements/1.1/title> ?surfaceTitle .","?surface <http://scta.info/property/order> ?surface_order .","?codex <http://scta.info/property/hasSurface> ?manifestationSurface .","?codex <http://purl.org/dc/elements/1.1/title> ?codexTitle .","}","}","ORDER BY ?surface_order"].join("")).then((function(t){var n=t.data.results.bindings;if(n.length>0){var i=n[0],r=i.expression?i.expression.value:"",s=i.manifestation?i.manifestation.value:"",o=i.eLongTitle?i.eLongTitle.value:"",l=i.authorTitle?i.authorTitle.value:"",c=i.authorTitle?i.author.value:"",u=i.datasource?i.datasource.value:"",p=i.codexTitle?i.codexTitle.value:"",h=i.surfaceTitle?i.surfaceTitle.value:"",d=n[n.length-1].surfaceTitle?n[n.length-1].surfaceTitle.value:"";a.setState({author:c,authorTitle:l,eurl:r,etitle:o,murl:s,mtitle:h!==d?p+", "+h+"-"+d:p+", "+h,turl:e,datasource:u,fetching:!1})}})))}},{key:"componentDidMount",value:function(){this.retrieveCitation(this.props.tresourceid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.tresourceid!==this.props.tresourceid&&this.retrieveCitation(e.tresourceid)}},{key:"render",value:function(){var e=this,t=this.state.authorTitle+", "+this.state.etitle+"("+this.state.mtitle+") Data source: "+this.state.datasource+".";return i.a.createElement(c.a,null,i.a.createElement("h4",null,"Citation"),this.state.fetching?i.a.createElement(S,null):i.a.createElement("div",null,i.a.createElement("p",{className:"etitle"},this.state.authorTitle,", ",this.state.etitle," (",i.a.createElement("a",{href:this.state.eurl,target:"_blank",rel:"noopener noreferrer"},this.state.eurl)," ",i.a.createElement("span",{className:"lbp-span-link",title:"Copy Citation to Clipboard",onClick:function(t){t.preventDefault(),x(e.state.eurl)}},i.a.createElement(ne.f,null)),")"),i.a.createElement("p",{className:"mtitle"},"(",this.state.mtitle," (",i.a.createElement("a",{href:this.state.murl,target:"_blank",rel:"noopener noreferrer"},this.state.murl)," ",i.a.createElement("span",{className:"lbp-span-link",title:"Copy Citation to Clipboard",onClick:function(t){t.preventDefault(),x(e.state.murl)}},i.a.createElement(ne.f,null)),"))"),i.a.createElement("p",{className:"ttitle"},"(Transcription Resource: ",i.a.createElement("a",{href:this.state.turl,target:"_blank",rel:"noopener noreferrer"},this.state.turl)," ",i.a.createElement("span",{className:"lbp-span-link",title:"Copy Citation to Clipboard",onClick:function(t){t.preventDefault(),x(e.state.turl)}},i.a.createElement(ne.f,null)),"; (Data source:",i.a.createElement("a",{href:this.state.datasource,target:"_blank",rel:"noopener noreferrer"}," ",this.state.datasource)," ",i.a.createElement("span",{className:"lbp-span-link",title:"Copy Citation to Clipboard",onClick:function(t){t.preventDefault(),x(e.state.datasource)}},i.a.createElement(ne.f,null)),")"),i.a.createElement("p",{className:"lbp-span-link",title:"Copy Citation to Clipboard",onClick:function(e){e.preventDefault(),x(t)}},i.a.createElement(ne.f,null)," Copy Full Citation to Clipboard")))}}]),t}(i.a.Component),Se=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).toggleCitationExplanation=a.toggleCitationExplanation.bind(Object(q.a)(a)),a.state={showCitationExplanation:!1},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"toggleCitationExplanation",value:function(){this.setState((function(e){return{showCitationExplanation:!e.showCitationExplanation}}))}},{key:"render",value:function(){return i.a.createElement(c.a,{className:"CitationExplanation"},i.a.createElement("p",{onClick:this.toggleCitationExplanation},this.state.showCitationExplanation?i.a.createElement("span",null,i.a.createElement(ne.d,null),"Hide Explanation of Citation Practices"):i.a.createElement("span",null,i.a.createElement(ne.e,null),"View Explanation of Citation Practices")," "),this.state.showCitationExplanation&&i.a.createElement("div",null,i.a.createElement("p",null,"The citation of a text that has survived through a historical succession of manifestations is a complicated endeavor. Today, when transcriptions of these manifestations can be published as data, separate from any presentation, and thereby can be presented in a variety of ways, a full citation inevitably becomes even more complex. In order to identify the content hierarchy of the text, the specifical material or born digital manifestation of that text, and the data sources used to represent and display that manifestation, specificity and precision are needed."),i.a.createElement("p",null,"Full citations therefore identify three aspects of the text currently being viewed."),i.a.createElement("p",{className:"etitle"},"First (blue) it identifies the idea of the paragraph in question situated within the conceptual hierarchy of the text."),i.a.createElement("p",{className:"mtitle"},"Second (red) it identifies the manifestation of the text in a historical or born digital edition."),i.a.createElement("p",{className:"ttitle"},"Third (purple) it identifies the transcription and transcription data source used to power the current text presentation.")))}}]),t}(i.a.Component),Le=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).toggleAlternativeManifestations=a.toggleAlternativeManifestations.bind(Object(q.a)(a)),a.state={showAlternativeManifestations:!0},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"toggleAlternativeManifestations",value:function(){this.setState((function(e){return{showAlternativeManifestations:!e.showAlternativeManifestations}}))}},{key:"render",value:function(){var e=this;return i.a.createElement(c.a,{className:"ManifestationList"},this.props.optionalDisplay?i.a.createElement("h4",{onClick:this.toggleAlternativeManifestations},this.state.showAlternativeManifestations?i.a.createElement("span",null,i.a.createElement(ne.d,null),"Hide Alternative Manifestations"):i.a.createElement("span",null,i.a.createElement(ne.e,null),"View Alternative Manifestations")," "):i.a.createElement("h4",null,"Alternative Manifestations"),this.state.showAlternativeManifestations&&function(){if(e.props.manifestations)return e.props.manifestations.map((function(t){return i.a.createElement("p",{key:t.manifestation},t.manifestationTitle," : ",i.a.createElement("span",{className:"lbp-span-link",onClick:function(){e.props.handleFocusChange(t.manifestation)}},t.manifestation))}))}())}}]),t}(i.a.Component);ke.propTypes={tresourceid:Ce.a.string.isRequired,manifestations:Ce.a.array,hidden:Ce.a.bool,handleFocusChange:Ce.a.func};var Ie=function(e){return i.a.createElement(c.a,{className:e.hidden?"CitationWrapper hidden":"CitationWrapper showing"},i.a.createElement(ke,{tresourceid:e.tresourceid}),i.a.createElement(Se,null),i.a.createElement("hr",null),i.a.createElement(Le,{manifestations:e.manifestations,handleFocusChange:e.handleFocusChange}))},je=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleToggleChildren=a.handleToggleChildren.bind(Object(q.a)(a)),a.mounted="",a.state={parts:[],showChildren:!1,isPartOf:{}},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleChildren",value:function(e){e.preventDefault(),this.setState((function(e){return{showChildren:!e.showChildren}}))}},{key:"retrieveParts",value:function(e){var t=this;O(function(e){return["SELECT ?part ?title ?level ?order ?structureType ?questionTitle ?author ?authorTitle ?isPartOf ?isPartOfTitle ","{","<"+e+"> <http://purl.org/dc/terms/hasPart> ?part . ","?part <http://purl.org/dc/elements/1.1/title> ?title .","OPTIONAL {","?isPartOf <http://purl.org/dc/terms/hasPart> <"+e+"> .","?isPartOf <http://purl.org/dc/elements/1.1/title> ?isPartOfTitle .","}","OPTIONAL {","?part <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","OPTIONAL","{","?part <http://scta.info/property/level> ?level .","}","OPTIONAL","{","?part <http://scta.info/property/structureType> ?structureType .","}","OPTIONAL","{","?part <http://scta.info/property/sectionOrderNumber> ?order .","}","OPTIONAL","{","?part <http://scta.info/property/questionTitle> ?questionTitle .","}","}","ORDER BY ?order"].join("")}(e)).then((function(e){var a=e.data.results.bindings.map((function(e){return{part:e.part.value,title:e.title.value,level:e.level?e.level.value:"",author:e.author?e.author.value:"",authorTitle:e.authorTitle?e.authorTitle.value:"",structureType:e.structureType?e.structureType.value:"",questionTitle:e.questionTitle?e.questionTitle.value:""}})),n={isPartOfId:"",isPartOfTitle:""};e.data.results.bindings[0]&&e.data.results.bindings[0].isPartOf&&(n.isPartOfId=e.data.results.bindings[0].isPartOf.value,n.isPartOfTitle=e.data.results.bindings[0].isPartOfTitle.value),t.mounted&&t.setState({parts:a,isPartOf:n})}))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.retrieveParts(this.props.resourceid),this.props.membersOf&&this.props.membersOf.includes(this.props.resourceid)&&this.setState({showChildren:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.resourceid!==this.props.resourceid&&this.retrieveParts(this.props.resourceid),e.resourceid===this.props.resourceid&&e.membersOf===this.props.membersOf||e.membersOf&&e.membersOf.includes(e.resourceid)&&this.setState({showChildren:!0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,a=5*this.props.level;return i.a.createElement("div",{id:"outline",style:{paddingLeft:a+"px"}},i.a.createElement("p",{className:this.props.bold},this.state.isPartOf.isPartOfId&&this.props.showParentLink&&i.a.createElement(o.b,{to:"/text?resourceid="+this.state.isPartOf.isPartOfId},i.a.createElement(ne.e,null)),this.props.author&&this.props.showAuthor&&"1"===this.props.level&&i.a.createElement("span",null,i.a.createElement("span",null,this.props.authorTitle,": "),i.a.createElement(o.b,{to:"/text?resourceid="+this.props.author},i.a.createElement(ne.k,null))),this.props.title,this.props.questionTitle&&i.a.createElement("span",null,": ",this.props.questionTitle),this.state.parts.length>0&&!this.state.showChildren&&i.a.createElement("span",{className:"outlineArrow",onClick:this.handleToggleChildren},i.a.createElement(ne.d,null)),this.state.parts.length>0&&this.state.showChildren&&i.a.createElement("span",{className:"outlineArrow",onClick:this.handleToggleChildren},i.a.createElement(ne.e,null)),this.props.collectionLink&&i.a.createElement(o.b,{to:"/text?resourceid="+this.props.resourceid+this.props.mtFocus},i.a.createElement(ne.k,null))),this.state.showChildren&&e.state.parts.map((function(a){var n="";return e.props.membersOf&&(e.props.membersOf.includes(a.part)||a.part===e.props.focusResourceid)&&(n="bold"),i.a.createElement(t,{bold:n,key:a.part,focusResourceid:e.props.focusResourceid,showChildren:e.state.showChildren,resourceid:a.part,title:a.title,level:a.level,author:a.author,authorTitle:a.authorTitle,structureType:a.structureType,membersOf:e.props.membersOf,questionTitle:a.questionTitle,mtFocus:e.props.mtFocus,showAuthor:e.props.showAuthor,collectionLink:"http://scta.info/resource/structureCollection"!==a.structureType||e.props.collectionLink,showParentLink:!1})})))}}]),t}(i.a.Component),Fe=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).mounted="",a.state={membersOf:[]},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"retrieveMembersOf",value:function(e){var t=this;O(function(e){return["SELECT ?memberOf","{","<"+e+"> <http://scta.info/property/isMemberOf> ?memberOf . ","}"].join("")}(e)).then((function(e){var a=e.data.results.bindings.map((function(e){return e.memberOf.value}));t.mounted&&t.setState({membersOf:a})}))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.retrieveMembersOf(this.props.focusResourceid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.focusResourceid!==this.props.focusResourceid&&this.retrieveMembersOf(e.focusResourceid)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return i.a.createElement("div",{className:this.props.hidden?"hidden":"showing"},i.a.createElement(je,{key:this.props.resourceid,showChildren:!0,focusResourceid:this.props.focusResourceid,resourceid:this.props.resourceid,title:this.props.title,level:"1",structureType:"http://scta.info/resource/structureCollection",membersOf:this.state.membersOf,mtFocus:this.props.mtFocus,collectionLink:this.props.collectionLink,showAuthor:this.props.showAuthor,showParentLink:this.props.showParentLink}))}}]),t}(i.a.Component),Ne=a(96),Ae=a.n(Ne);var Pe=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).mounted=!1,a.state={tresourceid:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"getTranscriptionId",value:function(e){var t=this;O(["SELECT DISTINCT ?ctranscription ","WHERE { ","<"+e+"> <http://scta.info/property/hasCanonicalManifestation> ?manifestation .","?manifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription .","}"].join("")).then((function(e){t.mounted&&t.setState({tresourceid:e.data.results.bindings[0].ctranscription.value})})).catch((function(e){t.setState({tresourceid:""})}))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.getTranscriptionId(this.props.textPreviewResourceId)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.getTranscriptionId(e.textPreviewResourceId)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return i.a.createElement(c.a,{className:this.props.hidden?"hidden":"showing"},i.a.createElement("p",null,"Go to: ",i.a.createElement("span",{className:"lbp-span-link",onClick:function(){return e.props.handleFocusChange(e.state.tresourceid)}},this.state.tresourceid)),this.state.tresourceid&&i.a.createElement(Ae.a,{tresourceid:this.state.tresourceid}))}}]),t}(i.a.Component),_e=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleToggleTextLinesView=a.handleToggleTextLinesView.bind(Object(q.a)(a)),a.handleChangeManifestation=a.handleChangeManifestation.bind(Object(q.a)(a)),a.state={windowLoad:"",mountStatus:{textCompare:!1,surface3:!1,comments:!1,xml:!1,search:!1,textOutline:!1,citation:!1}},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleTextLinesView",value:function(e){this.props.handleToggleTextLinesView(this.props.windowId,e)}},{key:"handleChangeManifestation",value:function(e){var t=e.split("/resource/")[1].split("/")[1];this.props.handleChangeManifestation(this.props.windowId,t)}},{key:"componentDidMount",value:function(){this.setState({windowLoad:this.props.windowLoad})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={};if(e.info.resourceid!==this.props.info.resourceid)(t={textCompare:!1,surface3:!1,comments:!1,xml:!1,search:!1,textOutline:!1,citation:!1})[e.windowLoad]=!0;else if(e.windowLoad!==this.props.windowLoad){var a=this.state.mountStatus;a[e.windowLoad]=!0,t=a}else t=this.state.mountStatus;this.setState({windowLoad:e.windowLoad,mountStatus:t})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.windowType+" "+this.props.windowType+this.props.openWidthHeight},i.a.createElement(ue,{handleTabChange:this.props.handleTabChange,handleClose:this.props.handleClose,handleMinimize:this.props.handleMinimize,handleMaximize:this.props.handleMaximize,handleMiddlize:this.props.handleMiddlize,windowType:this.props.windowType,openWidthHeight:this.props.openWidthHeight,windowId:this.props.windowId,windowLoad:this.props.windowLoad,focus:this.props.resourceid,handleSwitchWindow:this.props.handleSwitchWindow,handleDuplicateWindow:this.props.handleDuplicateWindow,altWindowState:this.props.altWindowState,focusSet:!!this.props.info}),"surface2"!==this.state.windowLoad&&i.a.createElement(pe,{info:this.props.info,handleBlockFocusChange:this.props.handleBlockFocusChange}),i.a.createElement("div",null,e.props.info&&i.a.createElement("div",null,("textCompare"===e.state.windowLoad||e.state.mountStatus.textCompare)&&i.a.createElement(ge,{info:e.props.info,relatedExpressions:e.props.relatedExpressions,hidden:"textCompare"!==e.state.windowLoad}),("citation"===e.state.windowLoad||e.state.mountStatus.citation)&&i.a.createElement(Ie,{tresourceid:e.props.info.resourceid+e.props.mtFocus,manifestations:e.props.info.manifestations,handleFocusChange:e.props.handleFocusChange,hidden:"citation"!==e.state.windowLoad}),"surface2"===e.state.windowLoad&&i.a.createElement(ee,{surfaceid:e.props.surfaceid,lineFocusId:e.props.lineFocusId,topLevel:e.props.topLevel,handleSurfaceFocusChange:e.props.handleSurfaceFocusChange,handleLineFocusChange:e.props.handleLineFocusChange,hidden:"surface2"!==e.state.windowLoad}),("surface3"===e.state.windowLoad||e.state.mountStatus.surface3)&&i.a.createElement(re,{manifestations:e.props.info.manifestations,focusedManifestation:e.props.defaultManifestationSlug?e.props.resourceid+"/"+e.props.defaultManifestationSlug:e.props.resourceid+"/"+e.props.mtFocus.split("/")[1],annotationsDisplay:e.props.annotationsDisplay,handleToggleTextLinesView:e.handleToggleTextLinesView,handleChangeManifestation:e.handleChangeManifestation,width:"bottomWindow"===e.props.windowType?"1000":"501",hidden:"surface3"!==e.state.windowLoad}),("comments"===e.state.windowLoad||e.state.mountStatus.comments)&&i.a.createElement(xe,{resourceid:e.props.info.resourceid,hidden:"comments"!==e.state.windowLoad})),("xml"===e.state.windowLoad||e.state.mountStatus.xmls)&&i.a.createElement(le,{tresourceid:e.props.info?e.props.info.resourceid+e.props.mtFocus:e.props.itemFocus.expression+e.props.mtFocus,hidden:"xml"!==e.state.windowLoad}),i.a.createElement(Fe,{focusResourceid:e.props.info?e.props.info.resourceid:e.props.itemFocus.expression,resourceid:e.props.topLevel,title:e.props.topLevel,hidden:"textOutlineWrapper"!==e.state.windowLoad,mtFocus:e.props.mtFocus}),i.a.createElement(D,{hidden:"search"!==e.state.windowLoad,searchEid:e.props.topLevel,searchAuthor:e.props.info.author,searchType:"text",showSubmit:!0,showAdvancedParameters:!0,showLabels:!1}),"textPreview"===e.state.windowLoad&&i.a.createElement(Pe,{textPreviewResourceId:e.props.textPreviewResourceId,handleFocusChange:e.props.handleFocusChange,hidden:"textPreview"!==e.state.windowLoad})))}}]),t}(i.a.Component),Me=a(30),De=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).state={next:"",previous:"",mtFocus:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({next:e.next,previous:e.previous,mtFocus:e.mtFocus})}},{key:"render",value:function(){var e=this,t=this.props.t;return i.a.createElement(Me.a,{bg:"light",variant:"light",expand:"lg",fixed:"bottom"},i.a.createElement(Me.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Me.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(ce.a,null,this.props.previous&&i.a.createElement(o.c,{className:"nav-link",to:"/text?resourceid="+this.props.previous+this.props.mtFocus},t("Previous")),this.props.next&&i.a.createElement(o.c,{className:"nav-link",to:"/text?resourceid="+this.props.next+this.props.mtFocus},t("Next")),this.props.topLevel&&i.a.createElement(o.c,{className:"nav-link",to:"/text?resourceid="+this.props.topLevel},t("Text Home")),this.props.pdfView?i.a.createElement("span",{className:"nav-link",onClick:function(){return e.props.handleTogglePdfView()}},t("Web View")):i.a.createElement("span",{className:"nav-link",onClick:function(){return e.props.handleTogglePdfView()}},t("Print View")))))}}]),t}(i.a.Component),Re=Object(d.c)()(De),We=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).retrieveText=a.retrieveText.bind(Object(q.a)(a)),a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"retrieveText",value:function(e,t,a){var n=this;if(e){var i=this.props.doc,r=this.props.topLevel,s=i.split("/master/")[1],o=r.split("/resource/")[1];w(i.includes("ipfs")?i:"https://exist.scta.info/exist/apps/scta-app/text/"+o+"/"+s,"/xslt/main_view.xsl").then((function(e){document.getElementById("text").innerHTML="",document.getElementById("text").appendChild(e),E()(".paragraphnumber").click((function(e){e.preventDefault();var t=E()(this).parent("p").attr("id");n.props.setFocus(t),n.props.openWindow("window1")})),a&&C(a,!0),E()(".js-show-folio-image").click((function(e){e.preventDefault();var t=E()(this).attr("data-surfaceid"),a=E()(this).closest(".plaoulparagraph").attr("id");n.props.setFocus(a),n.props.handleSurfaceFocusChange("http://scta.info/resource/"+t),n.props.openWindow("window2","surface2")})),E()(".lbp-line-number").click((function(e){e.preventDefault();var t=E()(this).attr("data-surfaceid"),a=E()(this).attr("data-ln"),i=E()(this).closest(".plaoulparagraph").attr("id");n.props.setFocus(i),n.props.handleSurfaceFocusChange("http://scta.info/resource/"+t),n.props.handleLineFocusChange("http://scta.info/resource/"+t+"/"+a),n.props.openWindow("window2","surface2")})),E()(".appnote, .footnote").click((function(e){e.preventDefault();var t=E()(this).parent().children(".appnote, .footnote"),a=E()(t).attr("href"),n=E()(a).html(),i=E()(this).parent().children(".note-display").attr("data-target-id");i&&(E()("#"+i).toggleClass("highlight"),E()("span[data-corresp="+i+"]").toggleClass("highlight"));var r=E()(this).parent().children(".note-display");r.toggleClass("hidden"),r.html(n)})),E()(document).on("click",".show-line-witness",(function(e){e.preventDefault();var t=E()(this).attr("data-surfaceid"),a=E()(this).attr("data-ln");console.log("sid",t);var i=E()(this).closest(".plaoulparagraph").attr("id");n.props.setFocus(i),n.props.handleSurfaceFocusChange("http://scta.info/resource/"+t),n.props.handleLineFocusChange("http://scta.info/resource/"+t+"/"+a),n.props.openWindow("window2","surface2")})),E()(document).on("click",".js-show-reference-paragraph",(function(e){e.preventDefault();var t=E()(this).attr("data-url"),a=E()(this).attr("data-target-paragraph");n.props.handleTextPreviewFocusChange(t),n.props.openWindow("window2","textPreview"),n.props.setFocus(a)}))})).catch((function(e){console.log("something went wrong",e),document.getElementById("text").innerHTML="",document.getElementById("text").innerHTML="<p>Apologies, the document is not able to be loaded at this time</p>"}))}}},{key:"componentDidUpdate",value:function(e,t){e.doc!==this.props.doc?this.retrieveText(this.props.doc,this.props.topLevel,this.props.scrollTo):this.props.scrollTo!==e.scrollTo&&C(this.props.scrollTo,!0)}},{key:"componentDidMount",value:function(){this.retrieveText(this.props.doc,this.props.topLevel,this.props.scrollTo)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"text"}))}}]),t}(i.a.Component),Ue=a(67),He=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).getVersionHistory=a.getVersionHistory.bind(Object(q.a)(a)),a.handleToggleShowVersions=a.handleToggleShowVersions.bind(Object(q.a)(a)),a.state={versions:[],currentVersion:"",showVersions:!1},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleShowVersions",value:function(){this.setState((function(e){return{showVersions:!e.showVersions}}))}},{key:"getVersionHistory",value:function(e){var t,a=this;O(["SELECT ?version ?version_shortId ?order_number ?version_label ?review ?doc","{","{","BIND(<"+(t=e)+"> as ?version) . ","?version <http://scta.info/property/shortId> ?version_shortId .","?version <http://scta.info/property/hasDocument> ?doc . ","?version <http://scta.info/property/versionOrderNumber> ?order_number .","?version <http://scta.info/property/versionLabel> ?version_label .","OPTIONAL {","?version <http://scta.info/property/hasReview> ?review .","}","}","UNION","{","<"+t+"> <http://scta.info/property/hasAncestor> ?version .","?version <http://scta.info/property/shortId> ?version_shortId .","?version <http://scta.info/property/hasDocument> ?doc . ","?version <http://scta.info/property/versionOrderNumber> ?order_number .","?version <http://scta.info/property/versionLabel> ?version_label .","OPTIONAL {","?version <http://scta.info/property/hasReview> ?review .","}","}","UNION","{","<"+t+"> <http://scta.info/property/hasDescendant> ?version .","?version <http://scta.info/property/shortId> ?version_shortId .","?version <http://scta.info/property/hasDocument> ?doc . ","?version <http://scta.info/property/versionOrderNumber> ?order_number .","?version <http://scta.info/property/versionLabel> ?version_label .","OPTIONAL {","?version <http://scta.info/property/hasReview> ?review .","}","}","}","ORDER BY DESC(?order_number)"].join("")).then((function(t){t.data.results.bindings.forEach((function(t,n){var i="https://dll-review-registry.scta.info/api/v1/reviews/?url="+t.doc.value+"?society=MAA";T()(i).then((function(n){var i=n.data,r={};i.length>0&&(r={img_url:i[0]["badge-url"],reviewid:i[0].id,ipfsHash:i[0]["ipfs-hash"],html_link:"https://dll-review-registry.scta.info/reviews/"+i[0].id+".html",rubric_link:i[0]["badge-rubric"],summary:i[0]["review-summary"]}),a.setState((function(a){var n={versionTranscription:t.version?t.version.value:"",versionLabel:t.version_label?t.version_label.value:"",versionOrderNumber:t.order_number?t.order_number.value:"",versionReview:t.review?t.review.value:"",versionDoc:t.doc?t.doc.value:"",versionReviewInfo:r};return{versions:[].concat(Object(L.a)(a.versions),[n]),currentVersion:e}}))}))}))}))}},{key:"componentDidMount",value:function(){this.props.transcriptionid&&this.getVersionHistory(this.props.transcriptionid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.transcriptionid!==this.props.transcriptionid&&this.setState({versions:[]},(function(){t.getVersionHistory(e.transcriptionid)}))}},{key:"render",value:function(){var e=this,t=this.props.t;return function(){if(e.state.versions){if(e.state.versions.length>1)return i.a.createElement(Ue.a,{variant:"info"},i.a.createElement("p",{onClick:e.handleToggleShowVersions},t("This Text Has Multiple Indexed Versions")),e.state.showVersions&&e.state.versions.map((function(a){var n=a.versionTranscription===e.state.currentVersion?"currentlyViewing":"";return i.a.createElement("p",{key:a.versionTranscription,className:n},n?i.a.createElement("span",null,a.versionLabel," ",t("(Currently Viewing)")):i.a.createElement("span",{className:"lbp-span-link",onClick:function(){e.props.handleFocusChange(a.versionTranscription)}},a.versionLabel),a.versionReviewInfo.html_link&&i.a.createElement("span",null," ",t("Peer Reviewed"),": ",i.a.createElement("a",{href:a.versionReviewInfo.html_link},i.a.createElement("img",{alt:"review",src:a.versionReviewInfo.img_url}))," "),i.a.createElement("span",{className:"small"}," ",t("Data Source"),": ",i.a.createElement("a",{href:a.versionDoc},a.versionDoc)," "))})));if(1===e.state.versions.length){var a=e.state.versions[0];return i.a.createElement(Ue.a,{variant:"info"},i.a.createElement("span",null,t("Version"),": ",a.versionLabel," | ",t("Data Source"),": ",i.a.createElement("a",{href:a.versionDoc},a.versionDoc)," "))}return null}return null}()}}]),t}(i.a.Component),qe=Object(d.c)()(He),Ve=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).mount=!1,a.openWindow=a.openWindow.bind(Object(q.a)(a)),a.setFocus=a.setFocus.bind(Object(q.a)(a)),a.setFocus2=a.setFocus2.bind(Object(q.a)(a)),a.handleTabChange=a.handleTabChange.bind(Object(q.a)(a)),a.handleClose=a.handleClose.bind(Object(q.a)(a)),a.handleMinimize=a.handleMinimize.bind(Object(q.a)(a)),a.handleMaximize=a.handleMaximize.bind(Object(q.a)(a)),a.handleMiddlize=a.handleMiddlize.bind(Object(q.a)(a)),a.handleSwitchWindow=a.handleSwitchWindow.bind(Object(q.a)(a)),a.handleDuplicateWindow=a.handleDuplicateWindow.bind(Object(q.a)(a)),a.handleSurfaceFocusChange=a.handleSurfaceFocusChange.bind(Object(q.a)(a)),a.handleLineFocusChange=a.handleLineFocusChange.bind(Object(q.a)(a)),a.handleToggleTextLinesView=a.handleToggleTextLinesView.bind(Object(q.a)(a)),a.handleChangeManifestation=a.handleChangeManifestation.bind(Object(q.a)(a)),a.handleTextPreviewFocusChange=a.handleTextPreviewFocusChange.bind(Object(q.a)(a)),a.handleTogglePdfView=a.handleTogglePdfView.bind(Object(q.a)(a)),a.state={doc:"",focus:"",mtFocus:"",itemFocus:"",surfaceid:"",lineFocusId:"",textPreviewResourceId:"",pdfView:!1,windows:{window1:{windowId:"window1",open:!1,windowLoad:"citation",position:"sideWindow",openWidthHeight:"middle",annotationsDisplay:"paragraph",defaultManifestationSlug:""},window2:{windowId:"window2",open:!1,windowLoad:"citation",position:"bottomWindow",openWidthHeight:"middle",annotationsDisplay:"paragraph",defaultManifestationSlug:""}}},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleTogglePdfView",value:function(){this.setState((function(e){return{pdfView:!e.pdfView}}))}},{key:"handleToggleTextLinesView",value:function(e,t){this.setState((function(a){var n=a.windows;return n[e].annotationsDisplay=t,{windows:n}}))}},{key:"handleChangeManifestation",value:function(e,t){this.setState((function(a){var n=a.windows;return n[e].defaultManifestationSlug=t,{windows:n}}))}},{key:"openWindow",value:function(e,t){this.state.windows[e].open&&this.state.windows[e].windowLoad===t||this.setState((function(a){var n=a.windows;return n[e].open=!0,t&&(n[e].windowLoad=t),{windows:n}}))}},{key:"handleClose",value:function(e){this.setState((function(t){var a=t.windows;return a[e].open=!1,{windows:a}})),C(this.state.blockFocus,!0)}},{key:"handleMinimize",value:function(e){this.setState((function(t){var a=t.windows;return a[e].openWidthHeight="minimum",{windows:a}}))}},{key:"handleMaximize",value:function(e){this.setState((function(t){var a=t.windows;return a[e].openWidthHeight="maximum",{windows:a}}))}},{key:"handleMiddlize",value:function(e){this.setState((function(t){var a=t.windows;return a[e].openWidthHeight="middle",{windows:a}}))}},{key:"handleSwitchWindow",value:function(e,t){this.setState((function(t){var a=t.windows;return"sideWindow"===a[e].position?a[e].position="bottomWindow":"bottomWindow"===a[e].position&&(a[e].position="sideWindow"),{windows:a}}))}},{key:"handleDuplicateWindow",value:function(e,t){this.setState((function(t){var a=t.windows,n="window1"===e?"window2":"window1";return"sideWindow"===a[e].position?(a[n].position="bottomWindow",a[n].open=!0):"bottomWindow"===a[e].position&&(a[n].position="sideWindow",a[n].open=!0),{windows:a}}))}},{key:"handleTabChange",value:function(e,t){this.setState((function(a){var n=a.windows;return n[t].windowLoad=e,{windows:n}}))}},{key:"handleSurfaceFocusChange",value:function(e){this.setState({surfaceid:e})}},{key:"handleLineFocusChange",value:function(e){this.setState({lineFocusId:e})}},{key:"handleTextPreviewFocusChange",value:function(e){this.setState({textPreviewResourceId:e})}},{key:"setFocus",value:function(e){var t=e.includes("http")?e+this.state.mtFocus:"http://scta.info/resource/"+e+this.state.mtFocus;this.props.handleUpdateUrlResource(t)}},{key:"setFocus2",value:function(e){this.props.handleUpdateUrlResource(e)}},{key:"retrieveFocusInfo",value:function(e){var t=e.includes("http")?e:"http://scta.info/resource/"+e,a=O(J(t));this.arrangeFocusInfo(a,t)}},{key:"arrangeFocusInfo",value:function(e,t){var a=this;e.then((function(e){var n,i=e.data.results.bindings[0],r=e.data.results.bindings.map((function(e){return{manifestation:e.manifestation.value,manifestationTitle:e.manifestationTitle.value,transcription:e.manifestationCTranscription.value}}));O(["SELECT DISTINCT ?isRelatedTo ?label ","WHERE { ","{","<"+(n=t)+"> ?o ?isRelatedTo .","?o a <http://scta.info/resource/textRelation> .","?o <http://www.w3.org/1999/02/22-rdf-syntax-ns#label> ?label . ","?isRelatedTo a <http://scta.info/resource/expression> .","}","UNION","{","<"+n+"> ?o ?p .","?o a <http://scta.info/resource/textRelation> .","?o <http://www.w3.org/1999/02/22-rdf-syntax-ns#label> ?label . ","?p a <http://scta.info/resource/quotation> .","?p <http://scta.info/property/source> ?isRelatedTo .","}","}"].join("")).then((function(e){var n=e.data.results.bindings.map((function(e){return{resourceid:e.isRelatedTo.value,relationLabel:e.label.value}}));a.mount&&a.setState({focus:{resourceid:t,title:i.title.value,longTitle:i.longTitle?i.longTitle.value:"",author:i.author?i.author.value:"",authorTitle:i.authorTitle?i.authorTitle.value:"",structureType:i.structureType.value,inbox:i.inbox.value,next:i.next?i.next.value:"",previous:i.previous?i.previous.value:"",cdoc:i.cdoc.value,cxml:i.cxml.value,topLevel:i.topLevelExpression.value,cmanifestation:i.cmanifestation.value,ctranscription:i.ctranscription.value,manifestations:r,relatedExpressions:n}})}))}))}},{key:"setItemFocus",value:function(e){var t=e.includes("http")?e:"http://scta.info/resource/"+e,a=O(["SELECT DISTINCT ?title ?manifestation ?doc ?xml ?expression ?expressionShortId ?longTitle ?topLevelExpression ?next ?previous ?inbox ?t ","WHERE { ","BIND(<"+t+"> as ?t) . ","?t <http://purl.org/dc/elements/1.1/title> ?title .","?t <http://scta.info/property/isTranscriptionOf> ?manifestation .","?t <http://scta.info/property/hasDocument> ?doc . ","?t <http://scta.info/property/hasXML> ?xml . ","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","?expression <http://scta.info/property/shortId> ?expressionShortId .","?expression <http://scta.info/property/longTitle> ?longTitle .","?expression <http://scta.info/property/isPartOfTopLevelExpression> ?topLevelExpression .","OPTIONAL {","?expression <http://scta.info/property/next> ?next .","}","OPTIONAL {","?expression <http://scta.info/property/previous> ?previous .","}","?expression <http://www.w3.org/ns/ldp#inbox> ?inbox . ","}","ORDER BY ?expressionTitle"].join(""));this.arrangeItemFocusInfo(a)}},{key:"arrangeItemFocusInfo",value:function(e){var t=this;e.then((function(e){var a=e.data.results.bindings[0];t.mount&&t.setState({itemFocus:{title:a.title.value,manifestation:a.manifestation.value,expression:a.expression.value,doc:a.doc.value,xml:a.xml.value,next:a.next?a.next.value:"",previous:a.previous?a.previous.value:"",inbox:a.inbox.value,topLevel:a.topLevelExpression.value,transcriptionid:a.t.value}})}))}},{key:"componentDidMount",value:function(){if(this.mount=!0,this.props.transcriptionid){this.setItemFocus(this.props.transcriptionid);var e=this.props.transcriptionid.split("/resource/")[1].split("/")[1],t=this.props.transcriptionid.split("/resource/")[1].split("/")[2];this.setState({mtFocus:"/"+e+"/"+t}),this.props.blockDivFocus&&this.retrieveFocusInfo(this.props.blockDivFocus)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.transcriptionid!==this.props.transcriptionid){this.setItemFocus(e.transcriptionid);var t=e.transcriptionid.split("/resource/")[1].split("/")[1],a=e.transcriptionid.split("/resource/")[1].split("/")[2];this.setState((function(e){var n=e.windows;return n.window1.defaultManifestationSlug="",n.window2.defaultManifestationSlug="",{mtFocus:"/"+t+"/"+a,windows:n}}))}e.blockDivFocus?e.blockDivFocus!==this.props.blockDivFocus&&this.retrieveFocusInfo(e.blockDivFocus):this.setState({focus:""})}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=this,t=this.state.pdfView?"hidden":"showing";return i.a.createElement("div",null,this.state.itemFocus&&i.a.createElement(qe,{transcriptionid:this.state.itemFocus.transcriptionid,handleFocusChange:this.setFocus2}),this.state.pdfView&&i.a.createElement(z,{url:this.state.itemFocus.doc}),i.a.createElement(c.a,{className:function(){var t=!1;return e.state.windows.window1.open&&"sideWindow"===e.state.windows.window1.position&&"middle"===e.state.windows.window1.openWidthHeight?t=!0:e.state.windows.window2.open&&"sideWindow"===e.state.windows.window2.position&&(t=!0),t}()?"lbp-text skinnyText "+t:"lbp-text fullText "+t},this.state.itemFocus&&i.a.createElement(We,{doc:this.state.itemFocus.doc,topLevel:this.state.itemFocus.topLevel,setFocus:this.setFocus,handleSurfaceFocusChange:this.handleSurfaceFocusChange,handleLineFocusChange:this.handleLineFocusChange,openWindow:this.openWindow,scrollTo:this.props.blockDivFocus?this.props.blockDivFocus.split("/resource/")[1]:this.props.itemid,handleTextPreviewFocusChange:this.handleTextPreviewFocusChange})),i.a.createElement(Re,{next:this.state.itemFocus&&this.state.itemFocus.next,previous:this.state.itemFocus&&this.state.itemFocus.previous,topLevel:this.state.itemFocus&&this.state.itemFocus.topLevel,handleClose:this.handleClose,pdfView:this.state.pdfView,handleTogglePdfView:this.handleTogglePdfView,mtFocus:this.state.mtFocus}),i.a.createElement("div",null,!this.state.pdfView&&Object.keys(e.state.windows).map((function(t){return e.state.windows[t].open?i.a.createElement(_e,{key:t,handleClose:e.handleClose,handleMinimize:e.handleMinimize,handleMaximize:e.handleMaximize,handleMiddlize:e.handleMiddlize,handleTabChange:e.handleTabChange,handleBlockFocusChange:e.setFocus,handleFocusChange:e.setFocus2,handleSurfaceFocusChange:e.handleSurfaceFocusChange,handleSwitchWindow:e.handleSwitchWindow,handleDuplicateWindow:e.handleDuplicateWindow,resourceid:e.state.focus?e.state.focus.resourceid:e.props.resourceid,windowType:e.state.windows[t].position,windowId:e.state.windows[t].windowId,windowLoad:e.state.windows[t].windowLoad,openWidthHeight:e.state.windows[t].openWidthHeight,surfaceid:e.state.surfaceid,lineFocusId:e.state.lineFocusId,info:e.state.focus,itemFocus:e.state.itemFocus,topLevel:e.state.itemFocus.topLevel,altWindowState:"window1"===e.state.windows[t].windowId?e.state.windows.window2.open:e.state.windows.window1.open,mtFocus:e.state.mtFocus,handleToggleTextLinesView:e.handleToggleTextLinesView,annotationsDisplay:e.state.windows[t].annotationsDisplay,handleChangeManifestation:e.handleChangeManifestation,defaultManifestationSlug:e.state.windows[t].defaultManifestationSlug,textPreviewResourceId:e.state.textPreviewResourceId,handleLineFocusChange:e.handleLineFocusChange}):null}))))}}]),t}(i.a.Component),Ge=(a(263),function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).retrieveText=a.retrieveText.bind(Object(q.a)(a)),a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"retrieveText",value:function(e,t,a){var n=this;if(e){var i=this.props.doc,r=i.split("/master/")[1].split("/")[1];w(i.includes("ipfs")||i.includes("zotero")?i:"https://exist.scta.info/exist/apps/scta-app/text/scta-articles/"+r,"http://scta.info/resource/timeline"===a?"/xslt/articles/timeline.xsl":"http://scta.info/resource/bibliography"===a?"/xslt/articles/bibliography.xsl":"http://scta.info/resource/biography"===a?"/xslt/articles/biography.xsl":"/xslt/articles/standard.xsl").then((function(e){document.getElementById("text").innerHTML="",document.getElementById("text").appendChild(e),E()(".appnote, .footnote").click((function(e){e.preventDefault()})),E()(".appnote, .footnote").parent().click((function(e){e.preventDefault();var t=E()(this).children(".appnote, .footnote"),a=E()(t).attr("href"),n=E()(a).html(),i=E()(this).children(".note-display").attr("data-target-id");i&&(E()("#"+i).toggleClass("highlight"),E()("span[data-corresp="+i+"]").toggleClass("highlight"));var r=E()(this).children(".note-display");r.toggleClass("hidden"),r.html(n)})),E()(document).on("click",".js-show-reference-paragraph",(function(e){e.preventDefault();var t=E()(this).attr("data-url"),a=E()(this).attr("data-target-paragraph");n.props.setFocus(a),n.props.handleTextPreviewFocusChange(t),n.props.openWindow("window2","textPreview")}))})).catch((function(e){console.log("something went wrong",e),document.getElementById("text").innerHTML="",document.getElementById("text").innerHTML="<p>Apologies, the document is not able to be loaded at this time</p>"}))}}},{key:"componentDidUpdate",value:function(e,t){e.doc!==this.props.doc?this.retrieveText(this.props.doc,this.props.scrollTo,this.props.articleType):this.props.scrollTo!==e.scrollTo&&C(this.props.scrollTo,!0)}},{key:"componentDidMount",value:function(){this.retrieveText(this.props.doc,this.props.scrollTo,this.props.articleType)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return i.a.createElement(c.a,null,i.a.createElement("div",{id:"text"}))}}]),t}(i.a.Component)),Be=a(46),ze=a(33),Qe=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).retrieveCollectionInfo=a.retrieveCollectionInfo.bind(Object(q.a)(a)),a.makeRequests=a.makeRequests.bind(Object(q.a)(a)),a.handleFilter=a.handleFilter.bind(Object(q.a)(a)),a.filter=i.a.createRef(),a.mount=!1,a.state={title:"",description:"",items:{},parts:{},filter:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleFilter",value:function(e){var t=e.target.value;this.setState({filter:t})}},{key:"arrangeParts",value:function(e){var t=this,a=this;e.then((function(e){var n=e.data.results.bindings,i=n[0].title.value,r=n[0].description.value,s={};n.forEach((function(e){var t=e.part.value;s[t]={id:e.part.value,title:e.partTitle.value,type:e.partType.value,questionTitle:e.partQuestionTitle?e.partQuestionTitle.value:null,level:e.partLevel?e.partLevel.value:"unknown"}})),t.mount&&a.setState({title:i,description:r,parts:s})}))}},{key:"arrangeItems",value:function(e){var t=this,a=this;e.then((function(e){var n=e.data.results.bindings,i={};n.forEach((function(e){var t=e.item.value;i[t]={title:e.itemTitle.value,id:e.item.value,type:e.itemType.value,questionTitle:e.itemQuestionTitle?e.itemQuestionTitle.value:null,author:e.itemAuthor?e.itemAuthor.value:null,authorTitle:e.itemAuthorTitle?e.itemAuthorTitle.value:null,next:e.next?e.next.value:null,previous:e.previous?e.previous.value:null,cm:e.cm?e.cm.value:null,cmTitle:e.cmTitle?e.cmTitle.value:null,ct:e.ct?e.ct.value:null,topLevel:e.topLevel?e.topLevel.value:null,doc:e.doc?e.doc.value:null}})),t.mount&&a.setState({items:i})})).catch((function(e){console.log(e)}))}},{key:"retrieveWorkGroupInfo",value:function(e){var t=O(["SELECT DISTINCT ?item ?itemTitle ?itemAuthor ?itemAuthorTitle ?itemType ","WHERE { ","<"+e+"> <http://scta.info/property/hasExpression> ?item .","?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?itemType . ","?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .","?item <http://www.loc.gov/loc.terms/relators/AUT> ?itemAuthor .","?itemAuthor <http://purl.org/dc/elements/1.1/title> ?itemAuthorTitle .","}","ORDER BY ?itemAuthorTitle"].join("")),a=O(K(e));this.arrangeParts(a),this.arrangeItems(t)}},{key:"retrieveCollectionInfo",value:function(e,t,a){var n=O(["SELECT DISTINCT ?item ?itemTitle ?topLevel ?itemQuestionTitle ?cm ?cmTitle ?ct ?next ?previous ?itemType ?doc ","WHERE { ","<"+a+"> <http://scta.info/property/hasStructureItem> ?item .","?item <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel .","?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .","?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?itemType . ","OPTIONAL {","?item <http://scta.info/property/questionTitle> ?itemQuestionTitle .","}","OPTIONAL","{","?item <http://scta.info/property/next> ?next .","}","OPTIONAL","{","?item <http://scta.info/property/previous> ?previous .","}","?item <http://scta.info/property/hasCanonicalManifestation> ?cm .","?item <http://scta.info/property/totalOrderNumber> ?totalOrderNumber .","?cm <http://purl.org/dc/elements/1.1/title> ?cmTitle .","?cm <http://scta.info/property/hasCanonicalTranscription> ?ct .","?ct <http://scta.info/property/hasDocument> ?doc .","}","ORDER BY ?totalOrderNumber"].join("")),i=O(K(e));this.arrangeParts(i),this.arrangeItems(n)}},{key:"makeRequests",value:function(e,t,a,n){"http://scta.info/resource/workGroup"===n?this.retrieveWorkGroupInfo(e,t,a):"http://scta.info/resource/structureCollection"===t&&this.retrieveCollectionInfo(e,t,a)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){this.mount=!0,this.setState({resourceid:this.props.resourceid}),this.makeRequests(this.props.resourceid,this.props.structureType,this.props.topLevel,this.props.type)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.resourceid!==this.props.resourceid&&(this.setState({resourceid:e.resourceid,filter:""}),this.makeRequests(e.resourceid,e.structureType,e.topLevel,e.type))}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){return i.a.createElement(c.a,{className:"collectionBody"},this.state.title&&i.a.createElement("h1",null,this.state.title),this.state.title&&i.a.createElement("p",{style:{textAlign:"center"}},this.state.description),i.a.createElement(Be.a,null,i.a.createElement(ze.a,{xs:9},i.a.createElement(c.a,null,i.a.createElement(Fe,{focusResourceid:this.state.resourceid,resourceid:this.state.resourceid,title:this.state.title,hidden:!1,mtFocus:"",collectionLink:!0,showAuthor:!0,showParentLink:!0}))),i.a.createElement(ze.a,null,i.a.createElement(c.a,null,i.a.createElement(D,{searchWorkGroup:this.props.resourceid,showSubmit:!0,showAdvancedParameters:!0,showLabels:!1})))))}}]),t}(i.a.Component),Xe=a(58);var Ye=function(e){return e.item?i.a.createElement("tr",null,e.item.author&&i.a.createElement("td",null,i.a.createElement(o.b,{to:"/text?resourceid="+e.item.author},e.item.authorTitle)),i.a.createElement("td",null,i.a.createElement(o.b,{to:"/text?resourceid="+e.item.id},e.item.title)),e.item.questionTitle?i.a.createElement("td",null,i.a.createElement(o.b,{to:"/text?resourceid="+e.item.id},e.item.questionTitle)):i.a.createElement("td",null)):null},Je=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).retrieveAuthorCollectionInfo=a.retrieveAuthorCollectionInfo.bind(Object(q.a)(a)),a.handleItemFilter=a.handleItemFilter.bind(Object(q.a)(a)),a.itemFilter=i.a.createRef(),a.mount=!1,a.state={authorTitle:"",authorArticles:[],textArticles:[],expressions:[],itemFilter:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleItemFilter",value:function(e){var t=e.target.value;this.setState({itemFilter:t})}},{key:"arrangeItems",value:function(e,t){var a=this;e.then((function(e){var n=e.data["@graph"].filter((function(e){return e["@id"]===t}))[0],i=n["http://purl.org/dc/elements/1.1/title"],r=null;Array.isArray(n.authorArticle)?r=n.authorArticle.map((function(t){return{id:t,title:e.data["@graph"].filter((function(e){return e["@id"]===t}))[0]["http://purl.org/dc/elements/1.1/title"]}})):n.authorArticle&&(r=[{id:n.authorArticle,title:e.data["@graph"].filter((function(e){return e["@id"]===n.authorArticle}))[0]["http://purl.org/dc/elements/1.1/title"]}]);var s=null;Array.isArray(n.textArticle)?s=n.textArticle.map((function(t){return{id:t,title:e.data["@graph"].filter((function(e){return e["@id"]===t}))[0]["http://purl.org/dc/elements/1.1/title"]}})):n.textArticle&&(s=[{id:n.textArticle,title:e.data["@graph"].filter((function(e){return e["@id"]===n.textArticle}))[0]["http://purl.org/dc/elements/1.1/title"]}]);var o=null;Array.isArray(n.hasTopLevelExpression)?o=n.hasTopLevelExpression.map((function(t){return{id:t,title:e.data["@graph"].filter((function(e){return e["@id"]===t}))[0]["http://purl.org/dc/elements/1.1/title"]}})):n.hasTopLevelExpression&&(o=[{id:n.hasTopLevelExpression,title:e.data["@graph"].filter((function(e){return e["@id"]===n.hasTopLevelExpression}))[0]["http://purl.org/dc/elements/1.1/title"]}]),a.mount&&a.setState({authorArticles:r,textArticles:s,expressions:o,authorTitle:i})})).catch((function(e){console.log(e)}))}},{key:"retrieveAuthorCollectionInfo",value:function(e){var t=O(["CONSTRUCT","{","?author  <http://purl.org/dc/elements/1.1/title> ?authorTitle ;","<http://scta.info/resource/hasTopLevelExpression> ?expression ;","<http://scta.info/property/authorArticle> ?authorArticle;","<http://scta.info/property/textArticle> ?textArticle .","?authorArticle <http://purl.org/dc/elements/1.1/title> ?authorArticleTitle . ","?textArticle <http://purl.org/dc/elements/1.1/title> ?textArticleTitle . ","?expression <http://purl.org/dc/elements/1.1/title> ?topLevelExpressionTitle .","}","WHERE ","{","BIND(<"+e+"> as ?author) . ","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","OPTIONAL","{","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?expression a <http://scta.info/resource/expression> .","?expression <http://scta.info/property/level> '1' .","?expression <http://purl.org/dc/elements/1.1/title> ?topLevelExpressionTitle .","}","OPTIONAL","{","?expression2 <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?textArticle <http://scta.info/property/isArticleOf> ?expression2 .","?textArticle <http://purl.org/dc/elements/1.1/title> ?textArticleTitle .","}","OPTIONAL","{","?authorArticle <http://scta.info/property/isArticleOf> ?author .","?authorArticle <http://purl.org/dc/elements/1.1/title> ?authorArticleTitle","}","}"].join(""));this.arrangeItems(t,e)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){this.mount=!0,this.retrieveAuthorCollectionInfo(this.props.resourceid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.refs.itemFilter?this.refs.itemFilter.value="":this.retrieveAuthorCollectionInfo(e.resourceid)}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"render",value:function(){var e=function(e){return e.map((function(e){return i.a.createElement(Ye,{key:e.id,item:e})}))};return i.a.createElement(c.a,{className:"collectionBody"},i.a.createElement("h1",null,this.state.authorTitle),i.a.createElement(Be.a,null,i.a.createElement(ze.a,{xs:9},this.state.expressions&&i.a.createElement(c.a,null,i.a.createElement("h1",null,"Expressions"),i.a.createElement("br",null),i.a.createElement(Xe.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,e(this.state.expressions)))),this.state.authorArticles&&i.a.createElement(c.a,null,i.a.createElement("h1",null,"Author Related Articles"),i.a.createElement("br",null),i.a.createElement(Xe.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,e(this.state.authorArticles)))),this.state.textArticles&&i.a.createElement(c.a,null,i.a.createElement("h1",null,"Text Related Articles"),i.a.createElement("br",null),i.a.createElement(Xe.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("tbody",null,e(this.state.textArticles))))),i.a.createElement(ze.a,null,i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(D,{searchAuthor:this.props.resourceid,showSubmit:!0,showAdvancedParameters:!0,showLabels:!1}))))}}]),t}(i.a.Component);var Ke=function(e){return i.a.createElement("div",{className:"comment"},"discussing"===e.n.motivation?i.a.createElement("p",null,e.n.body.value," at: ",i.a.createElement("a",{href:e.n.body.id,target:"_blank",rel:"noopener noreferrer"},e.n.body.id)):i.a.createElement("p",null,e.n&&e.n.body.value))},Ze=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleCommentUpdate=a.handleCommentUpdate.bind(Object(q.a)(a)),a.handleSubmitComment=a.handleSubmitComment.bind(Object(q.a)(a)),a.state={comment:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleCommentUpdate",value:function(e){e.preventDefault(),this.setState({comment:e.target.value})}},{key:"handleSubmitComment",value:function(e){e.preventDefault(),this.props.handleSumbitComment(this.state.comment)}},{key:"render",value:function(){return i.a.createElement("div",{className:"comment"},i.a.createElement(v.a,{onSubmit:this.handleSubmitComment},i.a.createElement(Te.a,{type:"text",id:"comment",placeholder:"comment",className:"mr-sm-2",onChange:this.handleCommentUpdate}),i.a.createElement("hr",null),i.a.createElement(p.a,{type:"submit",block:!0},"Submit")))}}]),t}(i.a.Component),$e=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleSumbitComment=a.handleSumbitComment.bind(Object(q.a)(a)),a.state={notifications:[],inbox:"",resourceid:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleSumbitComment",value:function(e){var t=this,a={"@context":"http://www.w3.org/ns/anno.jsonld",id:"http://inbox.scta.info/notifications/"+we()(),type:"Annotation",motivation:"commenting",body:{type:"TextualBody",value:e},target:this.state.resourceid};T()({method:"post",url:this.state.inbox,data:a,config:{headers:{"Content-Type":"application/json+ld"}}}).then((function(e){t.setState((function(e){return{notifications:[a].concat(Object(L.a)(e.notifications))}}))})).catch((function(e){console.log(e)}))}},{key:"retrieveComments",value:function(e){this.setState({notifications:[]},(function(){var t=this;T.a.get(e).then((function(e){e.data["ldp:contains"].forEach((function(e){T.a.get(e["@id"]).then((function(e){t.setState((function(t){return{notifications:[].concat(Object(L.a)(t.notifications),[e.data])}}))}))}))})).catch((function(e){console.log(e)}))}))}},{key:"componentDidMount",value:function(){this.props.resourceid&&(this.setState({inbox:this.props.inbox,resourceid:this.props.resourceid}),this.retrieveComments(this.props.inbox))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.resourceid!==this.props.resourceid&&(this.setState({inbox:e.inbox,resourceid:e.resourceid}),this.retrieveComments(e.inbox))}},{key:"render",value:function(){var e=this;return i.a.createElement(c.a,{className:this.props.hidden?"hidden":"showing"},i.a.createElement("h1",null,"Comments"),i.a.createElement(Ze,{handleSumbitComment:this.handleSumbitComment}),i.a.createElement("hr",null),i.a.createElement("div",null,i.a.createElement("h4",null,"Previous Comments"),e.state.notifications.map((function(e,t){return"commenting"===e.motivation?i.a.createElement(Ke,{key:"commenting-"+t,n:e}):null}))),i.a.createElement("hr",null),i.a.createElement("div",null,i.a.createElement("h4",null,"Web Discussions/Quotations"),e.state.notifications.map((function(e,t){return"discussing"===e.motivation?i.a.createElement(Ke,{key:"discussion-"+t,n:e}):null}))))}}]),t}(i.a.Component);var et=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleToggleRelatedDiscussion=a.handleToggleRelatedDiscussion.bind(Object(q.a)(a)),a.handleSurface3Manifestations=a.handleSurface3Manifestations.bind(Object(q.a)(a)),a.handleToggleShowQuery=a.handleToggleShowQuery.bind(Object(q.a)(a)),a.state={expressions:[],surfaceMap:{},showTextRegion:!1,showQuery:!1,query:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleShowQuery",value:function(){this.setState((function(e){return{showQuery:!e.showQuery}}))}},{key:"handleSurface3Manifestations",value:function(e,t){var a="";"object"===typeof e?a=e.map((function(e){return{manifestation:e,manifestationTitle:e.split("/resource/")[1],transcription:""}})):e&&(a=[{manifestation:e,manifestationTitle:e.split("/resource/")[1],transcription:""}]),this.setState((function(e){return{showTextRegion:t}})),this.props.handleSurface3Manifestations(a)}},{key:"handleToggleRelatedDiscussion",value:function(e){this.setState((function(t){var a=t.expressions.find((function(t){return t["@id"]===e}));return a.showComments=!a.showComments,{expressions:Object(L.a)(t.expressions)}}))}},{key:"handleToggleRelatedSurfaces",value:function(e){this.setState((function(t){var a=t.expressions.find((function(t){return t["@id"]===e}));return a.showRelatedSurfaces=!a.showRelatedSurfaces,{expressions:Object(L.a)(t.expressions)}}))}},{key:"retrieveSurfaceInfo",value:function(e){var t=this,a=function(e){return["CONSTRUCT","{","?expression <http://scta.info/property/hasManifestation> ?manifestation2 .","?manifestation2 <http://scta.info/property/isOnSurface> ?surface2 .","}","WHERE","{","?manifestation <http://scta.info/property/isOnSurface> <"+e+"> .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureBlock> .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://scta.info/property/hasManifestation> ?manifestation2 .","?manifestation2 <http://scta.info/property/isOnSurface> ?surface2 .","?codex <http://scta.info/property/hasSurface> ?surface2 .","}"].join("")}(e);O(a).then((function(e){if(e.data["@graph"]){var n=e.data["@graph"],i=n.filter((function(e){return e.hasManifestation?{expressionid:e["@id"],manifestations:e.hasManifestation,showComments:!1,showRelatedSurfaces:!1}:null})),r={};n.forEach((function(e){e.isOnSurface&&(r[e["@id"]]=e.isOnSurface)})),t.setState({expressions:i,surfaceMap:r,query:a})}}))}},{key:"componentDidMount",value:function(){this.retrieveSurfaceInfo(this.props.surfaceid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.surfaceid!==this.props.surfaceid&&this.retrieveSurfaceInfo(e.surfaceid)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"SurfaceInfo"},i.a.createElement("h1",null,"Page Info"),i.a.createElement("div",{style:{fontSize:"16px"}},i.a.createElement("h1",null,"Text objects on this page ",i.a.createElement(p.a,{size:"sm",clasName:"lbp-span-link",onClick:this.handleToggleShowQuery},this.state.showQuery?"Hide Proof":"Prove It!")),this.state.showQuery&&i.a.createElement("p",null,this.state.query),e.state.expressions.length>0?e.state.expressions.map((function(t){var a="";return a="object"===typeof t.hasManifestation?t.hasManifestation.map((function(t){return i.a.createElement("div",{key:t},i.a.createElement("span",null,t," ",i.a.createElement(o.b,{to:"/text?resourceid="+t},i.a.createElement(ne.k,null))),i.a.createElement("br",null),i.a.createElement("span",{style:{textIndent:"10px"}},"...Appearing on Surface ",e.state.surfaceMap[t]," ",i.a.createElement(o.b,{to:"/text?resourceid="+e.state.surfaceMap[t]},i.a.createElement(ne.k,null))),i.a.createElement("br",null),i.a.createElement("br",null))})):t.hasManifestation?i.a.createElement("div",{key:t.hasManifestation},i.a.createElement("span",null,t.hasManifestation," ",i.a.createElement(o.b,{to:"/text?resourceid="+t.hasManifestation},i.a.createElement(ne.k,null))),i.a.createElement("br",null),i.a.createElement("span",{style:{textIndent:"10px"}},"...Appearing on Surface ",e.state.surfaceMap[t.hasManifestation]," ",i.a.createElement(o.b,{to:"/text?resourceid="+e.state.surfaceMap[t.hasManifestation]},i.a.createElement(ne.k,null))),i.a.createElement("br",null),i.a.createElement("br",null)):[],i.a.createElement("div",{key:t["@id"]},i.a.createElement("hr",null),i.a.createElement("p",null,t["@id"]," ",i.a.createElement(o.b,{to:"/text?resourceid="+t["@id"]},i.a.createElement(ne.k,null))),t.showRelatedSurfaces?i.a.createElement("div",null,i.a.createElement(p.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedSurfaces(t["@id"])}},"Hide Related Codices"),i.a.createElement("br",null),e.state.showTextRegion!==t["@id"]?i.a.createElement(p.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){return e.handleSurface3Manifestations(t.hasManifestation,t["@id"])}},"View Focused Text Region"):i.a.createElement(p.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){return e.handleSurface3Manifestations("","")}},"Hide Focused Text Region"),i.a.createElement("br",null),a):i.a.createElement("div",null,i.a.createElement(p.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedSurfaces(t["@id"])}},"Show Related Codices"),i.a.createElement("br",null)),t.showComments?i.a.createElement("div",null,i.a.createElement(p.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedDiscussion(t["@id"])}},"Hide Related Discussions"),i.a.createElement("br",null),i.a.createElement($e,{resourceid:t["@id"],inbox:"http://inbox.scta.info/notifications?resourceid="+t["@id"]})):i.a.createElement("div",null,i.a.createElement(p.a,{variant:"outline-primary",size:"sm",block:!0,onClick:function(){e.handleToggleRelatedDiscussion(t["@id"])}},"Show Related Discussions"),i.a.createElement("br",null)))})):null))}}]),t}(i.a.Component),tt=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).retrieveCodexInfo=a.retrieveCodexInfo.bind(Object(q.a)(a)),a.handleSurfaceFocusChange=a.handleSurfaceFocusChange.bind(Object(q.a)(a)),a.handleToggleShowContents=a.handleToggleShowContents.bind(Object(q.a)(a)),a.handleSurface3Manifestations=a.handleSurface3Manifestations.bind(Object(q.a)(a)),a.state={items:{},title:"",focusedSurface:"",relatedCodices:[],showContents:!0,surface3Manifestations:[],surface3FocusedManifestation:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleToggleShowContents",value:function(){this.setState((function(e){return{showContents:!e.showContents}}))}},{key:"handleSurface3Manifestations",value:function(e){var t=this.state.focusedSurface.split("/resource/")[1].split("/")[0],a=e?e.filter((function(e){return e.manifestation.includes(t)}))[0].manifestation:"";this.setState({surface3Manifestations:e,surface3FocusedManifestation:a})}},{key:"handleSurfaceFocusChange",value:function(e){this.setState({focusedSurface:e})}},{key:"retrieveCodexInfo",value:function(e,t){var a=this;O("surface"===t?["SELECT DISTINCT ?codex ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","?codex <http://scta.info/property/hasSurface> <"+e+"> .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join(""):"canvas"===t?["SELECT DISTINCT ?codex ?surfaceFocus ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","?isurfaceFocus <http://scta.info/property/hasCanvas> <"+e+"> .","?surfaceFocus <http://scta.info/property/hasISurface> ?isurfaceFocus .","?codex <http://scta.info/property/hasSurface> ?surfaceFocus .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join(""):"manifest"===t?["SELECT DISTINCT ?codex ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","?icodex <http://scta.info/property/hasOfficialManifest> <"+e+"> .","?codex <http://scta.info/property/hasCodexItem> ?icodex .","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join(""):["SELECT DISTINCT ?codex ?expression ?codex_title ?item_expression_title ?item_expression_question_title ?surface ?surface_title ?surface_order ?manifestation ?manifestation_short_id ?status ","{","BIND(<"+e+"> as ?codex) . ","?codex <http://purl.org/dc/elements/1.1/title> ?codex_title .","OPTIONAL {","?icodex <http://scta.info/property/isCodexItemOf> ?codex .","?isurface <http://purl.org/dc/elements/1.1/isPartOf> ?icodex .","?surface <http://scta.info/property/hasISurface> ?isurface .","?surface <http://scta.info/property/order> ?surface_order .","?surface <http://purl.org/dc/elements/1.1/title> ?surface_title .","?manifestation <http://scta.info/property/isOnSurface> ?surface .","?manifestation <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?manifestation <http://scta.info/property/shortId> ?manifestation_short_id .","?manifestation <http://scta.info/property/isManifestationOf> ?expression .","?expression <http://purl.org/dc/elements/1.1/title> ?item_expression_title .","?expression <http://scta.info/property/status> ?status .","OPTIONAL {","?expression <http://scta.info/property/questionTitle> ?item_expression_question_title .","}","}","}","ORDER BY ?surface_order"].join("")).then((function(n){var i=n.data.results.bindings;if(i.length>0&&i[0].surface){var r=i.map((function(e){return e.expression?e.expression.value:""})).filter((function(e,t,a){return a.indexOf(e)===t})),s={};r.forEach((function(e){s[e]=[]})),i.forEach((function(e){var t={expression:e.expression.value,expressionTitle:e.item_expression_title.value,manifestation:e.manifestation.value,surface:e.surface.value,surfaceTitle:e.surface_title.value,questionTitle:e.item_expression_question_title?e.item_expression_question_title.value:""};s[e.expression.value].push(t)}));var o="";o="surface"===t?e:"canvas"===t?i[0].surfaceFocus.value:i[0].surface.value,a.setState({items:s,focusedSurface:o})}}))}},{key:"componentDidMount",value:function(){this.props.surfaceid?this.retrieveCodexInfo(this.props.surfaceid,"surface"):this.props.canvasid?this.retrieveCodexInfo(this.props.canvasid,"canvas"):this.props.manifestid?this.retrieveCodexInfo(this.props.manifestid,"manifest"):this.retrieveCodexInfo(this.props.codexid,"codex")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.surfaceid&&e.surfaceid!==this.props.surfaceid?this.retrieveCodexInfo(e.surfaceid,"surface"):e.canvasid&&e.canvasid!==this.props.canvasid?this.retrieveCodexInfo(e.canvasid,"canvas"):e.manifestid&&e.manifestid!==this.props.manifestid?this.retrieveCodexInfo(e.manifest,"manifest"):e.codexid!==this.props.codexid&&this.retrieveCodexInfo(e.codexid,"codex")}},{key:"render",value:function(){var e=this;return i.a.createElement(c.a,{fluid:!0,className:"Codex"},i.a.createElement("h1",null,this.props.codexid),i.a.createElement("div",{className:"codexWrapper"},i.a.createElement("div",{className:"codexContentsWrapper"},i.a.createElement("div",{className:"codexContents"},i.a.createElement("h2",null,"Codex Contents"),this.state.showContents&&this.state.items&&Object.keys(e.state.items).map((function(t){return i.a.createElement("p",{key:e.state.items[t][0].expression},i.a.createElement("span",null,i.a.createElement("span",{className:"codexLink",onClick:function(){e.handleSurfaceFocusChange(e.state.items[t][0].surface)}},e.state.items[t][0].surfaceTitle)," - ",i.a.createElement("span",{className:"codexLink",onClick:function(){e.handleSurfaceFocusChange(e.state.items[t][e.state.items[t].length-1].surface)}},e.state.items[t][e.state.items[t].length-1].surfaceTitle)),": ",i.a.createElement(o.b,{to:"/text?resourceid="+e.state.items[t][0].manifestation},e.state.items[t][0].expressionTitle),": ",e.state.items[t][0].questionTitle&&e.state.items[t][0].questionTitle)})))),i.a.createElement("div",{className:"codexImage"},i.a.createElement("h1",null,"Codex Pages"),e.state.surface3Manifestations.length>0?i.a.createElement(re,{manifestations:e.state.surface3Manifestations,focusedManifestation:e.state.surface3FocusedManifestation,annotationsDisplay:"paragraph",width:"501",hidden:!1}):e.state.focusedSurface?i.a.createElement(ee,{surfaceid:e.state.focusedSurface,lineFocusId:"",topLevel:e.props.topLevel,handleSurfaceFocusChange:e.handleSurfaceFocusChange,width:"501",annotationsDisplay:!1,hidden:!1}):null),i.a.createElement("div",{className:"surfaceInfo"},this.state.focusedSurface&&i.a.createElement(et,{surfaceid:this.state.focusedSurface,handleSurface3Manifestations:this.handleSurface3Manifestations}))))}}]),t}(i.a.Component);var at=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],s=a[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),p=u[0],h=u[1];return Object(n.useEffect)((function(){var t=O(["SELECT ?resource ?resourceTitle","{","?resource a <"+e.resourceTypeId+"> .","?resource <http://purl.org/dc/elements/1.1/title> ?resourceTitle","}","ORDER BY ?resourceTitle"].join(""));s("fetching"),t.then((function(e){s(e.data.results.bindings)}))}),[e.resourceTypeId]),i.a.createElement(c.a,{className:"collectionBody"},i.a.createElement("h1",null,e.resourceTypeId),i.a.createElement(v.a.Control,{as:"input",type:"text",placeholder:"filter",onChange:function(e){return h(e.target.value)},value:p}),"fetching"===r?i.a.createElement(S,null):r.map((function(e){return e.resourceTitle.value.includes(p)?i.a.createElement("p",{key:e.resource.value},i.a.createElement(o.b,{to:"/text?resourceid="+e.resource.value},e.resourceTitle.value)):null})))},nt=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(U.a)(this,Object(H.a)(t).call(this,e))).handleUpdateUrlResource=a.handleUpdateUrlResource.bind(Object(q.a)(a)),a.state={displayType:"",resourceid:"",itemTranscriptionId:"",blockDivFocus:"",resourceTitle:"",author:"",authorTitle:""},a}return Object(V.a)(t,e),Object(W.a)(t,[{key:"handleUpdateUrlResource",value:function(e){this.props.history.push({search:"?resourceid="+e})}},{key:"getInfo",value:function(e){var t,a=this;O(["SELECT DISTINCT ?type ?structureType ?level ?topLevel ?itemParent ?resourceTitle ?author ?authorTitle ","WHERE { ","<"+(t=e)+"> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?type . ","OPTIONAL {","<"+t+"> <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","}","OPTIONAL {","<"+t+"> <http://purl.org/dc/elements/1.1/title> ?resourceTitle .","}","OPTIONAL {","<"+t+"> <http://scta.info/property/structureType> ?structureType . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/level> ?level . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfTopLevelExpression> ?topLevel . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfTopLevelManifestation> ?topLevel . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfTopLevelTransription> ?topLevel . ","}","OPTIONAL {","<"+t+"> <http://scta.info/property/isPartOfStructureItem> ?itemParent . ","}","}"].join("")).then((function(t){var n=t.data.results.bindings.length>0?t.data.results.bindings[0]:"",i=n.type?n.type.value:null,r=n.structureType?n.structureType.value:null,s=n.topLevel?n.topLevel.value:e,o=n.itemParent?n.itemParent.value:null,l=n.resourceTitle?n.resourceTitle.value:"",c=n.author?n.author.value:"",u=n.authorTitle?n.authorTitle.value:"";if("http://scta.info/resource/person"===e)a.setState({displayType:"personList",resourceid:e,structureType:"",topLevel:"",type:"",resourceTitle:""});else if("http://scta.info/resource/codex"===e)a.setState({displayType:"codexList",resourceid:e,structureType:"",topLevel:"",type:"",resourceTitle:""});else if("http://scta.info/resource/person"===i)a.setState({displayType:"person",resourceid:e,structureType:"",topLevel:"",type:i,resourceTitle:l});else if("http://scta.info/resource/article"===i){O(function(e){return["SELECT DISTINCT ?doc ?articleType ","WHERE { ","<"+e+"> <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","<"+e+"> <http://scta.info/property/articleType> ?articleType .","?ctranscription <http://scta.info/property/hasXML> ?doc . ","}"].join("")}(e)).then((function(t){a.setState({displayType:"article",articleDoc:t.data.results.bindings[0]?t.data.results.bindings[0].doc.value:"",articleType:t.data.results.bindings[0]?t.data.results.bindings[0].articleType.value:"",resourceid:e,structureType:"",topLevel:"",type:i,resourceTitle:l})}))}else if("http://scta.info/resource/codex"===i)a.setState({displayType:"codex",resourceid:e,structureType:"",topLevel:"",type:i,resourceTitle:l});else if("http://scta.info/resource/surface"===i)a.setState({displayType:"surface",resourceid:e,structureType:"",topLevel:"",type:i,resourceTitle:l});else if("http://iiif.io/api/presentation/2#Manifest"===i)a.setState({displayType:"manifest",resourceid:e,structureType:"",topLevel:"",type:i,resourceTitle:l});else if("http://iiif.io/api/presentation/2#Canvas"===i)a.setState({displayType:"canvas",resourceid:e,structureType:"",topLevel:"",type:i,resourceTitle:l});else if("http://scta.info/resource/workGroup"===i)a.setState({displayType:"workGroup",resourceid:e,structureType:r,topLevel:s,type:i,resourceTitle:l});else if("http://scta.info/resource/structureCollection"===r)a.setState({displayType:"collection",resourceid:e,structureType:r,topLevel:s,type:i,resourceTitle:l,author:c,authorTitle:u});else if("http://scta.info/resource/structureItem"===r){if("http://scta.info/resource/transcription"===i)a.setState({itemTranscriptionId:e,displayType:"item",blockDivFocus:"",resourceTitle:l});else O(function(e){return["SELECT DISTINCT ?ctranscription ","WHERE { ","{","<"+e+"> <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation . ","?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","UNION","{","<"+e+"> <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","}"].join("")}(e)).then((function(e){a.setState({itemTranscriptionId:e.data.results.bindings[0]?e.data.results.bindings[0].ctranscription.value:"",displayType:"item",blockDivFocus:"",resourceTitle:l})}))}else if("http://scta.info/resource/structureBlock"===r||"http://scta.info/resource/structureDivision"===r){O(function(e){return["SELECT DISTINCT ?ctranscription ?blockDivExpression ","WHERE { ","OPTIONAL","{","<"+e+"> <http://scta.info/property/isPartOfStructureItem> ?itemParent . ","{","{","?itemParent <http://scta.info/property/hasCanonicalManifestation> ?cmanifestation . ","?cmanifestation <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","UNION","{","?itemParent <http://scta.info/property/hasCanonicalTranscription> ?ctranscription . ","}","}","}","OPTIONAL","{","{","{","<"+e+"> <http://scta.info/property/isManifestationOf> ?blockDivExpression . ","}","UNION","{","<"+e+"> <http://scta.info/property/isTranscriptionOf> ?blockDivManifestation . ","?blockDivManifestation <http://scta.info/property/isManifestationOf> ?blockDivExpression . ","}","}","}","}"].join("")}(e)).then((function(t){"http://scta.info/resource/transcription"===i?a.setState({itemTranscriptionId:o,blockDivFocus:t.data.results.bindings[0].blockDivExpression.value,displayType:"item",resourceTitle:l}):"http://scta.info/resource/expression"===i?t.data.results.bindings[0].ctranscription?a.setState({itemTranscriptionId:t.data.results.bindings[0].ctranscription.value,blockDivFocus:e,displayType:"item",resourceTitle:l}):a.setState({displayType:"notFound"}):a.setState({itemTranscriptionId:t.data.results.bindings[0].ctranscription.value,blockDivFocus:t.data.results.bindings[0].blockDivExpression.value,displayType:"item",resourceTitle:l})}))}else a.setState({displayType:"notFound"})}))}},{key:"componentDidMount",value:function(){if(this.props.location){var e=B.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).resourceid;this.getInfo(e)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=B.a.parse(e.location.search,{ignoreQueryPrefix:!0}).resourceid;this.getInfo(t)}},{key:"render",value:function(){var e=this;return"personList"===e.state.displayType?i.a.createElement(at,{resourceTypeId:"http://scta.info/resource/person"}):"codexList"===e.state.displayType?i.a.createElement(at,{resourceTypeId:"http://scta.info/resource/codex"}):"person"===e.state.displayType?i.a.createElement(Je,{resourceid:e.state.resourceid}):"article"===e.state.displayType?i.a.createElement(Ge,{doc:e.state.articleDoc,articleType:e.state.articleType}):"workGroup"===e.state.displayType?i.a.createElement(Qe,{resourceid:e.state.resourceid,structureType:e.state.structureType,topLevel:e.state.topLevel,type:e.state.type}):"collection"===e.state.displayType?i.a.createElement(c.a,{className:"collectionBody"},i.a.createElement("h1",null,e.state.resourceTitle),i.a.createElement("p",{style:{textAlign:"center"}},"By ",i.a.createElement(o.b,{to:"/text?resourceid="+e.state.author},e.state.authorTitle)),i.a.createElement(Be.a,null,i.a.createElement(ze.a,{xs:9},i.a.createElement(Fe,{focusResourceid:e.state.resourceid,resourceid:e.state.resourceid,title:e.state.resourceTitle,hidden:!1,mtFocus:"",collectionLink:!0,showParentLink:!0})),i.a.createElement(ze.a,null,i.a.createElement(D,{searchEid:e.state.topLevel,showSubmit:!0,showAdvancedParameters:!0,showLabels:!1})))):"item"===e.state.displayType?e.state.itemTranscriptionId?i.a.createElement(Ve,{itemid:e.state.itemTranscriptionId.split("/resource/")[1].split("/")[0],transcriptionid:e.state.itemTranscriptionId,blockDivFocus:e.state.blockDivFocus,handleUpdateUrlResource:e.handleUpdateUrlResource}):i.a.createElement("p",null,"Apologies, no transcriptions of this text are currently available."):"codex"===e.state.displayType?i.a.createElement(tt,{codexid:e.state.resourceid}):"surface"===e.state.displayType?i.a.createElement(tt,{surfaceid:e.state.resourceid}):"canvas"===e.state.displayType?i.a.createElement(tt,{canvasid:e.state.resourceid}):"manifest"===e.state.displayType?i.a.createElement(tt,{manifestid:e.state.resourceid}):"notFound"===e.state.displayType?i.a.createElement("p",null,"Apologies, this resource could not be found"):null}}]),t}(i.a.Component);var it=function(){return i.a.createElement("div",{className:"About"},i.a.createElement("h1",null,"About"))};var rt=function(){var e=Object(d.b)().t;return i.a.createElement(Me.a,{bg:"dark",variant:"light",expand:"lg",fixed:"top"},i.a.createElement(ce.a,null,i.a.createElement(o.c,{className:"nav-link",to:"/"},e("Title"))),i.a.createElement(Me.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Me.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(ce.a,null,i.a.createElement(o.c,{className:"nav-link",to:"/res?resourceid=http://scta.info/resource/scta"},e("Texts")),i.a.createElement(o.c,{className:"nav-link",to:"/res?resourceid=http://scta.info/resource/person"},e("People")),i.a.createElement(o.c,{className:"nav-link",to:"/res?resourceid=http://scta.info/resource/codex"},e("Codices")),i.a.createElement(o.c,{className:"nav-link",to:"/search"},e("Search"))),i.a.createElement(ce.a,null,i.a.createElement("a",{className:"nav-link",href:"https://scta.info/donate"},e("Donate")))))};var st=function(){var e=Object(d.b)().t;return i.a.createElement(Me.a,{bg:"light",variant:"light",expand:"lg",fixed:"bottom",style:{zIndex:"0"}},i.a.createElement(Me.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Me.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(ce.a,{style:{display:"flex",justifyContent:"space-around",width:"100%"}},i.a.createElement(ce.a.Link,{href:"http://github.com/lombardpress/lombardpress-webjs"},"Lbp-Web.js"),i.a.createElement(ce.a.Link,{href:"http://lombardpress.org"},e("A LombardPress Publication")),i.a.createElement(ce.a.Link,{href:"http://scta.info"},e("Powered by SCTA Data")," "),i.a.createElement(ce.a.Link,{href:"http://jeffreycwitt.com"},e("Designed by Jeffrey C Witt")))))},ot=(a(264),a(265),function(){return i.a.createElement(n.Suspense,{fallback:i.a.createElement(S,null)},i.a.createElement(o.a,{forceRefresh:!1},i.a.createElement("div",null,i.a.createElement(rt,null),i.a.createElement(l.c,null,i.a.createElement(l.a,{path:"/",exact:!0,component:f}),i.a.createElement(l.a,{path:"/res",exact:!0,component:nt}),i.a.createElement(l.a,{path:"/text",exact:!0,component:nt}),i.a.createElement(l.a,{path:"/about",exact:!0,component:it}),i.a.createElement(l.a,{path:"/search",exact:!0,component:D})),i.a.createElement(st,null))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=a(66),ct=a(97),ut=a(98);lt.a.use(ct.a).use(ut.a).use(d.a).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1}});lt.a;s.a.render(i.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[100,1,2]]]);
//# sourceMappingURL=main.41a856d4.chunk.js.map